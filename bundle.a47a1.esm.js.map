{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./components/Player.js","webpack:///./audio/index.js","webpack:///./components/Card.js","webpack:///./components/Footer.js","webpack:///./components/ScoreTracker.js","webpack:///./assets/invisiblecow.jpg","webpack:///./hooks/useWindowSize.js","webpack:///../node_modules/wired-card/lib/wired-card.js","webpack:///../src/index.js","webpack:///./index.js","webpack:///./pages/Game.js","webpack:///../node_modules/wired-lib/lib/wired-base.js","webpack:///./components/Title.js","webpack:///../node_modules/mobx/lib/mobx.module.js","webpack:///../src/util.js","webpack:///../src/memo.js","webpack:///../src/forwardRef.js","webpack:///../src/suspense.js","webpack:///../src/suspense-list.js","webpack:///../src/portals.js","webpack:///../src/render.js","webpack:///../node_modules/mobx-react-lite/dist/index.module.js","webpack:///../src/PureComponent.js","webpack:///../src/Children.js","webpack:///../src/events.js","webpack:///./Main.js","webpack:///./pages/Win.js","webpack:///../src/create-element.js","webpack:///../src/component.js","webpack:///../src/diff/children.js","webpack:///../src/diff/props.js","webpack:///../src/diff/index.js","webpack:///../src/clone-element.js","webpack:///../src/create-context.js","webpack:///../src/constants.js","webpack:///../src/options.js","webpack:///../src/diff/catch-error.js","webpack:///./store/index.js","webpack:///../node_modules/wired-button/lib/wired-button.js","webpack:///./components/Target.js","webpack:///../node_modules/preact-cli/lib/lib/entry.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./assets/cow.jpg","webpack:///../node_modules/goober/dist/goober.module.js","webpack:///./components/Desc.js","webpack:///../node_modules/roughjs/bin/fillers/filler-utils.js","webpack:///../node_modules/wired-lib/lib/wired-lib.js","webpack:///../node_modules/roughjs/bin/geometry.js","webpack:///../node_modules/roughjs/bin/utils/hachure.js","webpack:///./components/Image.js","webpack:///../src/lib/template-factory.ts","webpack:///../src/lib/modify-template.ts","webpack:///../src/lib/decorators.ts","webpack:///../src/lib/directive.ts","webpack:///../src/lib/dom.ts","webpack:///../src/lib/part.ts","webpack:///../src/lib/template.ts","webpack:///../src/lib/template-instance.ts","webpack:///../src/lib/template-result.ts","webpack:///../src/lib/parts.ts","webpack:///../src/lib/default-template-processor.ts","webpack:///../src/lib/render.ts","webpack:///src/lit-html.ts","webpack:///../src/lib/shady-render.ts","webpack:///../src/lib/updating-element.ts","webpack:///../src/lib/css-tag.ts","webpack:///src/lit-element.ts","webpack:///./pages/Start.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Tip","styled","show","transition","opacity","position","margin","zIndex","fontFamily","observer","store","useAppStore","internalMousePos","useRef","showTip","setShowTip","useState","useEffect","onMouseMove","e","curMousePos","window","Event","pageX","event","clientX","document","documentElement","scrollLeft","body","pageY","clientY","scrollTop","current","addEventListener","removeEventListener","playerUpdater","setInterval","action","playerPos","listener","audioCtx","positionX","positionY","clearInterval","x","y","audioGainNode","NUM_SOUND_LEVELS","sounds","Array","fill","map","buffer","loaded","AudioContext","webkitAudioContext","createGain","alert","forEach","val","request","XMLHttpRequest","open","process","responseType","onload","decodeAudioData","response","send","playSound","panner","fileIdx","console","error","source","createBufferSource","connect","destination","start","CardContents","Card","children","elevation","Container","Footer","href","target","rel","BEST_TIME_KEY","BEST_SCORE_KEY","curTime","setCurTime","undefined","Storage","storedBestTime","parseInt","localStorage","getItem","storedTotScore","isNaN","bestTimeSeconds","totScore","timerInterval","prevTime","curTimeSeconds","className","isFinite","useWindowSize","windowWidth","setWindowWidth","innerWidth","windowHeight","setWindowHeight","innerHeight","onResize","__decorate","decorators","desc","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__metadata","k","v","metadata","WiredCard","WiredBase","constructor","super","this","ResizeObserver","resizeObserver","svg","wiredRender","BaseCSS","css","render","html","updated","changed","force","has","attachResizeListener","disconnectedCallback","detachResizeListener","observe","windowResizeHandler","passive","unobserve","canvasSize","getBoundingClientRect","elev","Math","min","max","width","height","draw","size","trim","fillNode","hachureFill","classList","add","style","setProperty","appendChild","rectangle","line","type","Number","String","customElement","getHookState","index","options","_hook","currentComponent","hooks","__hooks","_list","_pendingEffects","push","initialState","useReducer","invokeOrReturn","reducer","init","hookState","currentIndex","_component","_value","nextValue","setState","callback","args","state","argsChanged","_args","useLayoutEffect","_renderCallbacks","initialValue","useMemo","useImperativeHandle","ref","createHandle","concat","factory","_factory","useCallback","useContext","context","provider","_id","_defaultValue","sub","props","useDebugValue","formatter","flushAfterPaintEffects","afterPaintEffects","some","component","_parentDom","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","prevRaf","oldBeforeRender","_render","oldAfterDiff","diffed","oldCommit","_commit","oldBeforeUnmount","unmount","vnode","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","commitQueue","filter","cb","setPragma","h","App","Game","LitElement","lastSize","_changed","hasChildNodes","removeChild","lastChild","setAttribute","query","SVGSVGElement","__values","iterator","next","__read","ar","__spread","getNextId","globalState","mobxGuid","fail","once","func","invoked","apply","isObject","isPlainObject","proto","getPrototypeOf","addHiddenProp","propName","writable","configurable","createInstanceofPredicate","clazz","isES6Map","thing","Map","isES6Set","Set","getPlainObjectKeys","enumerables","getOwnPropertySymbols","from","stringifyKey","toString","toPrimitive","createAtom","onBecomeObservedHandler","onBecomeUnobservedHandler","noop","arg3","atom","Atom","interceptHook","onBecomeUnobserved","createPropertyInitializerDescriptor","prop","cache","enumerableDescriptorCache","nonEnumerableDescriptorCache","initializeInstance","set","e_1","_a","mobxDidRunLazyInitializersSymbol","mobxPendingDecorators","keys","keys_1","keys_1_1","propertyCreator","descriptor","decoratorTarget","decoratorArguments","e_1_1","return","createPropDecorator","propertyInitiallyEnumerable","decorator","applyImmediately","__assign","quacksLikeADecorator","EMPTY_ARRAY","slice","deepEnhancer","_","isObservable","isArray","observable","array","referenceEnhancer","newValue","createDecoratorForEnhancer","enhancer","propertyName","initializer","asObservableObject","addObservableProp","res","asCreateObservableOptions","defaultCreateObservableOptions","deep","proxy","getEnhancerFromOptions","defaultDecorator","incorrectlyUsedAsDecorator","isCaughtException","CaughtException","shouldCompute","derivation","dependenciesState","IDerivationState","UP_TO_DATE","NOT_TRACKING","STALE","POSSIBLY_STALE","prevAllowStateReads","allowStateReadsStart","prevUntracked","untrackedStart","obs","observing","obj","isComputedValue","disableErrorBoundaries","untrackedEnd","allowStateReadsEnd","changeDependenciesStateTo0","checkIfStateModificationsAreAllowed","hasObservers","observers","computationDepth","allowStateChanges","enforceActions","trackDerivedFunction","newObserving","unboundDepsCount","runId","prevTracking","trackingDerivation","prevObserving","lowestNewObservingDerivationState","i0","dep","diffValue","removeObserver","addObserver","onBecomeStale","bindDependencies","clearObserving","untracked","prev","allowStateReads","lowestObserverState","createAction","actionName","fn","executeAction","isMobxAction","scope","runInfo","startTime","prevDerivation","startBatch","prevAllowStateChanges","allowStateChangesStart","notifySpy","actionId","nextActionId","parentActionId","currentActionId","_startAction","err","suppressReactionErrors","allowStateChangesEnd","endBatch","_endAction","getGlobal","global","self","mockGlobal","node","delete","queueForUnobservation","isPendingUnobservation","pendingUnobservations","inBatch","runReactions","list","isBeingObserved","ComputedValue","suspend","reportObserved","lastAccessedBy","onBecomeObserved","logTraceInfo","log","isTracing","TraceMode","BREAK","lines","printDepTree","tree","depth","join","dependencies","child","getDependencyTree","Function","replace","isRunningReactions","reactionScheduler","runReactionsHelper","allReactions","pendingReactions","iterations","MAX_REACTION_ITERATIONS","splice","remainingReactions","runReaction","setReactionScheduler","baseScheduler","spy","warn","dontReassignFields","namedActionDecorator","initializer_1","actionFieldDecorator","runInAction","arg1","arg2","defineBoundAction","autorun","view","opts","reactionRunner","reaction","EMPTY_OBJECT","scheduler","delay","Reaction","track","onError","requiresObservable","scheduler_1","createSchedulerFromOptions","isScheduled_1","isDisposed","schedule","getDisposer","run","getAtom","listenersKey","hookListeners","configure","computedRequiresReaction","computedConfigurable","reactionRequiresObservable","observableRequiresReaction","isolateGlobalState","isolateCalled","canMergeGlobalState","__mobxInstanceCount","__mobxGlobals","MobXGlobals","ea","extendObservable","properties","getDefaultDecoratorFromObjectOptions","extendObservableObjectWithProperties","refDecorator","deepDecorator","e_2","_b","keys_2","keys_2_1","resultDescriptor","computedDecorator","e_2_1","nodeToDependencyTree","item","indexOf","FlowCancellationError","message","_isObservable","isObservableObject","$mobx","values","isAtom","isReaction","trace","_i","enterBreakPoint","pop","getAtomFromArgs","NONE","LOG","transaction","thisArg","getAdm","isPropertyKey","createDynamicObservableObject","base","Proxy","objectProxyTraps","hasInterceptors","interceptable","interceptors","registerInterceptor","handler","idx","interceptChange","change","prevU","hasListeners","listenable","changeListeners","registerListener","listeners","notifyListeners","createObservableArray","initialValues","owned","adm","ObservableArrayAdministration","arrayTraps","spliceWithArray","isObservableArray","isObservableArrayAdministration","defaultEnhancer","ObservableObjectAdministration","getAdministrationForComputedPropOwner","owner","isObservableObjectAdministration","isObservableSet","isObservableMap","anyThing","_keysAtom","_data","_hasMap","getAdministration","deepEqual","a","b","eq","aStack","bStack","unwrap","valueOf","areArrays","aCtor","bCtor","has$1","entries","makeIterable","getSelf","extendStatics","setPrototypeOf","__proto__","assign","onBecomeObservedListeners","onBecomeUnobservedListeners","reportChanged","propagateChanged","comparer","identity","structural","default","is","shallow","shallowDecorator","refStructDecorator","oldValue","observableFactories","box","ObservableValue","equals","ObservableMap","ObservableSet","struct","instance","decoratorArgs","addComputedProp","computedStructDecorator","computed","cause","_super","_this","hasUnreportedChange","__","__extends","dehanceValue","dehancer","prepareNewValue","UNCHANGED","setNewValue","intercept","fireImmediately","toJSON","__mapid","isComputing","isRunningSetter","setter","compareStructural","requiresReaction","keepAlive","propagateMaybeChanged","trackAndCompute","propagateChangeConfirmed","warnAboutUntrackedRead","computeValue","peek","wasSuspended","firstTime","prevValue","version","spyListeners","globalReactionErrorHandlers","onInvalidate","errorHandler","_isScheduled","_isTrackPending","_isRunning","isScheduled","reportExceptionInDerivation","dispose","arg4","bound","applyToInstance","Error","write","values_1","key_1","deleteProperty","remove","ownKeys","keysAtom","preventExtensions","getArrayLength","arrayExtensions","setArrayLength","lastKnownLength","newV","oldV","dehanceValues","added","addedCount","removed","removedCount","newLength","currentLength","newItems","updateArrayLength","oldLength","delta","deleteCount","spliceItemsIntoValues","notifyArraySplice","notifyArrayChildUpdate","notify","clear","toJS","items","shift","unshift","reverse","clone","sort","funcName","_a$1","ObservableMapMarker","initialData","merge","_has","entry","newEntry","hasKey","_updateValue","_addValue","_updateHasMapEntry","nextIndex","_c","_d","_e","other","newKeys","toPOJO","e_3","e_3_1","ObservableSetMarker","_atom","callbackFn","observableValues","read","pendingKeys","exists","observablePropertyConfigs","generateObservablePropConfig","notifyPropertyAddition","propertyOwner","computedPropertyConfigs","generateComputedPropConfig","oldObservable","illegalAccess","getKeys","__MOBX_DEVTOOLS_GLOBAL_HOOK__","injectMobx","extras","getDebugName","shallowDiffers","memo","shouldUpdate","nextProps","updateRef","Memoed","shouldComponentUpdate","createElement","isReactComponent","displayName","_forwarded","forwardRef","Forwarded","detachedClone","_children","Suspense","_suspensions","_detachOnNextRender","suspended","_parent","_suspended","SuspenseList","_next","_map","Portal","container","wrap","ContextProvider","_container","_temp","parentNode","_unmount","_wrap","_hasMounted","createTextNode","hydrate","componentWillUnmount","parent","firstChild","preactRender","setSafeDescriptor","isValidElement","element","$$typeof","REACT_ELEMENT_TYPE","isUsingStaticRendering","globalIsUsingStaticRendering","printDebugValue","useForceUpdate","setTick","tick","useObserver","baseComponentName","forceUpdate","rendering","exception","useUnmount","baseComponent","memoComponent","realOptions","wrappedComponent","hoistBlackList","ObserverComponent","ObserverPropsCheck","componentName","location","propFullName","hasProp","hasExtraProp","useAsObservableSourceInternal","usedByLocalStore","React","useLocalStore","local","PureComponent","isPureReactComponent","Component","oldVNodeHook","mapFn","toChildArray","Children","count","only","toArray","oldCatchError","_catchError","newVNode","oldVNode","then","_childDidSuspend","promise","suspendingComponent","resolve","_vnode","resolved","onResolved","onSuspensionComplete","_suspendedComponentWillUnmount","fallback","revealOrder","delegated","wrappedUnsuspend","unsuspend","componentDidUpdate","componentDidMount","getChildContext","CAMEL_PROPS","for","oldEventHook","persist","nativeEvent","classNameDescriptor","class","shouldSanitize","attrs","defaultValue","multiple","selected","test","toLowerCase","newProps","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","unmountComponentAtNode","createPortal","createContext","createFactory","cloneElement","preactCloneElement","createRef","Fragment","findDOMNode","nodeType","unstable_batchedUpdates","lazy","loader","Lazy","prom","compare","propTypes","glob","PageContainer","gameState","GameState","INITIAL","Start","RUNNING","FINISHED","Win","onClickStart","setItem","newScore","src","Cow","onClick","removeNode","normalizedProps","defaultProps","createVNode","_depth","_dom","_lastDomChild","getDomSibling","childIndex","sibling","updateParentDomPointers","enqueueRender","_dirty","q","prevDebounce","debounceRendering","defer","newDom","oldDom","parentDom","diff","_context","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","isSvg","excessDomChildren","isHydrating","j","sibDom","firstChildDom","refs","oldChildren","EMPTY_ARR","oldChildrenLength","EMPTY_OBJ","childVNode","outer","nextSibling","insertBefore","applyRef","flattened","setStyle","IS_NON_DIMENSIONAL","dom","useCapture","nameLower","cssText","eventProxy","_listeners","removeAttributeNS","setAttributeNS","removeAttribute","tmp","isNew","oldProps","oldState","snapshot","clearProcessingException","cctx","newType","_diff","contextType","_processingException","_pendingError","doRender","_nextState","getDerivedStateFromProps","componentWillMount","componentWillReceiveProps","_force","componentWillUpdate","getSnapshotBeforeUpdate","diffElementNodes","root","oldHtml","newHtml","localName","createElementNS","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","diffProps","checked","parentVNode","skipRemove","replaceNode","_root","IS_HYDRATE","ctx","Consumer","Provider","subs","_props","old","getDerivedStateFromError","componentDidCatch","update","Promise","createStore","targetRelativePos","windowSize","Infinity","AppContext","AppStoreProvider","WiredButton","disabled","focus","button","Boolean","reflect","HTMLButtonElement","Indicator","top","left","TARGET_RADIUS","borderRadius","cursor","transform","curWindowSize","audioPanner","playerTargetDistance","sqrt","targetPos","isTargetFound","onClickTarget","random","positionZ","TARGET_Z_POS","PannerNode","panningModel","distanceModel","orientationX","orientationY","orientationZ","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","interval","percentageDistFromTarget","exp","E","soundFileToPlay","floor","clampedGainValue","gain","interopDefault","navigator","serviceWorker","register","__webpack_public_path__","require","firstElementChild","app","preRenderData","inlineDataElement","querySelector","JSON","parse","CLI_DATA","g","u","_goober","head","id","stringify","split","reduce","charCodeAt","exec","getIntersectingLines","points","intersections","s1","Segment","s2","intersects","xi","yi","svgNode","tagName","_getOffset","__roughness","_line","x1","y1","x2","y2","existingPath","lengthSq","pow","offset","__maxRandomnessOffset","halfOffset","divergePoint","midDispX","__bowing","midDispY","path","WiresPath","moveTo","bcurveTo","renderHachureLines","gNode","prevPoint","ret","right","bottom","angle","hachureAngle","gap","hachureGap","strokeWidth","rect","PI","cosAngle","cos","sinAngle","sin","tanAngle","tan","it","HachureIterator","nextLine","hachureLinesForPolygon","p1","p2","MAX_VALUE","px1","py1","px2","py2","_undefined","isUndefined","otherSegment","grad1","grad2","int1","int2","abs","deltaX","hGap","pos","sLeft","sRight","xLower","xUpper","yLower","yUpper","__curveTightness","__curveStepCount","cp1x","cp1y","cp2x","cp2y","bowing","curveStepCount","curveTightness","dashGap","dashOffset","fillStyle","fillWeight","maxRandomnessOffset","roughness","simplification","stroke","zigzagOffset","templateFactory","templateCache","templateCaches","stringsArray","WeakMap","keyString","template","strings","marker","Template","getTemplateElement","removeNodesFromTemplate","nodesToRemove","content","parts","walker","createTreeWalker","walkerNodeFilter","partIndex","part","nodeIndex","removeCount","nodesToRemoveInTemplate","currentRemovingNode","nextNode","currentNode","previousSibling","protoOrDescriptor","legacyProperty","standardProperty","selector","renderRoot","legacyQuery","standardQuery","directives","isDirective","isCEPolyfill","customElements","polyfillWrapFlushCallback","removeNodes","end","noChange","nothing","nodeMarker","markerRegex","RegExp","boundAttributeSuffix","stack","lastPartIndex","hasAttributes","endsWith","lastAttributeNameRegex","attributeLookupName","attributeValue","getAttribute","statics","lastIndex","insert","createMarker","match","str","suffix","isTemplatePartActive","createComment","processor","__parts","setValue","commit","fragment","cloneNode","importNode","nodeName","handleTextExpression","insertAfterNode","handleAttributeExpressions","adoptNode","upgrade","commentMarker","isCommentBinding","commentOpen","lastIndexOf","attributeMatch","substr","getHTML","isPrimitive","isIterable","AttributeCommitter","dirty","_createPart","text","_getValue","committer","directive","__pendingValue","startNode","endNode","__insert","__commitText","__commitTemplateResult","Node","__commitNode","__commitIterable","valueAsString","_clone","itemPart","itemParts","appendIntoPart","insertAfterPart","PropertyCommitter","single","PropertyPart","eventOptionsSupported","eventName","eventContext","__boundHandleEvent","handleEvent","newListener","oldListener","shouldRemoveListener","capture","shouldAddListener","__options","getOptions","defaultTemplateProcessor","prefix","countNodes","startIndex","getTemplateCacheKey","scopeName","compatibleShadyCSSVersion","ShadyCSS","prepareTemplateDom","shadyTemplateFactory","cacheKey","TEMPLATE_TYPES","shadyRenderSet","prepareTemplateStyles","renderedDOM","templateElement","styles","querySelectorAll","condensedStyle","textContent","templates","removeStylesFromLitTemplates","refNode","insertCount","walkerIndex","insertNodeIntoTemplate","nativeShadow","removes","JSCompiler_renameProperty","defaultConverter","notEqual","defaultPropertyDeclaration","attribute","converter","hasChanged","microtaskPromise","STATE_HAS_UPDATED","STATE_UPDATE_REQUESTED","STATE_IS_REFLECTING_TO_ATTRIBUTE","STATE_IS_REFLECTING_TO_PROPERTY","STATE_HAS_CONNECTED","finalized","UpdatingElement","HTMLElement","_updateState","_instanceProperties","_updatePromise","_hasConnectedResolver","_changedProperties","_reflectingProperties","initialize","finalize","_classProperties","attr","_attributeNameForProperty","_attributeToPropertyMap","superProperties","_ensureClassProperties","noAccessor","_requestUpdate","superCtor","propKeys","getOwnPropertyNames","createProperty","fromAttribute","toAttribute","_saveInstanceProperties","_v","_attributeToProperty","ctor","attrValue","_propertyValueToAttribute","_propertyValueFromAttribute","shouldRequestUpdate","_valueHasChanged","_hasRequestedUpdate","_enqueueUpdate","updateComplete","reject","previousUpdatePromise","rej","_hasConnected","performUpdate","_applyInstanceProperties","changedProperties","_markUpdated","firstUpdated","_getUpdateComplete","_propertyToAttribute","classOrDescriptor","define","legacyCustomElement","kind","elements","standardCustomElement","placement","supportsAdoptingStyleSheets","Document","CSSStyleSheet","constructionToken","CSSResult","safeToken","_styleSheet","replaceSync","textFromCSSResult","acc","flattenStyles","flat","arrayFlat","_styles","_getUniqueStyles","userStyles","reduceRight","createRenderRoot","ShadowRoot","adoptStyles","attachShadow","adoptedStyleSheets","styleSheet","_needsShimAdoptedStyleSheets","ScopingShim","prepareAdoptedCssText","connectedCallback","hasUpdated","styleElement","templateResult","hasRendered","needsScoping","host","firstScopeRender","renderContainer","createDocumentFragment","appendInto","CovertCow"],"mappings":"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","file":"bundle.a47a1.esm.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/covert-cow/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"mdyV\");\n","import { styled } from 'goober';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { action } from 'mobx';\nimport { observer } from 'mobx-react-lite';\n\nimport { useAppStore } from 'store';\nimport { audioCtx } from 'audio';\n\n/**\n * Styles\n */\nconst Tip = styled('span')(({ show }) => ({\n  transition: 'opacity 300ms',\n  opacity: show ? 0.8 : 0,\n\n  position: 'relative',\n  margin: 'auto',\n  zIndex: -1,\n  fontFamily: 'Comic Sans MS, sans-serif'\n}));\n\n/**\n * Component\n */\nconst Player = () => {\n  const store = useAppStore();\n\n  const internalMousePos = useRef([0, 0]);\n  const [showTip, setShowTip] = useState(true);\n\n  /**\n   * Compute cursor position to update internal player position.\n   */\n  useEffect(() => {\n    const onMouseMove = e => {\n      const curMousePos = [\n        window.Event\n          ? e.pageX\n          : event.clientX +\n            (document.documentElement.scrollLeft\n              ? document.documentElement.scrollLeft\n              : document.body.scrollLeft),\n        window.Event\n          ? e.pageY\n          : event.clientY +\n            (document.documentElement.scrollTop\n              ? document.documentElement.scrollTop\n              : document.body.scrollTop)\n      ];\n\n      internalMousePos.current = curMousePos;\n\n      setShowTip(false);\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n\n    return () => document.removeEventListener('mousemove', onMouseMove);\n  }, []);\n\n  /**\n   * Update player position at a set interval for target detection.\n   */\n  useEffect(() => {\n    const playerUpdater = setInterval(\n      action(() => {\n        // update player position\n        store.playerPos = internalMousePos.current;\n\n        // update audio listener position to reflect new player position\n        const listener = audioCtx.listener;\n        listener.positionX.value = internalMousePos.current[0];\n        listener.positionY.value = internalMousePos.current[1];\n      }),\n      400\n    );\n\n    return () => clearInterval(playerUpdater);\n  }, []);\n\n  return (\n    <Tip\n      show={showTip}\n      x={internalMousePos.current[0]}\n      y={internalMousePos.current[1]}\n    >\n      MOOve your mouse!\n    </Tip>\n  );\n};\n\nexport default observer(Player);\n","const SOUND_PATH = `${process.env.PUBLIC_PATH}/assets/sounds/`;\nexport const NUM_SOUND_LEVELS = 12; // 0 to 11 inclusive\nconst sounds = new Array(NUM_SOUND_LEVELS)\n  .fill(0)\n  .map(() => ({ buffer: null, loaded: false }));\n\nexport let audioCtx;\nexport let audioGainNode;\n\n/**\n * Instantiate the audio instances.\n */\ntry {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n  audioCtx = new AudioContext();\n  audioGainNode = audioCtx.createGain();\n} catch (e) {\n  alert('Web Audio API is not supported in this browser!');\n}\n\n/**\n * Pre-load all the sounds that we'll need to play.\n */\nsounds.forEach((val, i) => {\n  const request = new XMLHttpRequest();\n  const url = `${SOUND_PATH}${i}.mp3`;\n  request.open('GET', url, true);\n  request.responseType = 'arraybuffer';\n\n  // Decode asynchronously\n  request.onload = () => {\n    audioCtx.decodeAudioData(request.response, buffer => {\n      val.buffer = buffer;\n      val.loaded = true;\n    });\n  };\n  request.send();\n});\n\n/**\n * Plays the specified sound.\n */\nexport const playSound = (panner, fileIdx) => {\n  if (!sounds[fileIdx].loaded) {\n    console.error('Sound not loaded!');\n    return false;\n  }\n\n  let source = audioCtx.createBufferSource(); // creates a sound source\n  source.buffer = sounds[fileIdx].buffer; // tell the source which sound to play\n  source\n    .connect(audioGainNode)\n    .connect(panner)\n    .connect(audioCtx.destination); // connect the source to the context's destination (the speakers)\n  source.start(0); // play the source now\n  // note: on older systems, may have to use deprecated noteOn(time);\n};\n","import { styled } from 'goober';\nimport 'wired-card';\n\nconst CardContents = styled('div')`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Card = ({ children }) => (\n  <wired-card elevation=\"2\">\n    <CardContents>{children}</CardContents>\n  </wired-card>\n);\n\nexport default Card;\n","import { styled } from 'goober';\n\n/**\n * Styles\n */\nconst Container = styled('footer')`\n  position: absolute;\n  width: 100%;\n  bottom: 5px;\n  text-align: center;\n\n  & > * {\n    color: lightgray;\n    font-size: 14px;\n  }\n\n  & > a:hover {\n    text-decoration: none;\n  }\n`;\n\nconst Footer = () => (\n  <Container>\n    <span>a game by </span>\n    <a href=\"https://alexxie.ca\" target=\"_blank\" rel=\"noopener noreferrer\">\n      alex\n    </a>\n  </Container>\n);\n\nexport default Footer;\n","import { styled } from 'goober';\nimport { useState, useEffect } from 'preact/hooks';\nimport { action } from 'mobx';\nimport { observer } from 'mobx-react-lite';\n\nimport { useAppStore } from 'store';\n\nexport const BEST_TIME_KEY = 'game_best_time';\nexport const BEST_SCORE_KEY = 'game_tot_score';\n\nconst Container = styled('div')`\n  position: absolute;\n  top: 5px;\n  right: 15px;\n  z-index: -1;\n\n  text-align: center;\n\n  & > * {\n    font-size: 14px;\n    color: grey;\n  }\n\n  & > .cur-time {\n    font-size: 40px;\n    color: black;\n  }\n`;\n\nconst ScoreTracker = () => {\n  const store = useAppStore();\n\n  const [curTime, setCurTime] = useState(0);\n\n  useEffect(\n    action(() => {\n      if (typeof Storage !== undefined) {\n        // check browser compatability\n        const storedBestTime = parseInt(\n          window.localStorage.getItem(BEST_TIME_KEY),\n          10\n        );\n        const storedTotScore = parseInt(\n          window.localStorage.getItem(BEST_SCORE_KEY),\n          10\n        );\n\n        if (!isNaN(storedBestTime)) {\n          store.bestTimeSeconds = storedBestTime;\n        }\n\n        if (!isNaN(storedTotScore)) {\n          store.totScore = storedTotScore;\n        }\n      }\n    }),\n    []\n  );\n\n  /**\n   * Track current running time\n   */\n  useEffect(() => {\n    const timerInterval = setInterval(() => {\n      setCurTime(prevTime => prevTime + 1);\n    }, 1000);\n\n    return () => clearInterval(timerInterval);\n  }, []);\n\n  useEffect(\n    () =>\n      action(() => {\n        store.curTimeSeconds = curTime;\n      }),\n    [curTime]\n  );\n\n  return (\n    <Container>\n      <div className=\"cur-time\">{curTime}</div>\n      {isFinite(store.bestTimeSeconds) && (\n        <div className=\"best-time\">best: {store.bestTimeSeconds}s</div>\n      )}\n      <div className=\"tot-score\">{store.totScore} cows found</div>\n    </Container>\n  );\n};\n\nexport default observer(ScoreTracker);\n","module.exports = __webpack_public_path__ + \"d80f8608e38f1a27adf76a82298bb80f.jpg\";","import { useState, useEffect } from 'preact/hooks';\n\nexport const useWindowSize = () => {\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [windowHeight, setWindowHeight] = useState(window.innerHeight);\n\n  useEffect(() => {\n    const onResize = () => {\n      setWindowWidth(window.innerWidth);\n      setWindowHeight(window.innerHeight);\n    };\n\n    window.addEventListener('resize', onResize);\n\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  return [windowWidth, windowHeight];\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { WiredBase, BaseCSS } from 'wired-lib/lib/wired-base';\nimport { rectangle, line, hachureFill } from 'wired-lib';\nimport { customElement, property, css, html } from 'lit-element';\nlet WiredCard = class WiredCard extends WiredBase {\n    constructor() {\n        super();\n        this.elevation = 1;\n        if (window.ResizeObserver) {\n            this.resizeObserver = new window.ResizeObserver(() => {\n                if (this.svg) {\n                    this.wiredRender();\n                }\n            });\n        }\n    }\n    static get styles() {\n        return [\n            BaseCSS,\n            css `\n        :host {\n          display: inline-block;\n          position: relative;\n          padding: 10px;\n        }\n        .cardFill path {\n          stroke-width: 3.5;\n          stroke: var(--wired-card-background-fill);\n        }\n        path {\n          stroke: var(--wired-card-background-fill, currentColor);\n        }\n      `\n        ];\n    }\n    render() {\n        return html `\n    <div id=\"overlay\"><svg></svg></div>\n    <div style=\"position: relative;\">\n      <slot @slotchange=\"${this.wiredRender}\"></slot>\n    </div>\n    `;\n    }\n    updated(changed) {\n        const force = changed.has('fill');\n        this.wiredRender(force);\n        this.attachResizeListener();\n    }\n    disconnectedCallback() {\n        this.detachResizeListener();\n    }\n    attachResizeListener() {\n        if (this.resizeObserver && this.resizeObserver.observe) {\n            this.resizeObserver.observe(this);\n        }\n        else if (!this.windowResizeHandler) {\n            this.windowResizeHandler = () => this.wiredRender();\n            window.addEventListener('resize', this.windowResizeHandler, { passive: true });\n        }\n    }\n    detachResizeListener() {\n        if (this.resizeObserver && this.resizeObserver.unobserve) {\n            this.resizeObserver.unobserve(this);\n        }\n        if (this.windowResizeHandler) {\n            window.removeEventListener('resize', this.windowResizeHandler);\n        }\n    }\n    canvasSize() {\n        const s = this.getBoundingClientRect();\n        const elev = Math.min(Math.max(1, this.elevation), 5);\n        const w = s.width + ((elev - 1) * 2);\n        const h = s.height + ((elev - 1) * 2);\n        return [w, h];\n    }\n    draw(svg, size) {\n        const elev = Math.min(Math.max(1, this.elevation), 5);\n        const s = {\n            width: size[0] - ((elev - 1) * 2),\n            height: size[1] - ((elev - 1) * 2)\n        };\n        if (this.fill && this.fill.trim()) {\n            const fillNode = hachureFill([\n                [2, 2],\n                [s.width - 4, 2],\n                [s.width - 2, s.height - 4],\n                [2, s.height - 4]\n            ]);\n            fillNode.classList.add('cardFill');\n            svg.style.setProperty('--wired-card-background-fill', this.fill.trim());\n            svg.appendChild(fillNode);\n        }\n        rectangle(svg, 2, 2, s.width - 4, s.height - 4);\n        for (let i = 1; i < elev; i++) {\n            (line(svg, (i * 2), s.height - 4 + (i * 2), s.width - 4 + (i * 2), s.height - 4 + (i * 2))).style.opacity = `${(85 - (i * 10)) / 100}`;\n            (line(svg, s.width - 4 + (i * 2), s.height - 4 + (i * 2), s.width - 4 + (i * 2), i * 2)).style.opacity = `${(85 - (i * 10)) / 100}`;\n            (line(svg, (i * 2), s.height - 4 + (i * 2), s.width - 4 + (i * 2), s.height - 4 + (i * 2))).style.opacity = `${(85 - (i * 10)) / 100}`;\n            (line(svg, s.width - 4 + (i * 2), s.height - 4 + (i * 2), s.width - 4 + (i * 2), i * 2)).style.opacity = `${(85 - (i * 10)) / 100}`;\n        }\n    }\n};\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Object)\n], WiredCard.prototype, \"elevation\", void 0);\n__decorate([\n    property({ type: String }),\n    __metadata(\"design:type\", String)\n], WiredCard.prototype, \"fill\", void 0);\nWiredCard = __decorate([\n    customElement('wired-card'),\n    __metadata(\"design:paramtypes\", [])\n], WiredCard);\nexport { WiredCard };\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { render, REACT_ELEMENT_TYPE } from './render';\n\nconst version = '16.8.0'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\trender as hydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tSuspense,\n\tSuspenseList,\n\tlazy\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate: render,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tunstable_batchedUpdates,\n\tSuspense,\n\tSuspenseList,\n\tlazy\n};\n","import { h } from 'preact';\nimport { setPragma } from 'goober';\n\nimport { AppStoreProvider } from 'store';\nimport Main from 'Main';\n\nsetPragma(h);\n\nconst App = () => (\n  <AppStoreProvider>\n    <Main />\n  </AppStoreProvider>\n);\n\nexport default App;\n","import Player from 'components/Player';\nimport Target from 'components/Target';\nimport ScoreTracker from 'components/ScoreTracker';\n\nconst Game = () => (\n  <>\n    <Player />\n    <Target />\n    <ScoreTracker />\n  </>\n);\n\nexport default Game;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { LitElement, query, css } from 'lit-element';\nexport const BaseCSS = css `\n:host {\n  opacity: 0;\n}\n:host(.wired-rendered) {\n  opacity: 1;\n}\n#overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n}\nsvg {\n  display: block;\n}\npath {\n  stroke: currentColor;\n  stroke-width: 0.7;\n  fill: transparent;\n}\n.hidden {\n  display: none !important;\n}\n`;\nexport class WiredBase extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.lastSize = [0, 0];\n    }\n    updated(_changed) {\n        this.wiredRender();\n    }\n    wiredRender(force = false) {\n        if (this.svg) {\n            const size = this.canvasSize();\n            if ((!force) && (size[0] === this.lastSize[0]) && (size[1] === this.lastSize[1])) {\n                return;\n            }\n            while (this.svg.hasChildNodes()) {\n                this.svg.removeChild(this.svg.lastChild);\n            }\n            this.svg.setAttribute('width', `${size[0]}`);\n            this.svg.setAttribute('height', `${size[1]}`);\n            this.draw(this.svg, size);\n            this.lastSize = size;\n            this.classList.add('wired-rendered');\n        }\n    }\n}\n__decorate([\n    query('svg'),\n    __metadata(\"design:type\", SVGSVGElement)\n], WiredBase.prototype, \"svg\", void 0);\n","import { styled } from 'goober';\n\nexport default styled('h1')`\n  margin-bottom: 20px;\n\n  color: lightblue;\n  text-align: center;\n`;\n","/** MobX - (c) Michel Weststrate 2015 - 2019 - MIT Licensed */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar OBFUSCATED_ERROR = \"An invariant failed, however the error is obfuscated because this is a production build.\";\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nvar EMPTY_OBJECT = {};\nObject.freeze(EMPTY_OBJECT);\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message) {\n    invariant(false, message);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message) {\n    if (!check)\n        throw new Error(\"[mobx] \" + (message || OBFUSCATED_ERROR));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg, thing) {\n    if (process.env.NODE_ENV === \"production\")\n        return false;\n    if (thing) {\n        return deprecated(\"'\" + msg + \"', use '\" + thing + \"' instead.\");\n    }\n    if (deprecatedMessages.indexOf(msg) !== -1)\n        return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked)\n            return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function () { };\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1)\n            res.push(item);\n    });\n    return res;\n}\nfunction isObject(value) {\n    return value !== null && typeof value === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || typeof value !== \"object\")\n        return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || (descriptor.configurable !== false && descriptor.writable !== false);\n}\nfunction assertPropertyConfigurable(object, prop) {\n    if (process.env.NODE_ENV !== \"production\" && !isPropertyConfigurable(object, prop))\n        fail(\"Cannot make property '\" + prop.toString() + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isES6Map(thing) {\n    return thing instanceof Map;\n}\nfunction isES6Set(thing) {\n    return thing instanceof Set;\n}\n/**\n * Returns the following: own keys, prototype keys & own symbol keys, if they are enumerable.\n */\nfunction getPlainObjectKeys(object) {\n    var enumerables = new Set();\n    for (var key in object)\n        enumerables.add(key); // *all* enumerables\n    Object.getOwnPropertySymbols(object).forEach(function (k) {\n        if (Object.getOwnPropertyDescriptor(object, k).enumerable)\n            enumerables.add(k);\n    }); // *own* symbols\n    // Note: this implementation is missing enumerable, inherited, symbolic property names! That would however pretty expensive to add,\n    // as there is no efficient iterator that returns *all* properties\n    return Array.from(enumerables);\n}\nfunction stringifyKey(key) {\n    if (key && key.toString)\n        return key.toString();\n    else\n        return new String(key).toString();\n}\nfunction getMapLikeKeys(map) {\n    if (isPlainObject(map))\n        return Object.keys(map);\n    if (Array.isArray(map))\n        return map.map(function (_a) {\n            var _b = __read(_a, 1), key = _b[0];\n            return key;\n        });\n    if (isES6Map(map) || isObservableMap(map))\n        return Array.from(map.keys());\n    return fail(\"Cannot get keys from '\" + map + \"'\");\n}\nfunction toPrimitive(value) {\n    return value === null ? null : typeof value === \"object\" ? \"\" + value : value;\n}\n\nvar $mobx = Symbol(\"mobx administration\");\nvar Atom = /** @class */ (function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name) {\n        if (name === void 0) { name = \"Atom@\" + getNextId(); }\n        this.name = name;\n        this.isPendingUnobservation = false; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.isBeingObserved = false;\n        this.observers = new Set();\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    Atom.prototype.onBecomeObserved = function () {\n        if (this.onBecomeObservedListeners) {\n            this.onBecomeObservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        if (this.onBecomeUnobservedListeners) {\n            this.onBecomeUnobservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     * Returns true if there is currently a reactive context.\n     */\n    Atom.prototype.reportObserved = function () {\n        return reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    Atom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    Atom.prototype.toString = function () {\n        return this.name;\n    };\n    return Atom;\n}());\nvar isAtom = createInstanceofPredicate(\"Atom\", Atom);\nfunction createAtom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n    if (onBecomeObservedHandler === void 0) { onBecomeObservedHandler = noop; }\n    if (onBecomeUnobservedHandler === void 0) { onBecomeUnobservedHandler = noop; }\n    var atom = new Atom(name);\n    // default `noop` listener will not initialize the hook Set\n    if (onBecomeObservedHandler !== noop) {\n        onBecomeObserved(atom, onBecomeObservedHandler);\n    }\n    if (onBecomeUnobservedHandler !== noop) {\n        onBecomeUnobserved(atom, onBecomeUnobservedHandler);\n    }\n    return atom;\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    return deepEqual(a, b);\n}\nfunction shallowComparer(a, b) {\n    return deepEqual(a, b, 1);\n}\nfunction defaultComparer(a, b) {\n    return Object.is(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer,\n    shallow: shallowComparer\n};\n\nvar mobxDidRunLazyInitializersSymbol = Symbol(\"mobx did run lazy initializers\");\nvar mobxPendingDecorators = Symbol(\"mobx pending decorators\");\nvar enumerableDescriptorCache = {};\nvar nonEnumerableDescriptorCache = {};\nfunction createPropertyInitializerDescriptor(prop, enumerable) {\n    var cache = enumerable ? enumerableDescriptorCache : nonEnumerableDescriptorCache;\n    return (cache[prop] ||\n        (cache[prop] = {\n            configurable: true,\n            enumerable: enumerable,\n            get: function () {\n                initializeInstance(this);\n                return this[prop];\n            },\n            set: function (value) {\n                initializeInstance(this);\n                this[prop] = value;\n            }\n        }));\n}\nfunction initializeInstance(target) {\n    var e_1, _a;\n    if (target[mobxDidRunLazyInitializersSymbol] === true)\n        return;\n    var decorators = target[mobxPendingDecorators];\n    if (decorators) {\n        addHiddenProp(target, mobxDidRunLazyInitializersSymbol, true);\n        // Build property key array from both strings and symbols\n        var keys = __spread(Object.getOwnPropertySymbols(decorators), Object.keys(decorators));\n        try {\n            for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                var key = keys_1_1.value;\n                var d = decorators[key];\n                d.propertyCreator(target, d.prop, d.descriptor, d.decoratorTarget, d.decoratorArguments);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n}\nfunction createPropDecorator(propertyInitiallyEnumerable, propertyCreator) {\n    return function decoratorFactory() {\n        var decoratorArguments;\n        var decorator = function decorate(target, prop, descriptor, applyImmediately\n        // This is a special parameter to signal the direct application of a decorator, allow extendObservable to skip the entire type decoration part,\n        // as the instance to apply the decorator to equals the target\n        ) {\n            if (applyImmediately === true) {\n                propertyCreator(target, prop, descriptor, target, decoratorArguments);\n                return null;\n            }\n            if (process.env.NODE_ENV !== \"production\" && !quacksLikeADecorator(arguments))\n                fail(\"This function is a decorator, but it wasn't invoked like a decorator\");\n            if (!Object.prototype.hasOwnProperty.call(target, mobxPendingDecorators)) {\n                var inheritedDecorators = target[mobxPendingDecorators];\n                addHiddenProp(target, mobxPendingDecorators, __assign({}, inheritedDecorators));\n            }\n            target[mobxPendingDecorators][prop] = {\n                prop: prop,\n                propertyCreator: propertyCreator,\n                descriptor: descriptor,\n                decoratorTarget: target,\n                decoratorArguments: decoratorArguments\n            };\n            return createPropertyInitializerDescriptor(prop, propertyInitiallyEnumerable);\n        };\n        if (quacksLikeADecorator(arguments)) {\n            // @decorator\n            decoratorArguments = EMPTY_ARRAY;\n            return decorator.apply(null, arguments);\n        }\n        else {\n            // @decorator(args)\n            decoratorArguments = Array.prototype.slice.call(arguments);\n            return decorator;\n        }\n    };\n}\nfunction quacksLikeADecorator(args) {\n    return (((args.length === 2 || args.length === 3) &&\n        (typeof args[1] === \"string\" || typeof args[1] === \"symbol\")) ||\n        (args.length === 4 && args[3] === true));\n}\n\nfunction deepEnhancer(v, _, name) {\n    // it is an observable already, done\n    if (isObservable(v))\n        return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v))\n        return observable.array(v, { name: name });\n    if (isPlainObject(v))\n        return observable.object(v, undefined, { name: name });\n    if (isES6Map(v))\n        return observable.map(v, { name: name });\n    if (isES6Set(v))\n        return observable.set(v, { name: name });\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (v === undefined || v === null)\n        return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v) || isObservableSet(v))\n        return v;\n    if (Array.isArray(v))\n        return observable.array(v, { name: name, deep: false });\n    if (isPlainObject(v))\n        return observable.object(v, undefined, { name: name, deep: false });\n    if (isES6Map(v))\n        return observable.map(v, { name: name, deep: false });\n    if (isES6Set(v))\n        return observable.set(v, { name: name, deep: false });\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (process.env.NODE_ENV !== \"production\" && isObservable(v))\n        throw \"observable.struct should not be used with observable values\";\n    if (deepEqual(v, oldValue))\n        return oldValue;\n    return v;\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(enhancer);\n    var decorator = createPropDecorator(true, function (target, propertyName, descriptor, _decoratorTarget, decoratorArgs) {\n        if (process.env.NODE_ENV !== \"production\") {\n            invariant(!descriptor || !descriptor.get, \"@observable cannot be used on getter (property \\\"\" + stringifyKey(propertyName) + \"\\\"), use @computed instead.\");\n        }\n        var initialValue = descriptor\n            ? descriptor.initializer\n                ? descriptor.initializer.call(target)\n                : descriptor.value\n            : undefined;\n        asObservableObject(target).addObservableProp(propertyName, initialValue, enhancer);\n    });\n    var res = \n    // Extra process checks, as this happens during module initialization\n    typeof process !== \"undefined\" && process.env && process.env.NODE_ENV !== \"production\"\n        ? function observableDecorator() {\n            // This wrapper function is just to detect illegal decorator invocations, deprecate in a next version\n            // and simply return the created prop decorator\n            if (arguments.length < 2)\n                return fail(\"Incorrect decorator invocation. @observable decorator doesn't expect any arguments\");\n            return decorator.apply(null, arguments);\n        }\n        : decorator;\n    res.enhancer = enhancer;\n    return res;\n}\n\n// Predefined bags of create observable options, to avoid allocating temporarily option objects\n// in the majority of cases\nvar defaultCreateObservableOptions = {\n    deep: true,\n    name: undefined,\n    defaultDecorator: undefined,\n    proxy: true\n};\nObject.freeze(defaultCreateObservableOptions);\nfunction assertValidOption(key) {\n    if (!/^(deep|name|equals|defaultDecorator|proxy)$/.test(key))\n        fail(\"invalid option for (extend)observable: \" + key);\n}\nfunction asCreateObservableOptions(thing) {\n    if (thing === null || thing === undefined)\n        return defaultCreateObservableOptions;\n    if (typeof thing === \"string\")\n        return { name: thing, deep: true, proxy: true };\n    if (process.env.NODE_ENV !== \"production\") {\n        if (typeof thing !== \"object\")\n            return fail(\"expected options object\");\n        Object.keys(thing).forEach(assertValidOption);\n    }\n    return thing;\n}\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\nfunction getEnhancerFromOptions(options) {\n    return options.defaultDecorator\n        ? options.defaultDecorator.enhancer\n        : options.deep === false\n            ? referenceEnhancer\n            : deepEnhancer;\n}\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v, arg2, arg3) {\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\" || typeof arguments[1] === \"symbol\") {\n        return deepDecorator.apply(null, arguments);\n    }\n    // it is an observable already, done\n    if (isObservable(v))\n        return v;\n    // something that can be converted and mutated?\n    var res = isPlainObject(v)\n        ? observable.object(v, arg2, arg3)\n        : Array.isArray(v)\n            ? observable.array(v, arg2)\n            : isES6Map(v)\n                ? observable.map(v, arg2)\n                : isES6Set(v)\n                    ? observable.set(v, arg2)\n                    : v;\n    // this value could be converted to a new observable data structure, return it\n    if (res !== v)\n        return res;\n    // otherwise, just box it\n    fail(process.env.NODE_ENV !== \"production\" &&\n        \"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'\");\n}\nvar observableFactories = {\n    box: function (value, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"box\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableValue(value, getEnhancerFromOptions(o), o.name, true, o.equals);\n    },\n    array: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"array\");\n        var o = asCreateObservableOptions(options);\n        return createObservableArray(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    map: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"map\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableMap(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    set: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"set\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableSet(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    object: function (props, decorators, options) {\n        if (typeof arguments[1] === \"string\")\n            incorrectlyUsedAsDecorator(\"object\");\n        var o = asCreateObservableOptions(options);\n        if (o.proxy === false) {\n            return extendObservable({}, props, decorators, o);\n        }\n        else {\n            var defaultDecorator = getDefaultDecoratorFromObjectOptions(o);\n            var base = extendObservable({}, undefined, undefined, o);\n            var proxy = createDynamicObservableObject(base);\n            extendObservableObjectWithProperties(proxy, props, decorators, defaultDecorator);\n            return proxy;\n        }\n    },\n    ref: refDecorator,\n    shallow: shallowDecorator,\n    deep: deepDecorator,\n    struct: refStructDecorator\n};\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\nObject.keys(observableFactories).forEach(function (name) { return (observable[name] = observableFactories[name]); });\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\n    // process.env.NODE_ENV !== \"production\" &&\n    \"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nvar computedDecorator = createPropDecorator(false, function (instance, propertyName, descriptor, decoratorTarget, decoratorArgs) {\n    var get = descriptor.get, set = descriptor.set; // initialValue is the descriptor for get / set props\n    // Optimization: faster on decorator target or instance? Assuming target\n    // Optimization: find out if declaring on instance isn't just faster. (also makes the property descriptor simpler). But, more memory usage..\n    // Forcing instance now, fixes hot reloadig issues on React Native:\n    var options = decoratorArgs[0] || {};\n    asObservableObject(instance).addComputedProp(instance, propertyName, __assign({ get: get,\n        set: set, context: instance }, options));\n});\nvar computedStructDecorator = computedDecorator({ equals: comparer.structural });\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        // @computed\n        return computedDecorator.apply(null, arguments);\n    }\n    if (arg1 !== null && typeof arg1 === \"object\" && arguments.length === 1) {\n        // @computed({ options })\n        return computedDecorator.apply(null, arguments);\n    }\n    // computed(expr, options?)\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof arg1 === \"function\", \"First argument to `computed` should be an expression.\");\n        invariant(arguments.length < 3, \"Computed takes one or two arguments if used as function\");\n    }\n    var opts = typeof arg2 === \"object\" ? arg2 : {};\n    opts.get = arg1;\n    opts.set = typeof arg2 === \"function\" ? arg2 : opts.set;\n    opts.name = opts.name || arg1.name || \"\"; /* for generated name */\n    return new ComputedValue(opts);\n};\ncomputed.struct = computedStructDecorator;\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // A shallow dependency has changed since last computation and the derivation\n    // will need to recompute when it's needed next.\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (IDerivationState = {}));\nvar TraceMode;\n(function (TraceMode) {\n    TraceMode[TraceMode[\"NONE\"] = 0] = \"NONE\";\n    TraceMode[TraceMode[\"LOG\"] = 1] = \"LOG\";\n    TraceMode[TraceMode[\"BREAK\"] = 2] = \"BREAK\";\n})(TraceMode || (TraceMode = {}));\nvar CaughtException = /** @class */ (function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}());\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE: {\n            // state propagation can occur outside of action/reactive context #2195\n            var prevAllowStateReads = allowStateReadsStart(true);\n            var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n            var obs = derivation.observing, l = obs.length;\n            for (var i = 0; i < l; i++) {\n                var obj = obs[i];\n                if (isComputedValue(obj)) {\n                    if (globalState.disableErrorBoundaries) {\n                        obj.get();\n                    }\n                    else {\n                        try {\n                            obj.get();\n                        }\n                        catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            allowStateReadsEnd(prevAllowStateReads);\n                            return true;\n                        }\n                    }\n                    // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                    // and `derivation` is an observer of `obj`\n                    // invariantShouldCompute(derivation)\n                    if (derivation.dependenciesState === IDerivationState.STALE) {\n                        untrackedEnd(prevUntracked);\n                        allowStateReadsEnd(prevAllowStateReads);\n                        return true;\n                    }\n                }\n            }\n            changeDependenciesStateTo0(derivation);\n            untrackedEnd(prevUntracked);\n            allowStateReadsEnd(prevAllowStateReads);\n            return false;\n        }\n    }\n}\n// function invariantShouldCompute(derivation: IDerivation) {\n//     const newDepState = (derivation as any).dependenciesState\n//     if (\n//         process.env.NODE_ENV === \"production\" &&\n//         (newDepState === IDerivationState.POSSIBLY_STALE ||\n//             newDepState === IDerivationState.NOT_TRACKING)\n//     )\n//         fail(\"Illegal dependency state\")\n// }\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers = atom.observers.size > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers)\n        fail(process.env.NODE_ENV !== \"production\" &&\n            \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \" + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && (hasObservers || globalState.enforceActions === \"strict\"))\n        fail(process.env.NODE_ENV !== \"production\" &&\n            (globalState.enforceActions\n                ? \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \"\n                : \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \") +\n                atom.name);\n}\nfunction checkIfStateReadsAreAllowed(observable) {\n    if (process.env.NODE_ENV !== \"production\" &&\n        !globalState.allowStateReads &&\n        globalState.observableRequiresReaction) {\n        console.warn(\"[mobx] Observable \" + observable.name + \" being read outside a reactive context\");\n    }\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    var prevAllowStateReads = allowStateReadsStart(true);\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    if (globalState.disableErrorBoundaries === true) {\n        result = f.call(context);\n    }\n    else {\n        try {\n            result = f.call(context);\n        }\n        catch (e) {\n            result = new CaughtException(e);\n        }\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    warnAboutDerivationWithoutDependencies(derivation);\n    allowStateReadsEnd(prevAllowStateReads);\n    return result;\n}\nfunction warnAboutDerivationWithoutDependencies(derivation) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    if (derivation.observing.length !== 0)\n        return;\n    if (globalState.reactionRequiresObservable || derivation.requiresObservable) {\n        console.warn(\"[mobx] Derivation \" + derivation.name + \" is created/updated without reading any observable value\");\n    }\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = (derivation.observing = derivation.newObserving);\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0, l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i)\n                observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking (statement moved down to work around FF bug, see #614)\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations may become stale during this derivation computation\n    // so they have had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--)\n        removeObserver(obs[i], derivation);\n    derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    try {\n        return action();\n    }\n    finally {\n        untrackedEnd(prev);\n    }\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\nfunction allowStateReadsStart(allowStateReads) {\n    var prev = globalState.allowStateReads;\n    globalState.allowStateReads = allowStateReads;\n    return prev;\n}\nfunction allowStateReadsEnd(prev) {\n    globalState.allowStateReads = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE)\n        return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--)\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n}\n\n// we don't use globalState for these in order to avoid possible issues with multiple\n// mobx versions\nvar currentActionId = 0;\nvar nextActionId = 1;\nfunction createAction(actionName, fn, ref) {\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof fn === \"function\", \"`action` can only be invoked on functions\");\n        if (typeof actionName !== \"string\" || !actionName)\n            fail(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n    var res = function () {\n        return executeAction(actionName, fn, ref || this, arguments);\n    };\n    res.isMobxAction = true;\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = _startAction(actionName, scope, args);\n    try {\n        return fn.apply(scope, args);\n    }\n    catch (err) {\n        runInfo.error = err;\n        throw err;\n    }\n    finally {\n        _endAction(runInfo);\n    }\n}\nfunction _startAction(actionName, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        startTime = Date.now();\n        var l = (args && args.length) || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0)\n            for (var i = 0; i < l; i++)\n                flattendArgs[i] = args[i];\n        spyReportStart({\n            type: \"action\",\n            name: actionName,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    var prevAllowStateReads = allowStateReadsStart(true);\n    var runInfo = {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        prevAllowStateReads: prevAllowStateReads,\n        notifySpy: notifySpy,\n        startTime: startTime,\n        actionId: nextActionId++,\n        parentActionId: currentActionId\n    };\n    currentActionId = runInfo.actionId;\n    return runInfo;\n}\nfunction _endAction(runInfo) {\n    if (currentActionId !== runInfo.actionId) {\n        fail(\"invalid action stack. did you forget to finish an action?\");\n    }\n    currentActionId = runInfo.parentActionId;\n    if (runInfo.error !== undefined) {\n        globalState.suppressReactionErrors = true;\n    }\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    allowStateReadsEnd(runInfo.prevAllowStateReads);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd({ time: Date.now() - runInfo.startTime });\n    }\n    globalState.suppressReactionErrors = false;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    }\n    finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\nfunction allowStateChangesInsideComputed(func) {\n    var prev = globalState.computationDepth;\n    globalState.computationDepth = 0;\n    var res;\n    try {\n        res = func();\n    }\n    finally {\n        globalState.computationDepth = prev;\n    }\n    return res;\n}\n\nvar ObservableValue = /** @class */ (function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy, equals) {\n        if (name === void 0) { name = \"ObservableValue@\" + getNextId(); }\n        if (notifySpy === void 0) { notifySpy = true; }\n        if (equals === void 0) { equals = comparer.default; }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.name = name;\n        _this.equals = equals;\n        _this.hasUnreportedChange = false;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled() && process.env.NODE_ENV !== \"production\") {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", name: _this.name, newValue: \"\" + _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined)\n            return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== globalState.UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy && process.env.NODE_ENV !== \"production\") {\n                spyReportStart({\n                    type: \"update\",\n                    name: this.name,\n                    newValue: newValue,\n                    oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this,\n                type: \"update\",\n                newValue: newValue\n            });\n            if (!change)\n                return globalState.UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.equals(this.value, newValue) ? globalState.UNCHANGED : newValue;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue,\n                oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately)\n            listener({\n                object: this,\n                type: \"update\",\n                newValue: this.value,\n                oldValue: undefined\n            });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    ObservableValue.prototype[Symbol.toPrimitive] = function () {\n        return this.valueOf();\n    };\n    return ObservableValue;\n}(Atom));\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember the result of the computation for the duration of the batch, or\n * while being observed.\n *\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = /** @class */ (function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce a new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(options) {\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isBeingObserved = false;\n        this.isPendingUnobservation = false;\n        this.observers = new Set();\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.isTracing = TraceMode.NONE;\n        if (process.env.NODE_ENV !== \"production\" && !options.get)\n            throw \"[mobx] missing option for computed: get\";\n        this.derivation = options.get;\n        this.name = options.name || \"ComputedValue@\" + getNextId();\n        if (options.set)\n            this.setter = createAction(this.name + \"-setter\", options.set);\n        this.equals =\n            options.equals ||\n                (options.compareStructural || options.struct\n                    ? comparer.structural\n                    : comparer.default);\n        this.scope = options.context;\n        this.requiresReaction = !!options.requiresReaction;\n        this.keepAlive = !!options.keepAlive;\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeObserved = function () {\n        if (this.onBecomeObservedListeners) {\n            this.onBecomeObservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        if (this.onBecomeUnobservedListeners) {\n            this.onBecomeUnobservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        if (this.isComputing)\n            fail(\"Cycle detected in computation \" + this.name + \": \" + this.derivation);\n        if (globalState.inBatch === 0 && this.observers.size === 0 && !this.keepAlive) {\n            if (shouldCompute(this)) {\n                this.warnAboutUntrackedRead();\n                startBatch(); // See perf test 'computed memoization'\n                this.value = this.computeValue(false);\n                endBatch();\n            }\n        }\n        else {\n            reportObserved(this);\n            if (shouldCompute(this))\n                if (this.trackAndCompute())\n                    propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result))\n            throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res))\n            throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            }\n            finally {\n                this.isRunningSetter = false;\n            }\n        }\n        else\n            invariant(false, process.env.NODE_ENV !== \"production\" &&\n                \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled() && process.env.NODE_ENV !== \"production\") {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                name: this.name\n            });\n        }\n        var oldValue = this.value;\n        var wasSuspended = \n        /* see #1208 */ this.dependenciesState === IDerivationState.NOT_TRACKING;\n        var newValue = this.computeValue(true);\n        var changed = wasSuspended ||\n            isCaughtException(oldValue) ||\n            isCaughtException(newValue) ||\n            !this.equals(oldValue, newValue);\n        if (changed) {\n            this.value = newValue;\n        }\n        return changed;\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        }\n        else {\n            if (globalState.disableErrorBoundaries === true) {\n                res = this.derivation.call(this.scope);\n            }\n            else {\n                try {\n                    res = this.derivation.call(this.scope);\n                }\n                catch (e) {\n                    res = new CaughtException(e);\n                }\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n    ComputedValue.prototype.suspend = function () {\n        if (!this.keepAlive) {\n            clearObserving(this);\n            this.value = undefined; // don't hold on to computed value!\n        }\n    };\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.warnAboutUntrackedRead = function () {\n        if (process.env.NODE_ENV === \"production\")\n            return;\n        if (this.requiresReaction === true) {\n            fail(\"[mobx] Computed value \" + this.name + \" is read outside a reactive context\");\n        }\n        if (this.isTracing !== TraceMode.NONE) {\n            console.log(\"[mobx.trace] '\" + this.name + \"' is being read outside a reactive context. Doing a full recompute\");\n        }\n        if (globalState.computedRequiresReaction) {\n            console.warn(\"[mobx] Computed value \" + this.name + \" is being read outside a reactive context. Doing a full recompute\");\n        }\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    ComputedValue.prototype[Symbol.toPrimitive] = function () {\n        return this.valueOf();\n    };\n    return ComputedValue;\n}());\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\n    \"mobxGuid\",\n    \"spyListeners\",\n    \"enforceActions\",\n    \"computedRequiresReaction\",\n    \"reactionRequiresObservable\",\n    \"observableRequiresReaction\",\n    \"allowStateReads\",\n    \"disableErrorBoundaries\",\n    \"runId\",\n    \"UNCHANGED\"\n];\nvar MobXGlobals = /** @class */ (function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         *\n         * N.B: this version is unrelated to the package version of MobX, and is only the version of the\n         * internal state storage of MobX, and can be the same across many different package versions\n         */\n        this.version = 5;\n        /**\n         * globally unique token to signal unchanged\n         */\n        this.UNCHANGED = {};\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * Is it allowed to read observables at this point?\n         * Used to hold the state needed for `observableRequiresReaction`\n         */\n        this.allowStateReads = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.enforceActions = false;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n        /**\n         * Warn if computed values are accessed outside a reactive context\n         */\n        this.computedRequiresReaction = false;\n        /**\n         * (Experimental)\n         * Warn if you try to create to derivation / reactive context without accessing any observable.\n         */\n        this.reactionRequiresObservable = false;\n        /**\n         * (Experimental)\n         * Warn if observables are accessed outside a reactive context\n         */\n        this.observableRequiresReaction = false;\n        /**\n         * Allows overwriting of computed properties, useful in tests but not prod as it can cause\n         * memory leaks. See https://github.com/mobxjs/mobx/issues/1867\n         */\n        this.computedConfigurable = false;\n        /*\n         * Don't catch and rethrow exceptions. This is useful for inspecting the state of\n         * the stack when an exception occurs while debugging.\n         */\n        this.disableErrorBoundaries = false;\n        /*\n         * If true, we are already handling an exception in an action. Any errors in reactions should be suppressed, as\n         * they are not the cause, see: https://github.com/mobxjs/mobx/issues/1836\n         */\n        this.suppressReactionErrors = false;\n    }\n    return MobXGlobals;\n}());\nvar mockGlobal = {};\nfunction getGlobal() {\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    return mockGlobal;\n}\nvar canMergeGlobalState = true;\nvar isolateCalled = false;\nvar globalState = (function () {\n    var global = getGlobal();\n    if (global.__mobxInstanceCount > 0 && !global.__mobxGlobals)\n        canMergeGlobalState = false;\n    if (global.__mobxGlobals && global.__mobxGlobals.version !== new MobXGlobals().version)\n        canMergeGlobalState = false;\n    if (!canMergeGlobalState) {\n        setTimeout(function () {\n            if (!isolateCalled) {\n                fail(\"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\");\n            }\n        }, 1);\n        return new MobXGlobals();\n    }\n    else if (global.__mobxGlobals) {\n        global.__mobxInstanceCount += 1;\n        if (!global.__mobxGlobals.UNCHANGED)\n            global.__mobxGlobals.UNCHANGED = {}; // make merge backward compatible\n        return global.__mobxGlobals;\n    }\n    else {\n        global.__mobxInstanceCount = 1;\n        return (global.__mobxGlobals = new MobXGlobals());\n    }\n})();\nfunction isolateGlobalState() {\n    if (globalState.pendingReactions.length ||\n        globalState.inBatch ||\n        globalState.isRunningReactions)\n        fail(\"isolateGlobalState should be called before MobX is running any reactions\");\n    isolateCalled = true;\n    if (canMergeGlobalState) {\n        if (--getGlobal().__mobxInstanceCount === 0)\n            getGlobal().__mobxGlobals = undefined;\n        globalState = new MobXGlobals();\n    }\n}\nfunction getGlobalState() {\n    return globalState;\n}\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals)\n        if (persistentKeys.indexOf(key) === -1)\n            globalState[key] = defaultGlobals[key];\n    globalState.allowStateChanges = !globalState.enforceActions;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.size > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\n// function invariantObservers(observable: IObservable) {\n//     const list = observable.observers\n//     const map = observable.observersIndexes\n//     const l = list.length\n//     for (let i = 0; i < l; i++) {\n//         const id = list[i].__mapid\n//         if (i) {\n//             invariant(map[id] === i, \"INTERNAL ERROR maps derivation.__mapid to index in list\") // for performance\n//         } else {\n//             invariant(!(id in map), \"INTERNAL ERROR observer on index 0 shouldn't be held in map.\") // for performance\n//         }\n//     }\n//     invariant(\n//         list.length === 0 || Object.keys(map).length === list.length - 1,\n//         \"INTERNAL ERROR there is no junk in map\"\n//     )\n// }\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    observable.observers.add(node);\n    if (observable.lowestObserverState > node.dependenciesState)\n        observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didn't add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    observable.observers.delete(node);\n    if (observable.observers.size === 0) {\n        // deleting last observer\n        queueForUnobservation(observable);\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (observable.isPendingUnobservation === false) {\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, should only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.size === 0) {\n                if (observable.isBeingObserved) {\n                    // if this observable had reactive observers, trigger the hooks\n                    observable.isBeingObserved = false;\n                    observable.onBecomeUnobserved();\n                }\n                if (observable instanceof ComputedValue) {\n                    // computed values are automatically teared down when the last observer leaves\n                    // this process happens recursively, this computed might be the last observabe of another, etc..\n                    observable.suspend();\n                }\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    checkIfStateReadsAreAllowed(observable);\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            // Tried storing newObserving, or observing, or both as Set, but performance didn't come close...\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n            if (!observable.isBeingObserved) {\n                observable.isBeingObserved = true;\n                observable.onBecomeObserved();\n            }\n        }\n        return true;\n    }\n    else if (observable.observers.size === 0 && globalState.inBatch > 0) {\n        queueForUnobservation(observable);\n    }\n    return false;\n}\n// function invariantLOS(observable: IObservable, msg: string) {\n//     // it's expensive so better not run it in produciton. but temporarily helpful for testing\n//     const min = getObservers(observable).reduce((a, b) => Math.min(a, b.dependenciesState), 2)\n//     if (min >= observable.lowestObserverState) return // <- the only assumption about `lowestObserverState`\n//     throw new Error(\n//         \"lowestObserverState is wrong for \" +\n//             msg +\n//             \" because \" +\n//             min +\n//             \" < \" +\n//             observable.lowestObserverState\n//     )\n// }\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE)\n        return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    // Ideally we use for..of here, but the downcompiled version is really slow...\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            if (d.isTracing !== TraceMode.NONE) {\n                logTraceInfo(d, observable);\n            }\n            d.onBecomeStale();\n        }\n        d.dependenciesState = IDerivationState.STALE;\n    });\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE)\n        return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE)\n            d.dependenciesState = IDerivationState.STALE;\n        else if (d.dependenciesState === IDerivationState.UP_TO_DATE // this happens during computing of `d`, just keep lowestObserverState up to date.\n        )\n            observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    });\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE)\n        return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            if (d.isTracing !== TraceMode.NONE) {\n                logTraceInfo(d, observable);\n            }\n            d.onBecomeStale();\n        }\n    });\n    // invariantLOS(observable, \"maybe end\");\n}\nfunction logTraceInfo(derivation, observable) {\n    console.log(\"[mobx.trace] '\" + derivation.name + \"' is invalidated due to a change in: '\" + observable.name + \"'\");\n    if (derivation.isTracing === TraceMode.BREAK) {\n        var lines = [];\n        printDepTree(getDependencyTree(derivation), lines, 1);\n        // prettier-ignore\n        new Function(\"debugger;\\n/*\\nTracing '\" + derivation.name + \"'\\n\\nYou are entering this break point because derivation '\" + derivation.name + \"' is being traced and '\" + observable.name + \"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\" + (derivation instanceof ComputedValue ? derivation.derivation.toString().replace(/[*]\\//g, \"/\") : \"\") + \"\\n\\nThe dependencies for this derivation are:\\n\\n\" + lines.join(\"\\n\") + \"\\n*/\\n    \")();\n    }\n}\nfunction printDepTree(tree, lines, depth) {\n    if (lines.length >= 1000) {\n        lines.push(\"(and many more)\");\n        return;\n    }\n    lines.push(\"\" + new Array(depth).join(\"\\t\") + tree.name); // MWE: not the fastest, but the easiest way :)\n    if (tree.dependencies)\n        tree.dependencies.forEach(function (child) { return printDepTree(child, lines, depth + 1); });\n}\n\nvar Reaction = /** @class */ (function () {\n    function Reaction(name, onInvalidate, errorHandler, requiresObservable) {\n        if (name === void 0) { name = \"Reaction@\" + getNextId(); }\n        if (requiresObservable === void 0) { requiresObservable = false; }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.errorHandler = errorHandler;\n        this.requiresObservable = requiresObservable;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n        this.isTracing = TraceMode.NONE;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                try {\n                    this.onInvalidate();\n                    if (this._isTrackPending &&\n                        isSpyEnabled() &&\n                        process.env.NODE_ENV !== \"production\") {\n                        // onInvalidate didn't trigger track right away..\n                        spyReport({\n                            name: this.name,\n                            type: \"scheduled-reaction\"\n                        });\n                    }\n                }\n                catch (e) {\n                    this.reportExceptionInDerivation(e);\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        if (this.isDisposed) {\n            return;\n            // console.warn(\"Reaction already disposed\") // Note: Not a warning / error in mobx 4 either\n        }\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify && process.env.NODE_ENV !== \"production\") {\n            startTime = Date.now();\n            spyReportStart({\n                name: this.name,\n                type: \"reaction\"\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result))\n            this.reportExceptionInDerivation(result.cause);\n        if (notify && process.env.NODE_ENV !== \"production\") {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        if (globalState.disableErrorBoundaries)\n            throw error;\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this + \"'\";\n        if (globalState.suppressReactionErrors) {\n            console.warn(\"[mobx] (error in reaction '\" + this.name + \"' suppressed, fix error of causing action below)\"); // prettier-ignore\n        }\n        else {\n            console.error(message, error);\n            /** If debugging brought you here, please, read the above message :-). Tnx! */\n        }\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                name: this.name,\n                message: message,\n                error: \"\" + error\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) { return f(error, _this); });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                // if disposed while running, clean up later. Maybe not optimal, but rare case\n                startBatch();\n                clearObserving(this);\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r[$mobx] = this;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.trace = function (enterBreakPoint) {\n        if (enterBreakPoint === void 0) { enterBreakPoint = false; }\n        trace(this, enterBreakPoint);\n    };\n    return Reaction;\n}());\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0)\n            globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function (f) { return f(); };\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions)\n        return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" +\n                (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++)\n            remainingReactions[i].runReaction();\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function (f) { return fn(function () { return baseScheduler(f); }); };\n}\n\nfunction isSpyEnabled() {\n    return process.env.NODE_ENV !== \"production\" && !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (process.env.NODE_ENV === \"production\")\n        return; // dead code elimination can do the rest\n    if (!globalState.spyListeners.length)\n        return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++)\n        listeners[i](event);\n}\nfunction spyReportStart(event) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    var change = __assign(__assign({}, event), { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    if (change)\n        spyReport(__assign(__assign({}, change), { spyReportEnd: true }));\n    else\n        spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    if (process.env.NODE_ENV === \"production\") {\n        console.warn(\"[mobx.spy] Is a no-op in production builds\");\n        return function () { };\n    }\n    else {\n        globalState.spyListeners.push(listener);\n        return once(function () {\n            globalState.spyListeners = globalState.spyListeners.filter(function (l) { return l !== listener; });\n        });\n    }\n}\n\nfunction dontReassignFields() {\n    fail(process.env.NODE_ENV !== \"production\" && \"@action fields are not reassignable\");\n}\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor) {\n            if (process.env.NODE_ENV !== \"production\" && descriptor.get !== undefined) {\n                return fail(\"@action cannot be used with getters\");\n            }\n            // babel / typescript\n            // @action method() { }\n            if (descriptor.value) {\n                // typescript\n                return {\n                    value: createAction(name, descriptor.value),\n                    enumerable: false,\n                    configurable: true,\n                    writable: true // for typescript, this must be writable, otherwise it cannot inherit :/ (see inheritable actions test)\n                };\n            }\n            // babel only: @action method = () => {}\n            var initializer_1 = descriptor.initializer;\n            return {\n                enumerable: false,\n                configurable: true,\n                writable: true,\n                initializer: function () {\n                    // N.B: we can't immediately invoke initializer; this would be wrong\n                    return createAction(name, initializer_1.call(this));\n                }\n            };\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction actionFieldDecorator(name) {\n    // Simple property that writes on first invocation to the current instance\n    return function (target, prop, descriptor) {\n        Object.defineProperty(target, prop, {\n            configurable: true,\n            enumerable: false,\n            get: function () {\n                return undefined;\n            },\n            set: function (value) {\n                addHiddenProp(this, prop, action(name, value));\n            }\n        });\n    };\n}\nfunction boundActionDecorator(target, propertyName, descriptor, applyToInstance) {\n    if (applyToInstance === true) {\n        defineBoundAction(target, propertyName, descriptor.value);\n        return null;\n    }\n    if (descriptor) {\n        // if (descriptor.value)\n        // Typescript / Babel: @action.bound method() { }\n        // also: babel @action.bound method = () => {}\n        return {\n            configurable: true,\n            enumerable: false,\n            get: function () {\n                defineBoundAction(this, propertyName, descriptor.value || descriptor.initializer.call(this));\n                return this[propertyName];\n            },\n            set: dontReassignFields\n        };\n    }\n    // field decorator Typescript @action.bound method = () => {}\n    return {\n        enumerable: false,\n        configurable: true,\n        set: function (v) {\n            defineBoundAction(this, propertyName, v);\n        },\n        get: function () {\n            return undefined;\n        }\n    };\n}\n\nvar action = function action(arg1, arg2, arg3, arg4) {\n    // action(fn() {})\n    if (arguments.length === 1 && typeof arg1 === \"function\")\n        return createAction(arg1.name || \"<unnamed action>\", arg1);\n    // action(\"name\", fn() {})\n    if (arguments.length === 2 && typeof arg2 === \"function\")\n        return createAction(arg1, arg2);\n    // @action(\"name\") fn() {}\n    if (arguments.length === 1 && typeof arg1 === \"string\")\n        return namedActionDecorator(arg1);\n    // @action fn() {}\n    if (arg4 === true) {\n        // apply to instance immediately\n        addHiddenProp(arg1, arg2, createAction(arg1.name || arg2, arg3.value, this));\n    }\n    else {\n        return namedActionDecorator(arg2).apply(null, arguments);\n    }\n};\naction.bound = boundActionDecorator;\nfunction runInAction(arg1, arg2) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof fn === \"function\" && fn.length === 0, \"`runInAction` expects a function without arguments\");\n        if (typeof actionName !== \"string\" || !actionName)\n            fail(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n    return executeAction(actionName, fn, this, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    addHiddenProp(target, propertyName, createAction(propertyName, fn.bind(target)));\n}\n\n/**\n * Creates a named reactive view and keeps it alive, so that the view is always\n * updated if one of the dependencies changes, even when the view is not further used by something else.\n * @param view The reactive view\n * @returns disposer function, which can be used to stop the view from being updated in the future.\n */\nfunction autorun(view, opts) {\n    if (opts === void 0) { opts = EMPTY_OBJECT; }\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof view === \"function\", \"Autorun expects a function as first argument\");\n        invariant(isAction(view) === false, \"Autorun does not accept actions since actions are untrackable\");\n    }\n    var name = (opts && opts.name) || view.name || \"Autorun@\" + getNextId();\n    var runSync = !opts.scheduler && !opts.delay;\n    var reaction;\n    if (runSync) {\n        // normal autorun\n        reaction = new Reaction(name, function () {\n            this.track(reactionRunner);\n        }, opts.onError, opts.requiresObservable);\n    }\n    else {\n        var scheduler_1 = createSchedulerFromOptions(opts);\n        // debounced autorun\n        var isScheduled_1 = false;\n        reaction = new Reaction(name, function () {\n            if (!isScheduled_1) {\n                isScheduled_1 = true;\n                scheduler_1(function () {\n                    isScheduled_1 = false;\n                    if (!reaction.isDisposed)\n                        reaction.track(reactionRunner);\n                });\n            }\n        }, opts.onError, opts.requiresObservable);\n    }\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nvar run = function (f) { return f(); };\nfunction createSchedulerFromOptions(opts) {\n    return opts.scheduler\n        ? opts.scheduler\n        : opts.delay\n            ? function (f) { return setTimeout(f, opts.delay); }\n            : run;\n}\nfunction reaction(expression, effect, opts) {\n    if (opts === void 0) { opts = EMPTY_OBJECT; }\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof expression === \"function\", \"First argument to reaction should be a function\");\n        invariant(typeof opts === \"object\", \"Third argument of reactions should be an object\");\n    }\n    var name = opts.name || \"Reaction@\" + getNextId();\n    var effectAction = action(name, opts.onError ? wrapErrorHandler(opts.onError, effect) : effect);\n    var runSync = !opts.scheduler && !opts.delay;\n    var scheduler = createSchedulerFromOptions(opts);\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.compareStructural\n        ? comparer.structural\n        : opts.equals || comparer.default;\n    var r = new Reaction(name, function () {\n        if (firstTime || runSync) {\n            reactionRunner();\n        }\n        else if (!isScheduled) {\n            isScheduled = true;\n            scheduler(reactionRunner);\n        }\n    }, opts.onError, opts.requiresObservable);\n    function reactionRunner() {\n        isScheduled = false; // Q: move into reaction runner?\n        if (r.isDisposed)\n            return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately)\n            effectAction(value, r);\n        if (!firstTime && changed === true)\n            effectAction(value, r);\n        if (firstTime)\n            firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction wrapErrorHandler(errorHandler, baseFn) {\n    return function () {\n        try {\n            return baseFn.apply(this, arguments);\n        }\n        catch (e) {\n            errorHandler.call(this, e);\n        }\n    };\n}\n\nfunction onBecomeObserved(thing, arg2, arg3) {\n    return interceptHook(\"onBecomeObserved\", thing, arg2, arg3);\n}\nfunction onBecomeUnobserved(thing, arg2, arg3) {\n    return interceptHook(\"onBecomeUnobserved\", thing, arg2, arg3);\n}\nfunction interceptHook(hook, thing, arg2, arg3) {\n    var atom = typeof arg3 === \"function\" ? getAtom(thing, arg2) : getAtom(thing);\n    var cb = typeof arg3 === \"function\" ? arg3 : arg2;\n    var listenersKey = hook + \"Listeners\";\n    if (atom[listenersKey]) {\n        atom[listenersKey].add(cb);\n    }\n    else {\n        atom[listenersKey] = new Set([cb]);\n    }\n    var orig = atom[hook];\n    if (typeof orig !== \"function\")\n        return fail(process.env.NODE_ENV !== \"production\" && \"Not an atom that can be (un)observed\");\n    return function () {\n        var hookListeners = atom[listenersKey];\n        if (hookListeners) {\n            hookListeners.delete(cb);\n            if (hookListeners.size === 0) {\n                delete atom[listenersKey];\n            }\n        }\n    };\n}\n\nfunction configure(options) {\n    var enforceActions = options.enforceActions, computedRequiresReaction = options.computedRequiresReaction, computedConfigurable = options.computedConfigurable, disableErrorBoundaries = options.disableErrorBoundaries, reactionScheduler = options.reactionScheduler, reactionRequiresObservable = options.reactionRequiresObservable, observableRequiresReaction = options.observableRequiresReaction;\n    if (options.isolateGlobalState === true) {\n        isolateGlobalState();\n    }\n    if (enforceActions !== undefined) {\n        if (typeof enforceActions === \"boolean\" || enforceActions === \"strict\")\n            deprecated(\"Deprecated value for 'enforceActions', use 'false' => '\\\"never\\\"', 'true' => '\\\"observed\\\"', '\\\"strict\\\"' => \\\"'always'\\\" instead\");\n        var ea = void 0;\n        switch (enforceActions) {\n            case true:\n            case \"observed\":\n                ea = true;\n                break;\n            case false:\n            case \"never\":\n                ea = false;\n                break;\n            case \"strict\":\n            case \"always\":\n                ea = \"strict\";\n                break;\n            default:\n                fail(\"Invalid value for 'enforceActions': '\" + enforceActions + \"', expected 'never', 'always' or 'observed'\");\n        }\n        globalState.enforceActions = ea;\n        globalState.allowStateChanges = ea === true || ea === \"strict\" ? false : true;\n    }\n    if (computedRequiresReaction !== undefined) {\n        globalState.computedRequiresReaction = !!computedRequiresReaction;\n    }\n    if (reactionRequiresObservable !== undefined) {\n        globalState.reactionRequiresObservable = !!reactionRequiresObservable;\n    }\n    if (observableRequiresReaction !== undefined) {\n        globalState.observableRequiresReaction = !!observableRequiresReaction;\n        globalState.allowStateReads = !globalState.observableRequiresReaction;\n    }\n    if (computedConfigurable !== undefined) {\n        globalState.computedConfigurable = !!computedConfigurable;\n    }\n    if (disableErrorBoundaries !== undefined) {\n        if (disableErrorBoundaries === true)\n            console.warn(\"WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled.\");\n        globalState.disableErrorBoundaries = !!disableErrorBoundaries;\n    }\n    if (reactionScheduler) {\n        setReactionScheduler(reactionScheduler);\n    }\n}\n\nfunction decorate(thing, decorators) {\n    process.env.NODE_ENV !== \"production\" &&\n        invariant(isPlainObject(decorators), \"Decorators should be a key value map\");\n    var target = typeof thing === \"function\" ? thing.prototype : thing;\n    var _loop_1 = function (prop) {\n        var propertyDecorators = decorators[prop];\n        if (!Array.isArray(propertyDecorators)) {\n            propertyDecorators = [propertyDecorators];\n        }\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(propertyDecorators.every(function (decorator) { return typeof decorator === \"function\"; }), \"Decorate: expected a decorator function or array of decorator functions for '\" + prop + \"'\");\n        var descriptor = Object.getOwnPropertyDescriptor(target, prop);\n        var newDescriptor = propertyDecorators.reduce(function (accDescriptor, decorator) { return decorator(target, prop, accDescriptor); }, descriptor);\n        if (newDescriptor)\n            Object.defineProperty(target, prop, newDescriptor);\n    };\n    for (var prop in decorators) {\n        _loop_1(prop);\n    }\n    return thing;\n}\n\nfunction extendObservable(target, properties, decorators, options) {\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(arguments.length >= 2 && arguments.length <= 4, \"'extendObservable' expected 2-4 arguments\");\n        invariant(typeof target === \"object\", \"'extendObservable' expects an object as first argument\");\n        invariant(!isObservableMap(target), \"'extendObservable' should not be used on maps, use map.merge instead\");\n    }\n    options = asCreateObservableOptions(options);\n    var defaultDecorator = getDefaultDecoratorFromObjectOptions(options);\n    initializeInstance(target); // Fixes #1740\n    asObservableObject(target, options.name, defaultDecorator.enhancer); // make sure object is observable, even without initial props\n    if (properties)\n        extendObservableObjectWithProperties(target, properties, decorators, defaultDecorator);\n    return target;\n}\nfunction getDefaultDecoratorFromObjectOptions(options) {\n    return options.defaultDecorator || (options.deep === false ? refDecorator : deepDecorator);\n}\nfunction extendObservableObjectWithProperties(target, properties, decorators, defaultDecorator) {\n    var e_1, _a, e_2, _b;\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(!isObservable(properties), \"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\");\n        if (decorators) {\n            var keys = getPlainObjectKeys(decorators);\n            try {\n                for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                    var key = keys_1_1.value;\n                    if (!(key in properties))\n                        fail(\"Trying to declare a decorator for unspecified property '\" + stringifyKey(key) + \"'\");\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    }\n    startBatch();\n    try {\n        var keys = getPlainObjectKeys(properties);\n        try {\n            for (var keys_2 = __values(keys), keys_2_1 = keys_2.next(); !keys_2_1.done; keys_2_1 = keys_2.next()) {\n                var key = keys_2_1.value;\n                var descriptor = Object.getOwnPropertyDescriptor(properties, key);\n                if (process.env.NODE_ENV !== \"production\") {\n                    if (!isPlainObject(properties))\n                        fail(\"'extendObservabe' only accepts plain objects as second argument\");\n                    if (Object.getOwnPropertyDescriptor(target, key))\n                        fail(\"'extendObservable' can only be used to introduce new properties. Use 'set' or 'decorate' instead. The property '\" + stringifyKey(key) + \"' already exists on '\" + target + \"'\");\n                    if (isComputed(descriptor.value))\n                        fail(\"Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead\");\n                }\n                var decorator = decorators && key in decorators\n                    ? decorators[key]\n                    : descriptor.get\n                        ? computedDecorator\n                        : defaultDecorator;\n                if (process.env.NODE_ENV !== \"production\" && typeof decorator !== \"function\")\n                    fail(\"Not a valid decorator for '\" + stringifyKey(key) + \"', got: \" + decorator);\n                var resultDescriptor = decorator(target, key, descriptor, true);\n                if (resultDescriptor // otherwise, assume already applied, due to `applyToInstance`\n                )\n                    Object.defineProperty(target, key, resultDescriptor);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (keys_2_1 && !keys_2_1.done && (_b = keys_2.return)) _b.call(keys_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    finally {\n        endBatch();\n    }\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0)\n        result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node))\n        result.observers = Array.from(getObservers(node)).map(nodeToObserverTree);\n    return result;\n}\n\nvar generatorId = 0;\nfunction FlowCancellationError() {\n    this.message = \"FLOW_CANCELLED\";\n}\nFlowCancellationError.prototype = Object.create(Error.prototype);\nfunction isFlowCancellationError(error) {\n    return error instanceof FlowCancellationError;\n}\nfunction flow(generator) {\n    if (arguments.length !== 1)\n        fail(!!process.env.NODE_ENV && \"Flow expects 1 argument and cannot be used as decorator\");\n    var name = generator.name || \"<unnamed flow>\";\n    // Implementation based on https://github.com/tj/co/blob/master/index.js\n    return function () {\n        var ctx = this;\n        var args = arguments;\n        var runId = ++generatorId;\n        var gen = action(name + \" - runid: \" + runId + \" - init\", generator).apply(ctx, args);\n        var rejector;\n        var pendingPromise = undefined;\n        var promise = new Promise(function (resolve, reject) {\n            var stepId = 0;\n            rejector = reject;\n            function onFulfilled(res) {\n                pendingPromise = undefined;\n                var ret;\n                try {\n                    ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.next).call(gen, res);\n                }\n                catch (e) {\n                    return reject(e);\n                }\n                next(ret);\n            }\n            function onRejected(err) {\n                pendingPromise = undefined;\n                var ret;\n                try {\n                    ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.throw).call(gen, err);\n                }\n                catch (e) {\n                    return reject(e);\n                }\n                next(ret);\n            }\n            function next(ret) {\n                if (ret && typeof ret.then === \"function\") {\n                    // an async iterator\n                    ret.then(next, reject);\n                    return;\n                }\n                if (ret.done)\n                    return resolve(ret.value);\n                pendingPromise = Promise.resolve(ret.value);\n                return pendingPromise.then(onFulfilled, onRejected);\n            }\n            onFulfilled(undefined); // kick off the process\n        });\n        promise.cancel = action(name + \" - runid: \" + runId + \" - cancel\", function () {\n            try {\n                if (pendingPromise)\n                    cancelPromise(pendingPromise);\n                // Finally block can return (or yield) stuff..\n                var res = gen.return(undefined);\n                // eat anything that promise would do, it's cancelled!\n                var yieldedPromise = Promise.resolve(res.value);\n                yieldedPromise.then(noop, noop);\n                cancelPromise(yieldedPromise); // maybe it can be cancelled :)\n                // reject our original promise\n                rejector(new FlowCancellationError());\n            }\n            catch (e) {\n                rejector(e); // there could be a throwing finally block\n            }\n        });\n        return promise;\n    };\n}\nfunction cancelPromise(promise) {\n    if (typeof promise.cancel === \"function\")\n        promise.cancel();\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    }\n    else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\")\n            return fail(process.env.NODE_ENV !== \"production\" &&\n                \"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined)\n        return fail(process.env.NODE_ENV !== \"production\" && \"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\")\n        return interceptProperty(thing, propOrHandler, handler);\n    else\n        return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\nfunction _isComputed(value, property) {\n    if (value === null || value === undefined)\n        return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false)\n            return false;\n        if (!value[$mobx].values.has(property))\n            return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\nfunction isComputed(value) {\n    if (arguments.length > 1)\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n    return _isComputed(value);\n}\nfunction isComputedProp(value, propName) {\n    if (typeof propName !== \"string\")\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"isComputed expected a property name as second argument\");\n    return _isComputed(value, propName);\n}\n\nfunction _isObservable(value, property) {\n    if (value === null || value === undefined)\n        return false;\n    if (property !== undefined) {\n        if (process.env.NODE_ENV !== \"production\" &&\n            (isObservableMap(value) || isObservableArray(value)))\n            return fail(\"isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\");\n        if (isObservableObject(value)) {\n            return value[$mobx].values.has(property);\n        }\n        return false;\n    }\n    // For first check, see #701\n    return (isObservableObject(value) ||\n        !!value[$mobx] ||\n        isAtom(value) ||\n        isReaction(value) ||\n        isComputedValue(value));\n}\nfunction isObservable(value) {\n    if (arguments.length !== 1)\n        fail(process.env.NODE_ENV !== \"production\" &&\n            \"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n    return _isObservable(value);\n}\nfunction isObservableProp(value, propName) {\n    if (typeof propName !== \"string\")\n        return fail(process.env.NODE_ENV !== \"production\" && \"expected a property name as second argument\");\n    return _isObservable(value, propName);\n}\n\nfunction keys(obj) {\n    if (isObservableObject(obj)) {\n        return obj[$mobx].getKeys();\n    }\n    if (isObservableMap(obj)) {\n        return Array.from(obj.keys());\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.keys());\n    }\n    if (isObservableArray(obj)) {\n        return obj.map(function (_, index) { return index; });\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'keys()' can only be used on observable objects, arrays, sets and maps\");\n}\nfunction values(obj) {\n    if (isObservableObject(obj)) {\n        return keys(obj).map(function (key) { return obj[key]; });\n    }\n    if (isObservableMap(obj)) {\n        return keys(obj).map(function (key) { return obj.get(key); });\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.values());\n    }\n    if (isObservableArray(obj)) {\n        return obj.slice();\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'values()' can only be used on observable objects, arrays, sets and maps\");\n}\nfunction entries(obj) {\n    if (isObservableObject(obj)) {\n        return keys(obj).map(function (key) { return [key, obj[key]]; });\n    }\n    if (isObservableMap(obj)) {\n        return keys(obj).map(function (key) { return [key, obj.get(key)]; });\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.entries());\n    }\n    if (isObservableArray(obj)) {\n        return obj.map(function (key, index) { return [index, key]; });\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'entries()' can only be used on observable objects, arrays and maps\");\n}\nfunction set(obj, key, value) {\n    if (arguments.length === 2 && !isObservableSet(obj)) {\n        startBatch();\n        var values_1 = key;\n        try {\n            for (var key_1 in values_1)\n                set(obj, key_1, values_1[key_1]);\n        }\n        finally {\n            endBatch();\n        }\n        return;\n    }\n    if (isObservableObject(obj)) {\n        var adm = obj[$mobx];\n        var existingObservable = adm.values.get(key);\n        if (existingObservable) {\n            adm.write(key, value);\n        }\n        else {\n            adm.addObservableProp(key, value, adm.defaultEnhancer);\n        }\n    }\n    else if (isObservableMap(obj)) {\n        obj.set(key, value);\n    }\n    else if (isObservableSet(obj)) {\n        obj.add(key);\n    }\n    else if (isObservableArray(obj)) {\n        if (typeof key !== \"number\")\n            key = parseInt(key, 10);\n        invariant(key >= 0, \"Not a valid index: '\" + key + \"'\");\n        startBatch();\n        if (key >= obj.length)\n            obj.length = key + 1;\n        obj[key] = value;\n        endBatch();\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'set()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction remove(obj, key) {\n    if (isObservableObject(obj)) {\n        obj[$mobx].remove(key);\n    }\n    else if (isObservableMap(obj)) {\n        obj.delete(key);\n    }\n    else if (isObservableSet(obj)) {\n        obj.delete(key);\n    }\n    else if (isObservableArray(obj)) {\n        if (typeof key !== \"number\")\n            key = parseInt(key, 10);\n        invariant(key >= 0, \"Not a valid index: '\" + key + \"'\");\n        obj.splice(key, 1);\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'remove()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction has(obj, key) {\n    if (isObservableObject(obj)) {\n        // return keys(obj).indexOf(key) >= 0\n        var adm = getAdministration(obj);\n        return adm.has(key);\n    }\n    else if (isObservableMap(obj)) {\n        return obj.has(key);\n    }\n    else if (isObservableSet(obj)) {\n        return obj.has(key);\n    }\n    else if (isObservableArray(obj)) {\n        return key >= 0 && key < obj.length;\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'has()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction get(obj, key) {\n    if (!has(obj, key))\n        return undefined;\n    if (isObservableObject(obj)) {\n        return obj[key];\n    }\n    else if (isObservableMap(obj)) {\n        return obj.get(key);\n    }\n    else if (isObservableArray(obj)) {\n        return obj[key];\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'get()' can only be used on observable objects, arrays and maps\");\n    }\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\")\n        return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);\n    else\n        return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nvar defaultOptions = {\n    detectCycles: true,\n    exportMapsAsObjects: true,\n    recurseEverything: false\n};\nfunction cache(map, key, value, options) {\n    if (options.detectCycles)\n        map.set(key, value);\n    return value;\n}\nfunction toJSHelper(source, options, __alreadySeen) {\n    if (!options.recurseEverything && !isObservable(source))\n        return source;\n    if (typeof source !== \"object\")\n        return source;\n    // Directly return null if source is null\n    if (source === null)\n        return null;\n    // Directly return the Date object itself if contained in the observable\n    if (source instanceof Date)\n        return source;\n    if (isObservableValue(source))\n        return toJSHelper(source.get(), options, __alreadySeen);\n    // make sure we track the keys of the object\n    if (isObservable(source))\n        keys(source);\n    var detectCycles = options.detectCycles === true;\n    if (detectCycles && source !== null && __alreadySeen.has(source)) {\n        return __alreadySeen.get(source);\n    }\n    if (isObservableArray(source) || Array.isArray(source)) {\n        var res_1 = cache(__alreadySeen, source, [], options);\n        var toAdd = source.map(function (value) { return toJSHelper(value, options, __alreadySeen); });\n        res_1.length = toAdd.length;\n        for (var i = 0, l = toAdd.length; i < l; i++)\n            res_1[i] = toAdd[i];\n        return res_1;\n    }\n    if (isObservableSet(source) || Object.getPrototypeOf(source) === Set.prototype) {\n        if (options.exportMapsAsObjects === false) {\n            var res_2 = cache(__alreadySeen, source, new Set(), options);\n            source.forEach(function (value) {\n                res_2.add(toJSHelper(value, options, __alreadySeen));\n            });\n            return res_2;\n        }\n        else {\n            var res_3 = cache(__alreadySeen, source, [], options);\n            source.forEach(function (value) {\n                res_3.push(toJSHelper(value, options, __alreadySeen));\n            });\n            return res_3;\n        }\n    }\n    if (isObservableMap(source) || Object.getPrototypeOf(source) === Map.prototype) {\n        if (options.exportMapsAsObjects === false) {\n            var res_4 = cache(__alreadySeen, source, new Map(), options);\n            source.forEach(function (value, key) {\n                res_4.set(key, toJSHelper(value, options, __alreadySeen));\n            });\n            return res_4;\n        }\n        else {\n            var res_5 = cache(__alreadySeen, source, {}, options);\n            source.forEach(function (value, key) {\n                res_5[key] = toJSHelper(value, options, __alreadySeen);\n            });\n            return res_5;\n        }\n    }\n    // Fallback to the situation that source is an ObservableObject or a plain object\n    var res = cache(__alreadySeen, source, {}, options);\n    getPlainObjectKeys(source).forEach(function (key) {\n        res[key] = toJSHelper(source[key], options, __alreadySeen);\n    });\n    return res;\n}\nfunction toJS(source, options) {\n    // backward compatibility\n    if (typeof options === \"boolean\")\n        options = { detectCycles: options };\n    if (!options)\n        options = defaultOptions;\n    options.detectCycles =\n        options.detectCycles === undefined\n            ? options.recurseEverything === true\n            : options.detectCycles === true;\n    var __alreadySeen;\n    if (options.detectCycles)\n        __alreadySeen = new Map();\n    return toJSHelper(source, options, __alreadySeen);\n}\n\nfunction trace() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var enterBreakPoint = false;\n    if (typeof args[args.length - 1] === \"boolean\")\n        enterBreakPoint = args.pop();\n    var derivation = getAtomFromArgs(args);\n    if (!derivation) {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly\");\n    }\n    if (derivation.isTracing === TraceMode.NONE) {\n        console.log(\"[mobx.trace] '\" + derivation.name + \"' tracing enabled\");\n    }\n    derivation.isTracing = enterBreakPoint ? TraceMode.BREAK : TraceMode.LOG;\n}\nfunction getAtomFromArgs(args) {\n    switch (args.length) {\n        case 0:\n            return globalState.trackingDerivation;\n        case 1:\n            return getAtom(args[0]);\n        case 2:\n            return getAtom(args[0], args[1]);\n    }\n}\n\n/**\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) { thisArg = undefined; }\n    startBatch();\n    try {\n        return action.apply(thisArg);\n    }\n    finally {\n        endBatch();\n    }\n}\n\nfunction when(predicate, arg1, arg2) {\n    if (arguments.length === 1 || (arg1 && typeof arg1 === \"object\"))\n        return whenPromise(predicate, arg1);\n    return _when(predicate, arg1, arg2 || {});\n}\nfunction _when(predicate, effect, opts) {\n    var timeoutHandle;\n    if (typeof opts.timeout === \"number\") {\n        timeoutHandle = setTimeout(function () {\n            if (!disposer[$mobx].isDisposed) {\n                disposer();\n                var error = new Error(\"WHEN_TIMEOUT\");\n                if (opts.onError)\n                    opts.onError(error);\n                else\n                    throw error;\n            }\n        }, opts.timeout);\n    }\n    opts.name = opts.name || \"When@\" + getNextId();\n    var effectAction = createAction(opts.name + \"-effect\", effect);\n    var disposer = autorun(function (r) {\n        if (predicate()) {\n            r.dispose();\n            if (timeoutHandle)\n                clearTimeout(timeoutHandle);\n            effectAction();\n        }\n    }, opts);\n    return disposer;\n}\nfunction whenPromise(predicate, opts) {\n    if (process.env.NODE_ENV !== \"production\" && opts && opts.onError)\n        return fail(\"the options 'onError' and 'promise' cannot be combined\");\n    var cancel;\n    var res = new Promise(function (resolve, reject) {\n        var disposer = _when(predicate, resolve, __assign(__assign({}, opts), { onError: reject }));\n        cancel = function () {\n            disposer();\n            reject(\"WHEN_CANCELLED\");\n        };\n    });\n    res.cancel = cancel;\n    return res;\n}\n\nfunction getAdm(target) {\n    return target[$mobx];\n}\nfunction isPropertyKey(val) {\n    return typeof val === \"string\" || typeof val === \"number\" || typeof val === \"symbol\";\n}\n// Optimization: we don't need the intermediate objects and could have a completely custom administration for DynamicObjects,\n// and skip either the internal values map, or the base object with its property descriptors!\nvar objectProxyTraps = {\n    has: function (target, name) {\n        if (name === $mobx || name === \"constructor\" || name === mobxDidRunLazyInitializersSymbol)\n            return true;\n        var adm = getAdm(target);\n        // MWE: should `in` operator be reactive? If not, below code path will be faster / more memory efficient\n        // TODO: check performance stats!\n        // if (adm.values.get(name as string)) return true\n        if (isPropertyKey(name))\n            return adm.has(name);\n        return name in target;\n    },\n    get: function (target, name) {\n        if (name === $mobx || name === \"constructor\" || name === mobxDidRunLazyInitializersSymbol)\n            return target[name];\n        var adm = getAdm(target);\n        var observable = adm.values.get(name);\n        if (observable instanceof Atom) {\n            var result = observable.get();\n            if (result === undefined) {\n                // This fixes #1796, because deleting a prop that has an\n                // undefined value won't retrigger a observer (no visible effect),\n                // the autorun wouldn't subscribe to future key changes (see also next comment)\n                adm.has(name);\n            }\n            return result;\n        }\n        // make sure we start listening to future keys\n        // note that we only do this here for optimization\n        if (isPropertyKey(name))\n            adm.has(name);\n        return target[name];\n    },\n    set: function (target, name, value) {\n        if (!isPropertyKey(name))\n            return false;\n        set(target, name, value);\n        return true;\n    },\n    deleteProperty: function (target, name) {\n        if (!isPropertyKey(name))\n            return false;\n        var adm = getAdm(target);\n        adm.remove(name);\n        return true;\n    },\n    ownKeys: function (target) {\n        var adm = getAdm(target);\n        adm.keysAtom.reportObserved();\n        return Reflect.ownKeys(target);\n    },\n    preventExtensions: function (target) {\n        fail(\"Dynamic observable objects cannot be frozen\");\n        return false;\n    }\n};\nfunction createDynamicObservableObject(base) {\n    var proxy = new Proxy(base, objectProxyTraps);\n    base[$mobx].proxy = proxy;\n    return proxy;\n}\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors !== undefined && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1)\n            interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        // Interceptor can modify the array, copy it to avoid concurrent modification, see #1950\n        var interceptors = __spread((interceptable.interceptors || []));\n        for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change)\n                break;\n        }\n        return change;\n    }\n    finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners !== undefined && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1)\n            listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\nvar arrayTraps = {\n    get: function (target, name) {\n        if (name === $mobx)\n            return target[$mobx];\n        if (name === \"length\")\n            return target[$mobx].getArrayLength();\n        if (typeof name === \"number\") {\n            return arrayExtensions.get.call(target, name);\n        }\n        if (typeof name === \"string\" && !isNaN(name)) {\n            return arrayExtensions.get.call(target, parseInt(name));\n        }\n        if (arrayExtensions.hasOwnProperty(name)) {\n            return arrayExtensions[name];\n        }\n        return target[name];\n    },\n    set: function (target, name, value) {\n        if (name === \"length\") {\n            target[$mobx].setArrayLength(value);\n        }\n        if (typeof name === \"number\") {\n            arrayExtensions.set.call(target, name, value);\n        }\n        if (typeof name === \"symbol\" || isNaN(name)) {\n            target[name] = value;\n        }\n        else {\n            // numeric string\n            arrayExtensions.set.call(target, parseInt(name), value);\n        }\n        return true;\n    },\n    preventExtensions: function (target) {\n        fail(\"Observable arrays cannot be frozen\");\n        return false;\n    }\n};\nfunction createObservableArray(initialValues, enhancer, name, owned) {\n    if (name === void 0) { name = \"ObservableArray@\" + getNextId(); }\n    if (owned === void 0) { owned = false; }\n    var adm = new ObservableArrayAdministration(name, enhancer, owned);\n    addHiddenFinalProp(adm.values, $mobx, adm);\n    var proxy = new Proxy(adm.values, arrayTraps);\n    adm.proxy = proxy;\n    if (initialValues && initialValues.length) {\n        var prev = allowStateChangesStart(true);\n        adm.spliceWithArray(0, 0, initialValues);\n        allowStateChangesEnd(prev);\n    }\n    return proxy;\n}\nvar ObservableArrayAdministration = /** @class */ (function () {\n    function ObservableArrayAdministration(name, enhancer, owned) {\n        this.owned = owned;\n        this.values = [];\n        this.proxy = undefined;\n        this.lastKnownLength = 0;\n        this.atom = new Atom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) { return enhancer(newV, oldV, name + \"[..]\"); };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined)\n            return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined && values.length > 0)\n            return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) { fireImmediately = false; }\n        if (fireImmediately) {\n            listener({\n                object: this.proxy,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0)\n            throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength)\n            return;\n        else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++)\n                newItems[i] = undefined; // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        }\n        else\n            this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength)\n            throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed.\");\n        this.lastKnownLength += delta;\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined)\n            index = 0;\n        else if (index > length)\n            index = length;\n        else if (index < 0)\n            index = Math.max(0, length + index);\n        if (arguments.length === 1)\n            deleteCount = length - index;\n        else if (deleteCount === undefined || deleteCount === null)\n            deleteCount = 0;\n        else\n            deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined)\n            newItems = EMPTY_ARRAY;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change)\n                return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.length === 0 ? newItems : newItems.map(function (v) { return _this.enhancer(v, undefined); });\n        if (process.env.NODE_ENV !== \"production\") {\n            var lengthDelta = newItems.length - deleteCount;\n            this.updateArrayLength(length, lengthDelta); // checks if internal array wasn't modified\n        }\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0)\n            this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        var _a;\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, __spread([index, deleteCount], newItems));\n        }\n        else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values\n                .slice(0, index)\n                .concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                object: this.proxy,\n                type: \"update\",\n                index: index,\n                newValue: newValue,\n                oldValue: oldValue\n            }\n            : null;\n        // The reason why this is on right hand side here (and not above), is this way the uglifier will drop it, but it won't\n        // cause any runtime overhead in development mode without NODE_ENV set, unless spying is enabled\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.atom.name }));\n        this.atom.reportChanged();\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                object: this.proxy,\n                type: \"splice\",\n                index: index,\n                removed: removed,\n                added: added,\n                removedCount: removed.length,\n                addedCount: added.length\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.atom.name }));\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}());\nvar arrayExtensions = {\n    intercept: function (handler) {\n        return this[$mobx].intercept(handler);\n    },\n    observe: function (listener, fireImmediately) {\n        if (fireImmediately === void 0) { fireImmediately = false; }\n        var adm = this[$mobx];\n        return adm.observe(listener, fireImmediately);\n    },\n    clear: function () {\n        return this.splice(0);\n    },\n    replace: function (newItems) {\n        var adm = this[$mobx];\n        return adm.spliceWithArray(0, adm.values.length, newItems);\n    },\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    toJS: function () {\n        return this.slice();\n    },\n    toJSON: function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    },\n    /*\n     * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n     * since these functions alter the inner structure of the array, the have side effects.\n     * Because the have side effects, they should not be used in computed function,\n     * and for that reason the do not call dependencyState.notifyObserved\n     */\n    splice: function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return adm.spliceWithArray(index);\n            case 2:\n                return adm.spliceWithArray(index, deleteCount);\n        }\n        return adm.spliceWithArray(index, deleteCount, newItems);\n    },\n    spliceWithArray: function (index, deleteCount, newItems) {\n        var adm = this[$mobx];\n        return adm.spliceWithArray(index, deleteCount, newItems);\n    },\n    push: function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    },\n    pop: function () {\n        return this.splice(Math.max(this[$mobx].values.length - 1, 0), 1)[0];\n    },\n    shift: function () {\n        return this.splice(0, 1)[0];\n    },\n    unshift: function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    },\n    reverse: function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        if (process.env.NODE_ENV !== \"production\") {\n            console.warn(\"[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place\");\n        }\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    },\n    sort: function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        if (process.env.NODE_ENV !== \"production\") {\n            console.warn(\"[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place\");\n        }\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    },\n    remove: function (value) {\n        var adm = this[$mobx];\n        var idx = adm.dehanceValues(adm.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    },\n    get: function (index) {\n        var adm = this[$mobx];\n        if (adm) {\n            if (index < adm.values.length) {\n                adm.atom.reportObserved();\n                return adm.dehanceValue(adm.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + adm.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    },\n    set: function (index, newValue) {\n        var adm = this[$mobx];\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: adm.proxy,\n                    index: index,\n                    newValue: newValue\n                });\n                if (!change)\n                    return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        }\n        else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        }\n        else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    }\n};\n[\n    \"concat\",\n    \"every\",\n    \"filter\",\n    \"forEach\",\n    \"indexOf\",\n    \"join\",\n    \"lastIndexOf\",\n    \"map\",\n    \"reduce\",\n    \"reduceRight\",\n    \"slice\",\n    \"some\",\n    \"toString\",\n    \"toLocaleString\"\n].forEach(function (funcName) {\n    arrayExtensions[funcName] = function () {\n        var adm = this[$mobx];\n        adm.atom.reportObserved();\n        var res = adm.dehanceValues(adm.values);\n        return res[funcName].apply(res, arguments);\n    };\n});\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing[$mobx]);\n}\n\nvar _a;\nvar ObservableMapMarker = {};\n// just extend Map? See also https://gist.github.com/nestharus/13b4d74f2ef4a2f4357dbd3fc23c1e54\n// But: https://github.com/mobxjs/mobx/issues/1556\nvar ObservableMap = /** @class */ (function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) { enhancer = deepEnhancer; }\n        if (name === void 0) { name = \"ObservableMap@\" + getNextId(); }\n        this.enhancer = enhancer;\n        this.name = name;\n        this[_a] = ObservableMapMarker;\n        this._keysAtom = createAtom(this.name + \".keys()\");\n        this[Symbol.toStringTag] = \"Map\";\n        if (typeof Map !== \"function\") {\n            throw new Error(\"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\");\n        }\n        this._data = new Map();\n        this._hasMap = new Map();\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return this._data.has(key);\n    };\n    ObservableMap.prototype.has = function (key) {\n        var _this = this;\n        if (!globalState.trackingDerivation)\n            return this._has(key);\n        var entry = this._hasMap.get(key);\n        if (!entry) {\n            // todo: replace with atom (breaking change)\n            var newEntry = (entry = new ObservableValue(this._has(key), referenceEnhancer, this.name + \".\" + stringifyKey(key) + \"?\", false));\n            this._hasMap.set(key, newEntry);\n            onBecomeUnobserved(newEntry, function () { return _this._hasMap.delete(key); });\n        }\n        return entry.get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change)\n                return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        }\n        else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change)\n                return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"delete\",\n                    object: this,\n                    oldValue: this._data.get(key).value,\n                    name: key\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            transaction(function () {\n                _this._keysAtom.reportChanged();\n                _this._updateHasMapEntry(key, false);\n                var observable = _this._data.get(key);\n                observable.setNewValue(undefined);\n                _this._data.delete(key);\n            });\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        var entry = this._hasMap.get(key);\n        if (entry) {\n            entry.setNewValue(value);\n        }\n    };\n    ObservableMap.prototype._updateValue = function (key, newValue) {\n        var observable = this._data.get(key);\n        newValue = observable.prepareNewValue(newValue);\n        if (newValue !== globalState.UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"update\",\n                    object: this,\n                    oldValue: observable.value,\n                    name: key,\n                    newValue: newValue\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            observable.setNewValue(newValue);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (key, newValue) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this._keysAtom);\n        transaction(function () {\n            var observable = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + stringifyKey(key), false);\n            _this._data.set(key, observable);\n            newValue = observable.value; // value might have been changed\n            _this._updateHasMapEntry(key, true);\n            _this._keysAtom.reportChanged();\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                type: \"add\",\n                object: this,\n                name: key,\n                newValue: newValue\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        if (this.has(key))\n            return this.dehanceValue(this._data.get(key).get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        this._keysAtom.reportObserved();\n        return this._data.keys();\n    };\n    ObservableMap.prototype.values = function () {\n        var self = this;\n        var nextIndex = 0;\n        var keys = Array.from(this.keys());\n        return makeIterable({\n            next: function () {\n                return nextIndex < keys.length\n                    ? { value: self.get(keys[nextIndex++]), done: false }\n                    : { done: true };\n            }\n        });\n    };\n    ObservableMap.prototype.entries = function () {\n        var self = this;\n        var nextIndex = 0;\n        var keys = Array.from(this.keys());\n        return makeIterable({\n            next: function () {\n                if (nextIndex < keys.length) {\n                    var key = keys[nextIndex++];\n                    return {\n                        value: [key, self.get(key)],\n                        done: false\n                    };\n                }\n                return { done: true };\n            }\n        });\n    };\n    ObservableMap.prototype[(_a = $mobx, Symbol.iterator)] = function () {\n        return this.entries();\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var e_1, _b;\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = __read(_d.value, 2), key = _e[0], value = _e[1];\n                callback.call(thisArg, value, key, this);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        transaction(function () {\n            if (isPlainObject(other))\n                getPlainObjectKeys(other).forEach(function (key) { return _this.set(key, other[key]); });\n            else if (Array.isArray(other))\n                other.forEach(function (_b) {\n                    var _c = __read(_b, 2), key = _c[0], value = _c[1];\n                    return _this.set(key, value);\n                });\n            else if (isES6Map(other)) {\n                if (other.constructor !== Map)\n                    fail(\"Cannot initialize from classes that inherit from Map: \" + other.constructor.name); // prettier-ignore\n                other.forEach(function (value, key) { return _this.set(key, value); });\n            }\n            else if (other !== null && other !== undefined)\n                fail(\"Cannot initialize map from \" + other);\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        transaction(function () {\n            untracked(function () {\n                var e_2, _b;\n                try {\n                    for (var _c = __values(_this.keys()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var key = _d.value;\n                        _this.delete(key);\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        transaction(function () {\n            // grab all the keys that are present in the new map but not present in the current map\n            // and delete them from the map, then merge the new map\n            // this will cause reactions only on changed values\n            var newKeys = getMapLikeKeys(values);\n            var oldKeys = Array.from(_this.keys());\n            var missingKeys = oldKeys.filter(function (k) { return newKeys.indexOf(k) === -1; });\n            missingKeys.forEach(function (k) { return _this.delete(k); });\n            _this.merge(values);\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function () {\n            this._keysAtom.reportObserved();\n            return this._data.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a plain object that represents this map.\n     * Note that all the keys being stringified.\n     * If there are duplicating keys after converting them to strings, behaviour is undetermined.\n     */\n    ObservableMap.prototype.toPOJO = function () {\n        var e_3, _b;\n        var res = {};\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = __read(_d.value, 2), key = _e[0], value = _e[1];\n                // We lie about symbol key types due to https://github.com/Microsoft/TypeScript/issues/1863\n                res[typeof key === \"symbol\" ? key : stringifyKey(key)] = value;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return res;\n    };\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        return new Map(this);\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toPOJO();\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return (this.name +\n            \"[{ \" +\n            Array.from(this.keys())\n                .map(function (key) { return stringifyKey(key) + \": \" + (\"\" + _this.get(key)); })\n                .join(\", \") +\n            \" }]\");\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support fireImmediately=true in combination with maps.\");\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}());\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar _a$1;\nvar ObservableSetMarker = {};\nvar ObservableSet = /** @class */ (function () {\n    function ObservableSet(initialData, enhancer, name) {\n        if (enhancer === void 0) { enhancer = deepEnhancer; }\n        if (name === void 0) { name = \"ObservableSet@\" + getNextId(); }\n        this.name = name;\n        this[_a$1] = ObservableSetMarker;\n        this._data = new Set();\n        this._atom = createAtom(this.name);\n        this[Symbol.toStringTag] = \"Set\";\n        if (typeof Set !== \"function\") {\n            throw new Error(\"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\");\n        }\n        this.enhancer = function (newV, oldV) { return enhancer(newV, oldV, name); };\n        if (initialData) {\n            this.replace(initialData);\n        }\n    }\n    ObservableSet.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableSet.prototype.clear = function () {\n        var _this = this;\n        transaction(function () {\n            untracked(function () {\n                var e_1, _b;\n                try {\n                    for (var _c = __values(_this._data.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var value = _d.value;\n                        _this.delete(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            });\n        });\n    };\n    ObservableSet.prototype.forEach = function (callbackFn, thisArg) {\n        var e_2, _b;\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var value = _d.value;\n                callbackFn.call(thisArg, value, value, this);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Object.defineProperty(ObservableSet.prototype, \"size\", {\n        get: function () {\n            this._atom.reportObserved();\n            return this._data.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ObservableSet.prototype.add = function (value) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this._atom);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"add\",\n                object: this,\n                newValue: value\n            });\n            if (!change)\n                return this;\n            // TODO: ideally, value = change.value would be done here, so that values can be\n            // changed by interceptor. Same applies for other Set and Map api's.\n        }\n        if (!this.has(value)) {\n            transaction(function () {\n                _this._data.add(_this.enhancer(value, undefined));\n                _this._atom.reportChanged();\n            });\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"add\",\n                    object: this,\n                    newValue: value\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(change);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n        return this;\n    };\n    ObservableSet.prototype.delete = function (value) {\n        var _this = this;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                oldValue: value\n            });\n            if (!change)\n                return false;\n        }\n        if (this.has(value)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"delete\",\n                    object: this,\n                    oldValue: value\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name }));\n            transaction(function () {\n                _this._atom.reportChanged();\n                _this._data.delete(value);\n            });\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableSet.prototype.has = function (value) {\n        this._atom.reportObserved();\n        return this._data.has(this.dehanceValue(value));\n    };\n    ObservableSet.prototype.entries = function () {\n        var nextIndex = 0;\n        var keys = Array.from(this.keys());\n        var values = Array.from(this.values());\n        return makeIterable({\n            next: function () {\n                var index = nextIndex;\n                nextIndex += 1;\n                return index < values.length\n                    ? { value: [keys[index], values[index]], done: false }\n                    : { done: true };\n            }\n        });\n    };\n    ObservableSet.prototype.keys = function () {\n        return this.values();\n    };\n    ObservableSet.prototype.values = function () {\n        this._atom.reportObserved();\n        var self = this;\n        var nextIndex = 0;\n        var observableValues = Array.from(this._data.values());\n        return makeIterable({\n            next: function () {\n                return nextIndex < observableValues.length\n                    ? { value: self.dehanceValue(observableValues[nextIndex++]), done: false }\n                    : { done: true };\n            }\n        });\n    };\n    ObservableSet.prototype.replace = function (other) {\n        var _this = this;\n        if (isObservableSet(other)) {\n            other = other.toJS();\n        }\n        transaction(function () {\n            if (Array.isArray(other)) {\n                _this.clear();\n                other.forEach(function (value) { return _this.add(value); });\n            }\n            else if (isES6Set(other)) {\n                _this.clear();\n                other.forEach(function (value) { return _this.add(value); });\n            }\n            else if (other !== null && other !== undefined) {\n                fail(\"Cannot initialize set from \" + other);\n            }\n        });\n        return this;\n    };\n    ObservableSet.prototype.observe = function (listener, fireImmediately) {\n        // TODO 'fireImmediately' can be true?\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support fireImmediately=true in combination with sets.\");\n        return registerListener(this, listener);\n    };\n    ObservableSet.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableSet.prototype.toJS = function () {\n        return new Set(this);\n    };\n    ObservableSet.prototype.toString = function () {\n        return this.name + \"[ \" + Array.from(this).join(\", \") + \" ]\";\n    };\n    ObservableSet.prototype[(_a$1 = $mobx, Symbol.iterator)] = function () {\n        return this.values();\n    };\n    return ObservableSet;\n}());\nvar isObservableSet = createInstanceofPredicate(\"ObservableSet\", ObservableSet);\n\nvar ObservableObjectAdministration = /** @class */ (function () {\n    function ObservableObjectAdministration(target, values, name, defaultEnhancer) {\n        if (values === void 0) { values = new Map(); }\n        this.target = target;\n        this.values = values;\n        this.name = name;\n        this.defaultEnhancer = defaultEnhancer;\n        this.keysAtom = new Atom(name + \".keys\");\n    }\n    ObservableObjectAdministration.prototype.read = function (key) {\n        return this.values.get(key).get();\n    };\n    ObservableObjectAdministration.prototype.write = function (key, newValue) {\n        var instance = this.target;\n        var observable = this.values.get(key);\n        if (observable instanceof ComputedValue) {\n            observable.set(newValue);\n            return;\n        }\n        // intercept\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"update\",\n                object: this.proxy || instance,\n                name: key,\n                newValue: newValue\n            });\n            if (!change)\n                return;\n            newValue = change.newValue;\n        }\n        newValue = observable.prepareNewValue(newValue);\n        // notify spy & observers\n        if (newValue !== globalState.UNCHANGED) {\n            var notify = hasListeners(this);\n            var notifySpy = isSpyEnabled();\n            var change = notify || notifySpy\n                ? {\n                    type: \"update\",\n                    object: this.proxy || instance,\n                    oldValue: observable.value,\n                    name: key,\n                    newValue: newValue\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            observable.setNewValue(newValue);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableObjectAdministration.prototype.has = function (key) {\n        var map = this.pendingKeys || (this.pendingKeys = new Map());\n        var entry = map.get(key);\n        if (entry)\n            return entry.get();\n        else {\n            var exists = !!this.values.get(key);\n            // Possible optimization: Don't have a separate map for non existing keys,\n            // but store them in the values map instead, using a special symbol to denote \"not existing\"\n            entry = new ObservableValue(exists, referenceEnhancer, this.name + \".\" + stringifyKey(key) + \"?\", false);\n            map.set(key, entry);\n            return entry.get(); // read to subscribe\n        }\n    };\n    ObservableObjectAdministration.prototype.addObservableProp = function (propName, newValue, enhancer) {\n        if (enhancer === void 0) { enhancer = this.defaultEnhancer; }\n        var target = this.target;\n        assertPropertyConfigurable(target, propName);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy || target,\n                name: propName,\n                type: \"add\",\n                newValue: newValue\n            });\n            if (!change)\n                return;\n            newValue = change.newValue;\n        }\n        var observable = new ObservableValue(newValue, enhancer, this.name + \".\" + stringifyKey(propName), false);\n        this.values.set(propName, observable);\n        newValue = observable.value; // observableValue might have changed it\n        Object.defineProperty(target, propName, generateObservablePropConfig(propName));\n        this.notifyPropertyAddition(propName, newValue);\n    };\n    ObservableObjectAdministration.prototype.addComputedProp = function (propertyOwner, // where is the property declared?\n    propName, options) {\n        var target = this.target;\n        options.name = options.name || this.name + \".\" + stringifyKey(propName);\n        this.values.set(propName, new ComputedValue(options));\n        if (propertyOwner === target || isPropertyConfigurable(propertyOwner, propName))\n            Object.defineProperty(propertyOwner, propName, generateComputedPropConfig(propName));\n    };\n    ObservableObjectAdministration.prototype.remove = function (key) {\n        if (!this.values.has(key))\n            return;\n        var target = this.target;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy || target,\n                name: key,\n                type: \"remove\"\n            });\n            if (!change)\n                return;\n        }\n        try {\n            startBatch();\n            var notify = hasListeners(this);\n            var notifySpy = isSpyEnabled();\n            var oldObservable = this.values.get(key);\n            var oldValue = oldObservable && oldObservable.get();\n            oldObservable && oldObservable.set(undefined);\n            // notify key and keyset listeners\n            this.keysAtom.reportChanged();\n            this.values.delete(key);\n            if (this.pendingKeys) {\n                var entry = this.pendingKeys.get(key);\n                if (entry)\n                    entry.set(false);\n            }\n            // delete the prop\n            delete this.target[key];\n            var change = notify || notifySpy\n                ? {\n                    type: \"remove\",\n                    object: this.proxy || target,\n                    oldValue: oldValue,\n                    name: key\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n        finally {\n            endBatch();\n        }\n    };\n    ObservableObjectAdministration.prototype.illegalAccess = function (owner, propName) {\n        /**\n         * This happens if a property is accessed through the prototype chain, but the property was\n         * declared directly as own property on the prototype.\n         *\n         * E.g.:\n         * class A {\n         * }\n         * extendObservable(A.prototype, { x: 1 })\n         *\n         * classB extens A {\n         * }\n         * console.log(new B().x)\n         *\n         * It is unclear whether the property should be considered 'static' or inherited.\n         * Either use `console.log(A.x)`\n         * or: decorate(A, { x: observable })\n         *\n         * When using decorate, the property will always be redeclared as own property on the actual instance\n         */\n        console.warn(\"Property '\" + propName + \"' of '\" + owner + \"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner\");\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableObjectAdministration.prototype.notifyPropertyAddition = function (key, newValue) {\n        var notify = hasListeners(this);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy\n            ? {\n                type: \"add\",\n                object: this.proxy || this.target,\n                name: key,\n                newValue: newValue\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n        if (this.pendingKeys) {\n            var entry = this.pendingKeys.get(key);\n            if (entry)\n                entry.set(true);\n        }\n        this.keysAtom.reportChanged();\n    };\n    ObservableObjectAdministration.prototype.getKeys = function () {\n        var e_1, _a;\n        this.keysAtom.reportObserved();\n        // return Reflect.ownKeys(this.values) as any\n        var res = [];\n        try {\n            for (var _b = __values(this.values), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n                if (value instanceof ObservableValue)\n                    res.push(key);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return res;\n    };\n    return ObservableObjectAdministration;\n}());\nfunction asObservableObject(target, name, defaultEnhancer) {\n    if (name === void 0) { name = \"\"; }\n    if (defaultEnhancer === void 0) { defaultEnhancer = deepEnhancer; }\n    if (Object.prototype.hasOwnProperty.call(target, $mobx))\n        return target[$mobx];\n    process.env.NODE_ENV !== \"production\" &&\n        invariant(Object.isExtensible(target), \"Cannot make the designated object observable; it is not extensible\");\n    if (!isPlainObject(target))\n        name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name)\n        name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, new Map(), stringifyKey(name), defaultEnhancer);\n    addHiddenProp(target, $mobx, adm);\n    return adm;\n}\nvar observablePropertyConfigs = Object.create(null);\nvar computedPropertyConfigs = Object.create(null);\nfunction generateObservablePropConfig(propName) {\n    return (observablePropertyConfigs[propName] ||\n        (observablePropertyConfigs[propName] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                return this[$mobx].read(propName);\n            },\n            set: function (v) {\n                this[$mobx].write(propName, v);\n            }\n        }));\n}\nfunction getAdministrationForComputedPropOwner(owner) {\n    var adm = owner[$mobx];\n    if (!adm) {\n        // because computed props are declared on proty,\n        // the current instance might not have been initialized yet\n        initializeInstance(owner);\n        return owner[$mobx];\n    }\n    return adm;\n}\nfunction generateComputedPropConfig(propName) {\n    return (computedPropertyConfigs[propName] ||\n        (computedPropertyConfigs[propName] = {\n            configurable: globalState.computedConfigurable,\n            enumerable: false,\n            get: function () {\n                return getAdministrationForComputedPropOwner(this).read(propName);\n            },\n            set: function (v) {\n                getAdministrationForComputedPropOwner(this).write(propName, v);\n            }\n        }));\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        initializeInstance(thing);\n        return isObservableObjectAdministration(thing[$mobx]);\n    }\n    return false;\n}\n\nfunction getAtom(thing, property) {\n    if (typeof thing === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            if (property !== undefined)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"It is not possible to get index atoms from arrays\");\n            return thing[$mobx].atom;\n        }\n        if (isObservableSet(thing)) {\n            return thing[$mobx];\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined)\n                return anyThing._keysAtom;\n            var observable = anyThing._data.get(property) || anyThing._hasMap.get(property);\n            if (!observable)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        initializeInstance(thing);\n        if (property && !thing[$mobx])\n            thing[property]; // See #1072\n        if (isObservableObject(thing)) {\n            if (!property)\n                return fail(process.env.NODE_ENV !== \"production\" && \"please specify a property\");\n            var observable = thing[$mobx].values.get(property);\n            if (!observable)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    }\n    else if (typeof thing === \"function\") {\n        if (isReaction(thing[$mobx])) {\n            // disposer function\n            return thing[$mobx];\n        }\n    }\n    return fail(process.env.NODE_ENV !== \"production\" && \"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    if (!thing)\n        fail(\"Expecting some object\");\n    if (property !== undefined)\n        return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing))\n        return thing;\n    if (isObservableMap(thing) || isObservableSet(thing))\n        return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    initializeInstance(thing);\n    if (thing[$mobx])\n        return thing[$mobx];\n    fail(process.env.NODE_ENV !== \"production\" && \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined)\n        named = getAtom(thing, property);\n    else if (isObservableObject(thing) || isObservableMap(thing) || isObservableSet(thing))\n        named = getAdministration(thing);\n    else\n        named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nvar toString = Object.prototype.toString;\nfunction deepEqual(a, b, depth) {\n    if (depth === void 0) { depth = -1; }\n    return eq(a, b, depth);\n}\n// Copied from https://github.com/jashkenas/underscore/blob/5c237a7c682fb68fd5378203f0bf22dce1624854/underscore.js#L1186-L1289\n// Internal recursive comparison function for `isEqual`.\nfunction eq(a, b, depth, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b)\n        return a !== 0 || 1 / a === 1 / b;\n    // `null` or `undefined` only equal to itself (strict comparison).\n    if (a == null || b == null)\n        return false;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a)\n        return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== \"function\" && type !== \"object\" && typeof b != \"object\")\n        return false;\n    // Unwrap any wrapped objects.\n    a = unwrap(a);\n    b = unwrap(b);\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b))\n        return false;\n    switch (className) {\n        // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n        case \"[object RegExp]\":\n        // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n        case \"[object String]\":\n            // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n            // equivalent to `new String(\"5\")`.\n            return \"\" + a === \"\" + b;\n        case \"[object Number]\":\n            // `NaN`s are equivalent, but non-reflexive.\n            // Object(NaN) is equivalent to NaN.\n            if (+a !== +a)\n                return +b !== +b;\n            // An `egal` comparison is performed for other numeric values.\n            return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n        case \"[object Date]\":\n        case \"[object Boolean]\":\n            // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n            // millisecond representations. Note that invalid dates with millisecond representations\n            // of `NaN` are not equivalent.\n            return +a === +b;\n        case \"[object Symbol]\":\n            return (typeof Symbol !== \"undefined\" && Symbol.valueOf.call(a) === Symbol.valueOf.call(b));\n    }\n    var areArrays = className === \"[object Array]\";\n    if (!areArrays) {\n        if (typeof a != \"object\" || typeof b != \"object\")\n            return false;\n        // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n        // from different frames are.\n        var aCtor = a.constructor, bCtor = b.constructor;\n        if (aCtor !== bCtor &&\n            !(typeof aCtor === \"function\" &&\n                aCtor instanceof aCtor &&\n                typeof bCtor === \"function\" &&\n                bCtor instanceof bCtor) &&\n            (\"constructor\" in a && \"constructor\" in b)) {\n            return false;\n        }\n    }\n    if (depth === 0) {\n        return false;\n    }\n    else if (depth < 0) {\n        depth = -1;\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n        // Linear search. Performance is inversely proportional to the number of\n        // unique nested structures.\n        if (aStack[length] === a)\n            return bStack[length] === b;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n        // Compare array lengths to determine if a deep comparison is necessary.\n        length = a.length;\n        if (length !== b.length)\n            return false;\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (length--) {\n            if (!eq(a[length], b[length], depth - 1, aStack, bStack))\n                return false;\n        }\n    }\n    else {\n        // Deep compare objects.\n        var keys = Object.keys(a);\n        var key = void 0;\n        length = keys.length;\n        // Ensure that both objects contain the same number of properties before comparing deep equality.\n        if (Object.keys(b).length !== length)\n            return false;\n        while (length--) {\n            // Deep compare each member\n            key = keys[length];\n            if (!(has$1(b, key) && eq(a[key], b[key], depth - 1, aStack, bStack)))\n                return false;\n        }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n}\nfunction unwrap(a) {\n    if (isObservableArray(a))\n        return a.slice();\n    if (isES6Map(a) || isObservableMap(a))\n        return Array.from(a.entries());\n    if (isES6Set(a) || isObservableSet(a))\n        return Array.from(a.entries());\n    return a;\n}\nfunction has$1(a, key) {\n    return Object.prototype.hasOwnProperty.call(a, key);\n}\n\nfunction makeIterable(iterator) {\n    iterator[Symbol.iterator] = getSelf;\n    return iterator;\n}\nfunction getSelf() {\n    return this;\n}\n\n/*\nThe only reason for this file to exist is pure horror:\nWithout it rollup can make the bundling fail at any point in time; when it rolls up the files in the wrong order\nit will cause undefined errors (for example because super classes or local variables not being hoisted).\nWith this file that will still happen,\nbut at least in this file we can magically reorder the imports with trial and error until the build succeeds again.\n*/\n\n/**\n * (c) Michel Weststrate 2015 - 2018\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nif (typeof Proxy === \"undefined\" || typeof Symbol === \"undefined\") {\n    throw new Error(\"[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.\");\n}\ntry {\n    // define process.env if needed\n    // if this is not a production build in the first place\n    // (in which case the expression below would be substituted with 'production')\n    process.env.NODE_ENV;\n}\ncatch (e) {\n    var g = getGlobal();\n    if (typeof process === \"undefined\")\n        g.process = {};\n    g.process.env = {};\n}\n(function () {\n    function testCodeMinification() { }\n    if (testCodeMinification.name !== \"testCodeMinification\" &&\n        process.env.NODE_ENV !== \"production\" &&\n        process.env.IGNORE_MOBX_MINIFY_WARNING !== \"true\") {\n        // trick so it doesn't get replaced\n        var varName = [\"process\", \"env\", \"NODE_ENV\"].join(\".\");\n        console.warn(\"[mobx] you are running a minified build, but '\" + varName + \"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle\");\n    }\n})();\nif (typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"object\") {\n    // See: https://github.com/andykog/mobx-devtools/\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({\n        spy: spy,\n        extras: {\n            getDebugName: getDebugName\n        },\n        $mobx: $mobx\n    });\n}\n\nexport { $mobx, FlowCancellationError, IDerivationState, ObservableMap, ObservableSet, Reaction, allowStateChanges as _allowStateChanges, allowStateChangesInsideComputed as _allowStateChangesInsideComputed, allowStateReadsEnd as _allowStateReadsEnd, allowStateReadsStart as _allowStateReadsStart, _endAction, getAdministration as _getAdministration, getGlobalState as _getGlobalState, interceptReads as _interceptReads, isComputingDerivation as _isComputingDerivation, resetGlobalState as _resetGlobalState, _startAction, action, autorun, comparer, computed, configure, createAtom, decorate, entries, extendObservable, flow, get, getAtom, getDebugName, getDependencyTree, getObserverTree, has, intercept, isAction, isArrayLike, isObservableValue as isBoxedObservable, isComputed, isComputedProp, isFlowCancellationError, isObservable, isObservableArray, isObservableMap, isObservableObject, isObservableProp, isObservableSet, keys, observable, observe, onBecomeObserved, onBecomeUnobserved, onReactionError, reaction, remove, runInAction, set, spy, toJS, trace, transaction, untracked, values, when };\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { createElement } from 'preact';\nimport { shallowDiffers, assign } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref);\n\t}\n\tForwarded.prototype.isReactComponent = true;\n\tForwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { Component, createElement, options } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense(props) {\n\t// we do not call super here to golf some bytes...\n\tthis._suspensions = 0;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._suspensions) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\t\t}\n\t};\n\n\tif (!c._suspensions++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Component, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { spy, observable, computed, getDependencyTree, Reaction, runInAction, transaction, configure } from 'mobx';\nimport React, { useState, useRef, useMemo, useEffect, useCallback, useDebugValue, memo, forwardRef } from 'react';\n\nif (!useState) {\r\n    throw new Error(\"mobx-react-lite requires React with Hooks support\");\r\n}\r\nif (!spy) {\r\n    throw new Error(\"mobx-react-lite requires mobx at least version 4 to be available\");\r\n}\n\nfunction useObservable(initialValue) {\r\n    var observableRef = useRef(null);\r\n    if (!observableRef.current) {\r\n        observableRef.current = observable(initialValue);\r\n    }\r\n    return observableRef.current;\r\n}\n\nfunction useComputed(func, inputs) {\r\n    if (inputs === void 0) { inputs = []; }\r\n    var computed$1 = useMemo(function () { return computed(func); }, inputs);\r\n    return computed$1.get();\r\n}\n\nvar doNothingDisposer = function () {\r\n    // empty\r\n};\r\n/**\r\n * Adds an observable effect (reaction, autorun, or anything else that returns a disposer) that will be registered upon component creation and disposed upon unmounting.\r\n * Returns the generated disposer for early disposal.\r\n *\r\n * @export\r\n * @template D\r\n * @param {() => D} disposerGenerator A function that returns the disposer of the wanted effect.\r\n * @param {ReadonlyArray<any>} [inputs=[]] If you want the effect to be automatically re-created when some variable(s) are changed then pass them in this array.\r\n * @returns {D}\r\n */\r\nfunction useDisposable(disposerGenerator, inputs) {\r\n    if (inputs === void 0) { inputs = []; }\r\n    var disposerRef = useRef(null);\r\n    var earlyDisposedRef = useRef(false);\r\n    useEffect(function () {\r\n        return lazyCreateDisposer(false);\r\n    }, inputs);\r\n    function lazyCreateDisposer(earlyDisposal) {\r\n        // ensure that we won't create a new disposer if it was early disposed\r\n        if (earlyDisposedRef.current) {\r\n            return doNothingDisposer;\r\n        }\r\n        if (!disposerRef.current) {\r\n            var newDisposer = disposerGenerator();\r\n            if (typeof newDisposer !== \"function\") {\r\n                var error = new Error(\"generated disposer must be a function\");\r\n                {\r\n                    // tslint:disable-next-line:no-console\r\n                    console.error(error);\r\n                    return doNothingDisposer;\r\n                }\r\n            }\r\n            disposerRef.current = newDisposer;\r\n        }\r\n        return function () {\r\n            if (disposerRef.current) {\r\n                disposerRef.current();\r\n                disposerRef.current = null;\r\n            }\r\n            if (earlyDisposal) {\r\n                earlyDisposedRef.current = true;\r\n            }\r\n        };\r\n    }\r\n    return lazyCreateDisposer(true);\r\n}\n\nvar globalIsUsingStaticRendering = false;\r\nfunction useStaticRendering(enable) {\r\n    globalIsUsingStaticRendering = enable;\r\n}\r\nfunction isUsingStaticRendering() {\r\n    return globalIsUsingStaticRendering;\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\n\nfunction printDebugValue(v) {\r\n    if (!v.current) {\r\n        return \"<unknown>\";\r\n    }\r\n    return getDependencyTree(v.current);\r\n}\n\nvar EMPTY_ARRAY = [];\r\nfunction useUnmount(fn) {\r\n    useEffect(function () { return fn; }, EMPTY_ARRAY);\r\n}\r\nfunction useForceUpdate() {\r\n    var _a = __read(useState(0), 2), setTick = _a[1];\r\n    var update = useCallback(function () {\r\n        setTick(function (tick) { return tick + 1; });\r\n    }, []);\r\n    return update;\r\n}\r\nfunction isPlainObject(value) {\r\n    if (!value || typeof value !== \"object\") {\r\n        return false;\r\n    }\r\n    var proto = Object.getPrototypeOf(value);\r\n    return !proto || proto === Object.prototype;\r\n}\n\nvar EMPTY_OBJECT = {};\r\nfunction useObserver(fn, baseComponentName, options) {\r\n    if (baseComponentName === void 0) { baseComponentName = \"observed\"; }\r\n    if (options === void 0) { options = EMPTY_OBJECT; }\r\n    if (isUsingStaticRendering()) {\r\n        return fn();\r\n    }\r\n    var wantedForceUpdateHook = options.useForceUpdate || useForceUpdate;\r\n    var forceUpdate = wantedForceUpdateHook();\r\n    var reaction = useRef(null);\r\n    if (!reaction.current) {\r\n        reaction.current = new Reaction(\"observer(\" + baseComponentName + \")\", function () {\r\n            forceUpdate();\r\n        });\r\n    }\r\n    var dispose = function () {\r\n        if (reaction.current && !reaction.current.isDisposed) {\r\n            reaction.current.dispose();\r\n            reaction.current = null;\r\n        }\r\n    };\r\n    useDebugValue(reaction, printDebugValue);\r\n    useUnmount(function () {\r\n        dispose();\r\n    });\r\n    // render the original component, but have the\r\n    // reaction track the observables, so that rendering\r\n    // can be invalidated (see above) once a dependency changes\r\n    var rendering;\r\n    var exception;\r\n    reaction.current.track(function () {\r\n        try {\r\n            rendering = fn();\r\n        }\r\n        catch (e) {\r\n            exception = e;\r\n        }\r\n    });\r\n    if (exception) {\r\n        dispose();\r\n        throw exception; // re-throw any exceptions catched during rendering\r\n    }\r\n    return rendering;\r\n}\n\n// n.b. base case is not used for actual typings or exported in the typing files\r\nfunction observer(baseComponent, options) {\r\n    // The working of observer is explained step by step in this talk: https://www.youtube.com/watch?v=cPF4iBedoF0&feature=youtu.be&t=1307\r\n    if (isUsingStaticRendering()) {\r\n        return baseComponent;\r\n    }\r\n    var realOptions = __assign({ forwardRef: false }, options);\r\n    var baseComponentName = baseComponent.displayName || baseComponent.name;\r\n    var wrappedComponent = function (props, ref) {\r\n        return useObserver(function () { return baseComponent(props, ref); }, baseComponentName);\r\n    };\r\n    wrappedComponent.displayName = baseComponentName;\r\n    // memo; we are not intested in deep updates\r\n    // in props; we assume that if deep objects are changed,\r\n    // this is in observables, which would have been tracked anyway\r\n    var memoComponent;\r\n    if (realOptions.forwardRef) {\r\n        // we have to use forwardRef here because:\r\n        // 1. it cannot go before memo, only after it\r\n        // 2. forwardRef converts the function into an actual component, so we can't let the baseComponent do it\r\n        //    since it wouldn't be a callable function anymore\r\n        memoComponent = memo(forwardRef(wrappedComponent));\r\n    }\r\n    else {\r\n        memoComponent = memo(wrappedComponent);\r\n    }\r\n    copyStaticProperties(baseComponent, memoComponent);\r\n    memoComponent.displayName = baseComponentName;\r\n    return memoComponent;\r\n}\r\n// based on https://github.com/mridgway/hoist-non-react-statics/blob/master/src/index.js\r\nvar hoistBlackList = {\r\n    $$typeof: true,\r\n    render: true,\r\n    compare: true,\r\n    type: true\r\n};\r\nfunction copyStaticProperties(base, target) {\r\n    Object.keys(base).forEach(function (key) {\r\n        if (base.hasOwnProperty(key) && !hoistBlackList[key]) {\r\n            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(base, key));\r\n        }\r\n    });\r\n}\n\nfunction ObserverComponent(_a) {\r\n    var children = _a.children, render = _a.render;\r\n    var component = children || render;\r\n    if (typeof component !== \"function\") {\r\n        return null;\r\n    }\r\n    return useObserver(component);\r\n}\r\nObserverComponent.propTypes = {\r\n    children: ObserverPropsCheck,\r\n    render: ObserverPropsCheck\r\n};\r\nObserverComponent.displayName = \"Observer\";\r\nfunction ObserverPropsCheck(props, key, componentName, location, propFullName) {\r\n    var extraKey = key === \"children\" ? \"render\" : \"children\";\r\n    var hasProp = typeof props[key] === \"function\";\r\n    var hasExtraProp = typeof props[extraKey] === \"function\";\r\n    if (hasProp && hasExtraProp) {\r\n        return new Error(\"MobX Observer: Do not use children and render in the same time in`\" + componentName);\r\n    }\r\n    if (hasProp || hasExtraProp) {\r\n        return null;\r\n    }\r\n    return new Error(\"Invalid prop `\" +\r\n        propFullName +\r\n        \"` of type `\" +\r\n        typeof props[key] +\r\n        \"` supplied to\" +\r\n        \" `\" +\r\n        componentName +\r\n        \"`, expected `function`.\");\r\n}\n\nfunction useAsObservableSourceInternal(current, usedByLocalStore) {\r\n    if (usedByLocalStore && current === undefined) {\r\n        return undefined;\r\n    }\r\n    var _a = __read(React.useState(function () { return observable(current, {}, { deep: false }); }), 1), res = _a[0];\r\n    runInAction(function () {\r\n        Object.assign(res, current);\r\n    });\r\n    return res;\r\n}\r\nfunction useAsObservableSource(current) {\r\n    return useAsObservableSourceInternal(current, false);\r\n}\n\nfunction useLocalStore(initializer, current) {\r\n    var source = useAsObservableSourceInternal(current, true);\r\n    return React.useState(function () {\r\n        var local = observable(initializer(source));\r\n        if (isPlainObject(local)) {\r\n            runInAction(function () {\r\n                Object.keys(local).forEach(function (key) {\r\n                    var value = local[key];\r\n                    if (typeof value === \"function\") {\r\n                        // @ts-ignore No idea why ts2536 is popping out here\r\n                        local[key] = wrapInTransaction(value, local);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return local;\r\n    })[0];\r\n}\r\n// tslint:disable-next-line: ban-types\r\nfunction wrapInTransaction(fn, context) {\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return transaction(function () { return fn.apply(context, args); });\r\n    };\r\n}\n\nvar optimizeScheduler = function (reactionScheduler) {\r\n    if (typeof reactionScheduler === \"function\") {\r\n        configure({ reactionScheduler: reactionScheduler });\r\n    }\r\n};\n\nexport { ObserverComponent as Observer, isUsingStaticRendering, observer, optimizeScheduler, useAsObservableSource, useComputed, useDisposable, useForceUpdate, useLocalStore, useObservable, useObserver, useStaticRendering };\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).map(fn);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","import { styled, glob } from 'goober';\nimport { observer } from 'mobx-react-lite';\nimport 'wired-button';\n\nimport { GameState, useAppStore } from 'store';\nimport Start from 'pages/Start';\nimport Game from 'pages/Game';\nimport Win from 'pages/Win';\nimport Footer from 'components/Footer';\n\n/**\n * Styles\n */\nglob`\n  html,\n  body {\n    font-family: Gloria Hallelujah, Comic Sans MS, sans-serif;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }  \n`;\n\nconst PageContainer = styled('main')`\n  width: 100%;\n  height: 100%;\n  display: flex;\n\n  & wired-card {\n    margin: auto;\n    padding: 40px;\n  }\n`;\n\n/**\n * Component\n */\nconst Main = () => {\n  const store = useAppStore();\n\n  let Component;\n\n  switch (store.gameState) {\n    case GameState.INITIAL:\n      Component = Start;\n      break;\n\n    case GameState.RUNNING:\n      Component = Game;\n      break;\n\n    case GameState.FINISHED:\n      Component = Win;\n      break;\n\n    default:\n      throw new Error('Game is not in a valid state');\n  }\n\n  return (\n    <PageContainer>\n      <Component />\n      <Footer />\n    </PageContainer>\n  );\n};\n\nexport default observer(Main);\n","import { useEffect } from 'preact/hooks';\nimport { action } from 'mobx';\nimport { observer } from 'mobx-react-lite';\n\nimport { GameState, useAppStore } from 'store';\nimport Cow from 'assets/cow.jpg';\n\nimport Card from 'components/Card';\nimport Image from 'components/Image';\nimport Title from 'components/Title';\nimport Desc from 'components/Desc';\nimport { BEST_TIME_KEY, BEST_SCORE_KEY } from 'components/ScoreTracker';\n\nconst Win = () => {\n  const store = useAppStore();\n\n  const onClickStart = action(() => {\n    store.gameState = GameState.RUNNING;\n  });\n\n  // check if time is better than best time and update if so\n  useEffect(\n    action(() => {\n      if (store.curTimeSeconds < store.bestTimeSeconds) {\n        store.bestTimeSeconds = store.curTimeSeconds;\n        localStorage.setItem(BEST_TIME_KEY, store.curTimeSeconds);\n      }\n\n      const newScore = store.totScore + 1;\n\n      store.totScore = newScore;\n      localStorage.setItem(BEST_SCORE_KEY, newScore);\n    }),\n    []\n  );\n\n  return (\n    <Card>\n      <Image src={Cow} />\n      <Title>the end</Title>\n      <Desc>you found the cow in {store.curTimeSeconds}s!</Desc>\n      <wired-button onClick={onClickStart}>again</wired-button>\n    </Card>\n  );\n};\n\nexport default observer(Win);\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_lastDomChild: null,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tthis._force = false;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._context,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet q = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && q.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet p;\n\tq.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((p = q.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tcontext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (childVNode._lastDomChild != null) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-null _lastDomChild. Continue the diff from the end of\n\t\t\t\t\t\t// this Fragment's DOM tree.\n\t\t\t\t\t\tnewDom = childVNode._lastDomChild;\n\n\t\t\t\t\t\t// Eagerly cleanup _lastDomChild. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments.\n\t\t\t\t\t\tchildVNode._lastDomChild = null;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toldDom = newDom.nextSibling;\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// At this point, if childVNode._lastDomChild existed, then\n\t\t\t\t\t\t// newDom = childVNode._lastDomChild per line 101. Else it is\n\t\t\t\t\t\t// the same as childVNode._dom, meaning this component returned\n\t\t\t\t\t\t// only a single DOM node\n\t\t\t\t\t\tnewParentVNode._lastDomChild = newDom;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (value == null || value === false) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren, toChildArray } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && context[tmp._id];\n\t\t\tlet cctx = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: context;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, cctx); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, cctx);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = cctx;\n\t\t\t\tc._context = context;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, cctx) === false\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = cctx;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = toChildArray(\n\t\t\t\tisTopLevelFragment ? tmp.props.children : tmp\n\t\t\t);\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = null;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (dom == null && excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t(newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(newVNode.type);\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t}\n\n\t\tif (oldProps !== newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tapplyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\tvnode._dom = vnode._lastDomChild = null;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import { _catchError } from './diff/catch-error';\n\n/** @type {import('./internal').Options}  */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t} else if (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { createContext } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport { useLocalStore } from 'mobx-react-lite';\n\n/**\n * MobX store\n */\nexport const GameState = {\n  INITIAL: 'initial',\n  RUNNING: 'running',\n  FINISHED: 'finished'\n};\n\nexport const createStore = () => ({\n  gameState: GameState.INITIAL,\n  playerPos: [0, 0],\n  targetRelativePos: [-1, -1],\n  windowSize: [window.innerWidth, window.innerHeight],\n  curTimeSeconds: Infinity,\n  bestTimeSeconds: Infinity,\n  totScore: 0,\n\n  get targetPos() {\n    return [\n      this.targetRelativePos[0] * this.windowSize[0],\n      this.targetRelativePos[1] * this.windowSize[1]\n    ];\n  }\n});\n\n/**\n * Global state\n */\nexport const AppContext = createContext();\n\nexport const AppStoreProvider = ({ children }) => {\n  const store = useLocalStore(createStore);\n\n  return <AppContext.Provider value={store}>{children}</AppContext.Provider>;\n};\n\nexport const useAppStore = () => {\n  const store = useContext(AppContext);\n\n  if (!store) {\n    throw new Error('Component is not under a provider');\n  }\n\n  return store;\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { WiredBase, BaseCSS } from 'wired-lib/lib/wired-base';\nimport { rectangle, line } from 'wired-lib';\nimport { customElement, property, query, css, html } from 'lit-element';\nlet WiredButton = class WiredButton extends WiredBase {\n    constructor() {\n        super();\n        this.elevation = 1;\n        this.disabled = false;\n        if (window.ResizeObserver) {\n            this.resizeObserver = new window.ResizeObserver(() => {\n                if (this.svg) {\n                    this.wiredRender(true);\n                }\n            });\n        }\n    }\n    static get styles() {\n        return [\n            BaseCSS,\n            css `\n        :host {\n          display: inline-block;\n          font-size: 14px;\n        }\n        path {\n          transition: transform 0.05s ease;\n        }\n        button {\n          position: relative;\n          user-select: none;\n          border: none;\n          background: none;\n          font-family: inherit;\n          font-size: inherit;\n          cursor: pointer;\n          letter-spacing: 1.25px;\n          text-transform: uppercase;\n          text-align: center;\n          padding: 10px;\n          color: inherit;\n          outline: none;\n        }\n        button[disabled] {\n          opacity: 0.6 !important;\n          background: rgba(0, 0, 0, 0.07);\n          cursor: default;\n          pointer-events: none;\n        }\n        button:active path {\n          transform: scale(0.97) translate(1.5%, 1.5%);\n        }\n        button:focus path {\n          stroke-width: 1.5;\n        }\n        button::-moz-focus-inner {\n          border: 0;\n        }\n      `\n        ];\n    }\n    render() {\n        return html `\n    <button ?disabled=\"${this.disabled}\">\n      <slot @slotchange=\"${this.wiredRender}\"></slot>\n      <div id=\"overlay\">\n        <svg></svg>\n      </div>\n    </button>\n    `;\n    }\n    focus() {\n        if (this.button) {\n            this.button.focus();\n        }\n        else {\n            super.focus();\n        }\n    }\n    canvasSize() {\n        if (this.button) {\n            const size = this.button.getBoundingClientRect();\n            const elev = Math.min(Math.max(1, this.elevation), 5);\n            const w = size.width + ((elev - 1) * 2);\n            const h = size.height + ((elev - 1) * 2);\n            return [w, h];\n        }\n        return this.lastSize;\n    }\n    draw(svg, size) {\n        const elev = Math.min(Math.max(1, this.elevation), 5);\n        const s = {\n            width: size[0] - ((elev - 1) * 2),\n            height: size[1] - ((elev - 1) * 2)\n        };\n        rectangle(svg, 0, 0, s.width, s.height);\n        for (let i = 1; i < elev; i++) {\n            (line(svg, (i * 2), s.height + (i * 2), s.width + (i * 2), s.height + (i * 2))).style.opacity = `${(75 - (i * 10)) / 100}`;\n            (line(svg, s.width + (i * 2), s.height + (i * 2), s.width + (i * 2), i * 2)).style.opacity = `${(75 - (i * 10)) / 100}`;\n            (line(svg, (i * 2), s.height + (i * 2), s.width + (i * 2), s.height + (i * 2))).style.opacity = `${(75 - (i * 10)) / 100}`;\n            (line(svg, s.width + (i * 2), s.height + (i * 2), s.width + (i * 2), i * 2)).style.opacity = `${(75 - (i * 10)) / 100}`;\n        }\n    }\n    updated() {\n        super.updated();\n        this.attachResizeListener();\n    }\n    disconnectedCallback() {\n        this.detachResizeListener();\n    }\n    attachResizeListener() {\n        if (this.button && this.resizeObserver && this.resizeObserver.observe) {\n            this.resizeObserver.observe(this.button);\n        }\n    }\n    detachResizeListener() {\n        if (this.button && this.resizeObserver && this.resizeObserver.unobserve) {\n            this.resizeObserver.unobserve(this.button);\n        }\n    }\n};\n__decorate([\n    property({ type: Number }),\n    __metadata(\"design:type\", Object)\n], WiredButton.prototype, \"elevation\", void 0);\n__decorate([\n    property({ type: Boolean, reflect: true }),\n    __metadata(\"design:type\", Object)\n], WiredButton.prototype, \"disabled\", void 0);\n__decorate([\n    query('button'),\n    __metadata(\"design:type\", HTMLButtonElement)\n], WiredButton.prototype, \"button\", void 0);\nWiredButton = __decorate([\n    customElement('wired-button'),\n    __metadata(\"design:paramtypes\", [])\n], WiredButton);\nexport { WiredButton };\n","import { useEffect, useRef } from 'preact/hooks';\nimport { observer } from 'mobx-react-lite';\nimport { styled } from 'goober';\nimport { action, computed } from 'mobx';\n\nimport { useAppStore, GameState } from 'store';\nimport { useWindowSize } from 'hooks/useWindowSize';\nimport { audioCtx, audioGainNode, playSound, NUM_SOUND_LEVELS } from 'audio';\n\nconst TARGET_RADIUS = 40;\nconst TARGET_Z_POS = 300;\n\n/**\n * Styles\n */\nconst Indicator = styled('div')(({ x, y }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: `${TARGET_RADIUS * 2}px`,\n  height: `${TARGET_RADIUS * 2}px`,\n  borderRadius: '50%',\n  cursor: 'pointer',\n  zIndex: 2,\n  transform: `translate(${x - TARGET_RADIUS}px, ${y - TARGET_RADIUS}px)`\n}));\n\n/**\n * Component\n */\nconst Target = () => {\n  const store = useAppStore();\n  const curWindowSize = useWindowSize();\n  const audioPanner = useRef(null);\n\n  /**\n   * Observable tracking the distance from target to player\n   */\n  const playerTargetDistance = computed(() =>\n    Math.sqrt(\n      (store.playerPos[0] - store.targetPos[0]) ** 2 +\n        (store.playerPos[1] - store.targetPos[1]) ** 2\n    )\n  );\n\n  /**\n   * Check if the player is within range of the target.\n   */\n  const isTargetFound = playerTargetDistance.get() < TARGET_RADIUS; // if player is within `N`px of target\n\n  const onClickTarget = action(() => {\n    store.gameState = GameState.FINISHED;\n  });\n\n  /**\n   * Randomly generate target relative position at the start of the game.\n   */\n  useEffect(\n    action(() => {\n      store.targetRelativePos = [Math.random(), Math.random()];\n    }),\n    []\n  );\n\n  /**\n   * Update window size on resize so that target stays in viewport.\n   */\n  useEffect(\n    action(() => {\n      store.windowSize = curWindowSize;\n    }),\n    [curWindowSize]\n  );\n\n  /**\n   * Set up audio source and directional panner node.\n   */\n  useEffect(() => {\n    const listener = audioCtx.listener;\n    listener.positionZ.value = TARGET_Z_POS - 5; // place listener in front of target\n\n    audioPanner.current = new PannerNode(audioCtx, {\n      panningModel: 'HRTF',\n      distanceModel: 'linear',\n      positionX: store.targetPos[0],\n      positionY: store.targetPos[1],\n      positionZ: TARGET_Z_POS,\n      orientationX: 0,\n      orientationY: 0,\n      orientationZ: -1, // have the audio source face the user\n      refDistance: 1,\n      maxDistance: 10000,\n      rolloffFactor: 100,\n      coneInnerAngle: 60,\n      coneOuterAngle: 90,\n      coneOuterGain: 0.3\n    });\n  }, []);\n\n  /**\n   * Play sound every .4 seconds\n   */\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const percentageDistFromTarget = Math.exp(\n        (Math.E - playerTargetDistance.get()) / 500\n      );\n      const soundFileToPlay = Math.floor(\n        percentageDistFromTarget * NUM_SOUND_LEVELS\n      );\n      const clampedGainValue = Math.min(11, Math.max(1, soundFileToPlay));\n\n      // set gain value to increase as player gets closer to target\n      audioGainNode.gain.value = clampedGainValue;\n\n      // play the sound\n      playSound(audioPanner.current, soundFileToPlay);\n    }, 400);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <>\n      {isTargetFound ? ( // only show target if within range\n        <Indicator\n          x={store.targetPos[0]}\n          y={store.targetPos[1]}\n          onClick={onClickTarget}\n        />\n      ) : null}\n      <audio />\n    </>\n  );\n};\n\nexport default observer(Target);\n","/* global __webpack_public_path__ */\n\nimport { h, render } from 'preact';\n\nconst interopDefault = m => (m && m.default ? m.default : m);\n\nif (process.env.NODE_ENV === 'development') {\n\t// enable preact devtools\n\trequire('preact/debug');\n\tif (process.env.RHL) {\n\t\t// enable hot loader\n\t\tconst hotLoader = interopDefault(require('react-hot-loader'));\n\t\thotLoader.preact(interopDefault(require('preact')));\n\t}\n\t// only add a debug sw if webpack service worker is not requested.\n\tif (!process.env.ADD_SW && 'serviceWorker' in navigator) {\n\t\t// eslint-disable-next-line no-undef\n\t\tnavigator.serviceWorker.register(__webpack_public_path__ + 'sw-debug.js');\n\t} else if (process.env.ADD_SW && 'serviceWorker' in navigator) {\n\t\t// eslint-disable-next-line no-undef\n\t\tnavigator.serviceWorker.register(\n\t\t\t__webpack_public_path__ + (process.env.ES_BUILD ? 'sw-esm.js' : 'sw.js')\n\t\t);\n\t}\n} else if (process.env.ADD_SW && 'serviceWorker' in navigator) {\n\t// eslint-disable-next-line no-undef\n\tnavigator.serviceWorker.register(\n\t\t__webpack_public_path__ + (process.env.ES_BUILD ? 'sw-esm.js' : 'sw.js')\n\t);\n}\n\nlet app = interopDefault(require('preact-cli-entrypoint'));\n\nif (typeof app === 'function') {\n\tlet root = document.body.firstElementChild;\n\n\tlet init = () => {\n\t\tlet app = interopDefault(require('preact-cli-entrypoint'));\n\t\tlet preRenderData = {};\n\t\tconst inlineDataElement = document.querySelector(\n\t\t\t'[type=\"__PREACT_CLI_DATA__\"]'\n\t\t);\n\t\tif (inlineDataElement) {\n\t\t\tpreRenderData = JSON.parse(inlineDataElement.innerHTML).preRenderData;\n\t\t}\n\t\t/* An object named CLI_DATA is passed as a prop,\n\t\t * this keeps us future proof if in case we decide,\n\t\t * to send other data like at some point in time.\n\t\t */\n\t\tconst CLI_DATA = { preRenderData };\n\t\troot = render(h(app, { CLI_DATA }), document.body, root);\n\t};\n\n\tif (module.hot) module.hot.accept('preact-cli-entrypoint', init);\n\n\tinit();\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = __webpack_public_path__ + \"9d600a98d4f49f6cca6757b61f75bd3a.jpg\";","var r={data:\"\"},e=function(e){try{var t=e?e.querySelector(\"#_goober\"):self._goober;return t||((t=(e||document.head).appendChild(document.createElement(\"style\"))).innerHTML=\" \",t.id=\"_goober\"),t.firstChild}catch(r){}return r},t=function(r){var t=e(r),a=t.data;return t.data=\"\",a},a=/(?:([a-z0-9-%@]+) *:? *([^{;]+?);|([^;}{]*?) +{)|(})/gi,n=/\\/\\*.*?\\*\\/|\\s{2,}|\\n/gm,c=function(r,e,t){var a=\"\",n=\"\",i=\"\";if(/^@[k|f]/.test(t))return t+JSON.stringify(r).replace(/\",\"/g,\";\").replace(/\"|,\"/g,\"\").replace(/:{/g,\"{\");for(var o in r){var u=r[o];if(\"object\"==typeof u){var s=e+\" \"+o;/&/g.test(o)&&(s=o.replace(/&/g,e)),\"@\"==o[0]&&(s=e),n+=c(u,s,s==e?o:t||\"\")}else/^@i/.test(o)?i=o+\" \"+u+\";\":a+=o.replace(/[A-Z]/g,\"-$&\").toLowerCase()+\":\"+u+\";\"}if(a.charCodeAt(0)){var f=e+\"{\"+a+\"}\";return t?n+t+\"{\"+f+\"}\":i+f+n}return i+n},i={c:0},o=function(r,e,t,o){var u=JSON.stringify(r),s=i[u]||(i[u]=t?\"\":\".go\"+u.split(\"\").reduce(function(r,e){return r+e.charCodeAt(0)|8},4));return function(r,e,t){e.data.indexOf(r)<0&&(e.data=t?r+e.data:e.data+r)}(i[s]||(i[s]=c(r[0]?function(r){for(var e,t=[{}];e=a.exec(r.replace(n,\"\"));)e[4]&&t.shift(),e[3]?t.unshift(t[0][e[3]]={}):e[4]||(t[0][e[1]]=e[2]);return t[0]}(r):r,s)),e,o),s.slice(1)},u=function(r,e,t){return r.reduce(function(r,a,n){var c=e[n];if(c&&c.call){var i=c(t),o=i&&i.props&&i.props.className||/^go/.test(i)&&i;c=o?\".\"+o:i&&i.props?\"\":i}return r+a+(c||\"\")},\"\")};function s(r){var t=this||{},a=r.call?r(t.p):r;return o(a.map?u(a,[].slice.call(arguments,1),t.p):a,e(t.target),t.g,t.o)}var f,l=s.bind({g:1}),p=function(r){return f=r};function g(r){var e=this||{};return function(){var t=arguments;return function(a){var n=e.p=Object.assign({},a),c=n.className;return e.o=/\\s*go[0-9]+/g.test(c),n.className=s.apply(e,t)+(c?\" \"+c:\"\"),f(r,n)}}}export{g as styled,p as setPragma,t as extractCss,s as css,l as glob};\n","import { styled } from 'goober';\n\nexport default styled('p')`\n  margin: 20px auto;\n  width: 60%;\n\n  text-align: center;\n  font-size: 14px;\n  font-family: Comic Sans MS, sans-serif;\n  opacity: 0.6;\n`;\n","import { Segment } from '../geometry';\nimport { HachureIterator } from '../utils/hachure';\nexport function lineLength(line) {\n    const p1 = line[0];\n    const p2 = line[1];\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\n}\nexport function getIntersectingLines(line, points) {\n    const intersections = [];\n    const s1 = new Segment([line[0], line[1]], [line[2], line[3]]);\n    for (let i = 0; i < points.length; i++) {\n        const s2 = new Segment(points[i], points[(i + 1) % points.length]);\n        if (s1.intersects(s2)) {\n            intersections.push([s1.xi, s1.yi]);\n        }\n    }\n    return intersections;\n}\nexport function affine(x, y, cx, cy, sinAnglePrime, cosAnglePrime, R) {\n    const A = -cx * cosAnglePrime - cy * sinAnglePrime + cx;\n    const B = R * (cx * sinAnglePrime - cy * cosAnglePrime) + cy;\n    const C = cosAnglePrime;\n    const D = sinAnglePrime;\n    const E = -R * sinAnglePrime;\n    const F = R * cosAnglePrime;\n    return [\n        A + C * x + D * y,\n        B + E * x + F * y\n    ];\n}\nexport function hachureLinesForPolygon(points, o) {\n    const ret = [];\n    if (points && points.length) {\n        let left = points[0][0];\n        let right = points[0][0];\n        let top = points[0][1];\n        let bottom = points[0][1];\n        for (let i = 1; i < points.length; i++) {\n            left = Math.min(left, points[i][0]);\n            right = Math.max(right, points[i][0]);\n            top = Math.min(top, points[i][1]);\n            bottom = Math.max(bottom, points[i][1]);\n        }\n        const angle = o.hachureAngle;\n        let gap = o.hachureGap;\n        if (gap < 0) {\n            gap = o.strokeWidth * 4;\n        }\n        gap = Math.max(gap, 0.1);\n        const radPerDeg = Math.PI / 180;\n        const hachureAngle = (angle % 180) * radPerDeg;\n        const cosAngle = Math.cos(hachureAngle);\n        const sinAngle = Math.sin(hachureAngle);\n        const tanAngle = Math.tan(hachureAngle);\n        const it = new HachureIterator(top - 1, bottom + 1, left - 1, right + 1, gap, sinAngle, cosAngle, tanAngle);\n        let rect;\n        while ((rect = it.nextLine()) != null) {\n            const lines = getIntersectingLines(rect, points);\n            for (let i = 0; i < lines.length; i++) {\n                if (i < (lines.length - 1)) {\n                    const p1 = lines[i];\n                    const p2 = lines[i + 1];\n                    ret.push([p1, p2]);\n                }\n            }\n        }\n    }\n    return ret;\n}\nexport function hachureLinesForEllipse(helper, cx, cy, width, height, o) {\n    const ret = [];\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += helper.randOffset(rx * 0.05, o);\n    ry += helper.randOffset(ry * 0.05, o);\n    const angle = o.hachureAngle;\n    let gap = o.hachureGap;\n    if (gap <= 0) {\n        gap = o.strokeWidth * 4;\n    }\n    let fweight = o.fillWeight;\n    if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n    }\n    const radPerDeg = Math.PI / 180;\n    const hachureAngle = (angle % 180) * radPerDeg;\n    const tanAngle = Math.tan(hachureAngle);\n    const aspectRatio = ry / rx;\n    const hyp = Math.sqrt(aspectRatio * tanAngle * aspectRatio * tanAngle + 1);\n    const sinAnglePrime = aspectRatio * tanAngle / hyp;\n    const cosAnglePrime = 1 / hyp;\n    const gapPrime = gap / ((rx * ry / Math.sqrt((ry * cosAnglePrime) * (ry * cosAnglePrime) + (rx * sinAnglePrime) * (rx * sinAnglePrime))) / rx);\n    let halfLen = Math.sqrt((rx * rx) - (cx - rx + gapPrime) * (cx - rx + gapPrime));\n    for (let xPos = cx - rx + gapPrime; xPos < cx + rx; xPos += gapPrime) {\n        halfLen = Math.sqrt((rx * rx) - (cx - xPos) * (cx - xPos));\n        const p1 = affine(xPos, cy - halfLen, cx, cy, sinAnglePrime, cosAnglePrime, aspectRatio);\n        const p2 = affine(xPos, cy + halfLen, cx, cy, sinAnglePrime, cosAnglePrime, aspectRatio);\n        ret.push([p1, p2]);\n    }\n    return ret;\n}\n","import { hachureLinesForPolygon, hachureLinesForEllipse } from 'roughjs/bin/fillers/filler-utils';\nconst __maxRandomnessOffset = 2;\nconst __roughness = 1;\nconst __bowing = 0.85;\nconst __curveTightness = 0;\nconst __curveStepCount = 9;\nclass WiresPath {\n    constructor() {\n        this.p = '';\n    }\n    get value() {\n        return this.p.trim();\n    }\n    moveTo(x, y) {\n        this.p = `${this.p}M ${x} ${y} `;\n    }\n    bcurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.p = `${this.p}C ${cp1x} ${cp1y}, ${cp2x} ${cp2y}, ${x} ${y} `;\n    }\n}\nexport function svgNode(tagName, attributes) {\n    const n = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n    if (attributes) {\n        for (const p in attributes) {\n            n.setAttributeNS(null, p, attributes[p]);\n        }\n    }\n    return n;\n}\nfunction _getOffset(min, max) {\n    return __roughness * ((Math.random() * (max - min)) + min);\n}\nfunction _line(x1, y1, x2, y2, existingPath) {\n    const lengthSq = Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);\n    let offset = __maxRandomnessOffset || 0;\n    if ((offset * offset * 100) > lengthSq) {\n        offset = Math.sqrt(lengthSq) / 10;\n    }\n    const halfOffset = offset / 2;\n    const divergePoint = 0.2 + Math.random() * 0.2;\n    let midDispX = __bowing * __maxRandomnessOffset * (y2 - y1) / 200;\n    let midDispY = __bowing * __maxRandomnessOffset * (x1 - x2) / 200;\n    midDispX = _getOffset(-midDispX, midDispX);\n    midDispY = _getOffset(-midDispY, midDispY);\n    const path = existingPath || new WiresPath();\n    path.moveTo(x1 + _getOffset(-offset, offset), y1 + _getOffset(-offset, offset));\n    path.bcurveTo(midDispX + x1 + (x2 - x1) * divergePoint + _getOffset(-offset, offset), midDispY + y1 + (y2 - y1) * divergePoint + _getOffset(-offset, offset), midDispX + x1 + 2 * (x2 - x1) * divergePoint + _getOffset(-offset, offset), midDispY + y1 + 2 * (y2 - y1) * divergePoint + _getOffset(-offset, offset), x2 + _getOffset(-offset, offset), y2 + _getOffset(-offset, offset));\n    path.moveTo(x1 + _getOffset(-halfOffset, halfOffset), y1 + _getOffset(-halfOffset, halfOffset));\n    path.bcurveTo(midDispX + x1 + (x2 - x1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispY + y1 + (y2 - y1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispX + x1 + 2 * (x2 - x1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispY + y1 + 2 * (y2 - y1) * divergePoint + _getOffset(-halfOffset, halfOffset), x2 + _getOffset(-halfOffset, halfOffset), y2 + _getOffset(-halfOffset, halfOffset));\n    return path;\n}\nfunction _continuousLine(x1, y1, x2, y2, move = false, overwrite = false, path) {\n    path = path || new WiresPath();\n    const lengthSq = Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);\n    let offset = __maxRandomnessOffset || 0;\n    if ((offset * offset * 100) > lengthSq) {\n        offset = Math.sqrt(lengthSq) / 10;\n    }\n    const halfOffset = offset / 2;\n    const divergePoint = 0.2 + Math.random() * 0.2;\n    let midDispX = __bowing * __maxRandomnessOffset * (y2 - y1) / 200;\n    let midDispY = __bowing * __maxRandomnessOffset * (x1 - x2) / 200;\n    midDispX = _getOffset(-midDispX, midDispX);\n    midDispY = _getOffset(-midDispY, midDispY);\n    if (move) {\n        path.moveTo(x1 + _getOffset(-offset, offset), y1 + _getOffset(-offset, offset));\n    }\n    if (!overwrite) {\n        path.bcurveTo(midDispX + x1 + (x2 - x1) * divergePoint + _getOffset(-offset, offset), midDispY + y1 + (y2 - y1) * divergePoint + _getOffset(-offset, offset), midDispX + x1 + 2 * (x2 - x1) * divergePoint + _getOffset(-offset, offset), midDispY + y1 + 2 * (y2 - y1) * divergePoint + _getOffset(-offset, offset), x2 + _getOffset(-offset, offset), y2 + _getOffset(-offset, offset));\n    }\n    else {\n        path.bcurveTo(midDispX + x1 + (x2 - x1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispY + y1 + (y2 - y1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispX + x1 + 2 * (x2 - x1) * divergePoint + _getOffset(-halfOffset, halfOffset), midDispY + y1 + 2 * (y2 - y1) * divergePoint + _getOffset(-halfOffset, halfOffset), x2 + _getOffset(-halfOffset, halfOffset), y2 + _getOffset(-halfOffset, halfOffset));\n    }\n    return path;\n}\nfunction _curve(vertArray, existingPath) {\n    const vertArrayLength = vertArray.length;\n    let path = existingPath || new WiresPath();\n    if (vertArrayLength > 3) {\n        const b = [];\n        const s = 1 - __curveTightness;\n        path.moveTo(vertArray[1][0], vertArray[1][1]);\n        for (let i = 1; (i + 2) < vertArrayLength; i++) {\n            const cachedVertArray = vertArray[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * vertArray[i + 1][0] - s * vertArray[i - 1][0]) / 6, cachedVertArray[1] + (s * vertArray[i + 1][1] - s * vertArray[i - 1][1]) / 6];\n            b[2] = [vertArray[i + 1][0] + (s * vertArray[i][0] - s * vertArray[i + 2][0]) / 6, vertArray[i + 1][1] + (s * vertArray[i][1] - s * vertArray[i + 2][1]) / 6];\n            b[3] = [vertArray[i + 1][0], vertArray[i + 1][1]];\n            path.bcurveTo(b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]);\n        }\n    }\n    else if (vertArrayLength === 3) {\n        path.moveTo(vertArray[0][0], vertArray[0][1]);\n        path.bcurveTo(vertArray[1][0], vertArray[1][1], vertArray[2][0], vertArray[2][1], vertArray[2][0], vertArray[2][1]);\n    }\n    else if (vertArrayLength === 2) {\n        path = _line(vertArray[0][0], vertArray[0][1], vertArray[1][0], vertArray[1][1], path);\n    }\n    return path;\n}\nfunction _ellipse(ellipseInc, cx, cy, rx, ry, offset, overlap, existingPath) {\n    const radOffset = _getOffset(-0.5, 0.5) - Math.PI / 2;\n    const points = [];\n    points.push([\n        _getOffset(-offset, offset) + cx + 0.9 * rx * Math.cos(radOffset - ellipseInc),\n        _getOffset(-offset, offset) + cy + 0.9 * ry * Math.sin(radOffset - ellipseInc)\n    ]);\n    for (let angle = radOffset; angle < (Math.PI * 2 + radOffset - 0.01); angle = angle + ellipseInc) {\n        points.push([\n            _getOffset(-offset, offset) + cx + rx * Math.cos(angle),\n            _getOffset(-offset, offset) + cy + ry * Math.sin(angle)\n        ]);\n    }\n    points.push([\n        _getOffset(-offset, offset) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5),\n        _getOffset(-offset, offset) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5)\n    ]);\n    points.push([\n        _getOffset(-offset, offset) + cx + 0.98 * rx * Math.cos(radOffset + overlap),\n        _getOffset(-offset, offset) + cy + 0.98 * ry * Math.sin(radOffset + overlap)\n    ]);\n    points.push([\n        _getOffset(-offset, offset) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5),\n        _getOffset(-offset, offset) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5)\n    ]);\n    return _curve(points, existingPath);\n}\nexport function line(parent, x1, y1, x2, y2) {\n    const path = _line(x1, y1, x2, y2);\n    const node = svgNode('path', { d: path.value });\n    parent.appendChild(node);\n    return node;\n}\nexport function rectangle(parent, x, y, width, height) {\n    x = x + 2;\n    y = y + 2;\n    width = width - 4;\n    height = height - 4;\n    let path = _line(x, y, x + width, y);\n    path = _line(x + width, y, x + width, y + height, path);\n    path = _line(x + width, y + height, x, y + height, path);\n    path = _line(x, y + height, x, y, path);\n    const node = svgNode('path', { d: path.value });\n    parent.appendChild(node);\n    return node;\n}\nexport function polygon(parent, vertices) {\n    let path;\n    const vCount = vertices.length;\n    if (vCount > 2) {\n        for (let i = 0; i < 2; i++) {\n            let move = true;\n            for (let i = 1; i < vCount; i++) {\n                path = _continuousLine(vertices[i - 1][0], vertices[i - 1][1], vertices[i][0], vertices[i][1], move, i > 0, path);\n                move = false;\n            }\n            path = _continuousLine(vertices[vCount - 1][0], vertices[vCount - 1][1], vertices[0][0], vertices[0][1], move, i > 0, path);\n        }\n    }\n    else if (vCount === 2) {\n        path = _line(vertices[0][0], vertices[0][1], vertices[1][0], vertices[1][1]);\n    }\n    else {\n        path = new WiresPath();\n    }\n    const node = svgNode('path', { d: path.value });\n    parent.appendChild(node);\n    return node;\n}\nexport function ellipse(parent, x, y, width, height) {\n    width = Math.max(width > 10 ? width - 4 : width - 1, 1);\n    height = Math.max(height > 10 ? height - 4 : height - 1, 1);\n    const ellipseInc = (Math.PI * 2) / __curveStepCount;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += _getOffset(-rx * 0.05, rx * 0.05);\n    ry += _getOffset(-ry * 0.05, ry * 0.05);\n    let path = _ellipse(ellipseInc, x, y, rx, ry, 1, ellipseInc * _getOffset(0.1, _getOffset(0.4, 1)));\n    path = _ellipse(ellipseInc, x, y, rx, ry, 1.5, 0, path);\n    const node = svgNode('path', { d: path.value });\n    parent.appendChild(node);\n    return node;\n}\nfunction renderHachureLines(lines) {\n    const gNode = svgNode('g');\n    let prevPoint = null;\n    lines.forEach((l) => {\n        line(gNode, l[0][0], l[0][1], l[1][0], l[1][1]);\n        if (prevPoint) {\n            line(gNode, prevPoint[0], prevPoint[1], l[0][0], l[0][1]);\n        }\n        prevPoint = l[1];\n    });\n    return gNode;\n}\nconst options = {\n    bowing: __bowing,\n    curveStepCount: __curveStepCount,\n    curveTightness: __curveTightness,\n    dashGap: 0,\n    dashOffset: 0,\n    fill: '#000',\n    fillStyle: 'hachure',\n    fillWeight: 1,\n    hachureAngle: -41,\n    hachureGap: 5,\n    maxRandomnessOffset: __maxRandomnessOffset,\n    roughness: __roughness,\n    simplification: 1,\n    stroke: '#000',\n    strokeWidth: 2,\n    zigzagOffset: 0\n};\nexport function hachureFill(points) {\n    const lines = hachureLinesForPolygon(points, options);\n    return renderHachureLines(lines);\n}\nexport function hachureEllipseFill(cx, cy, width, height) {\n    const helper = {\n        randOffset(x, _o) {\n            return _getOffset(-x, x);\n        }\n    };\n    const lines = hachureLinesForEllipse(helper, cx, cy, width, height, options);\n    return renderHachureLines(lines);\n}\nexport function fire(element, name, detail, bubbles = true, composed = true) {\n    if (name) {\n        const init = {\n            bubbles: (typeof bubbles === 'boolean') ? bubbles : true,\n            composed: (typeof composed === 'boolean') ? composed : true\n        };\n        if (detail) {\n            init.detail = detail;\n        }\n        const CE = (window.SlickCustomEvent || CustomEvent);\n        element.dispatchEvent(new CE(name, init));\n    }\n}\n","export class Segment {\n    constructor(p1, p2) {\n        this.xi = Number.MAX_VALUE;\n        this.yi = Number.MAX_VALUE;\n        this.px1 = p1[0];\n        this.py1 = p1[1];\n        this.px2 = p2[0];\n        this.py2 = p2[1];\n        this.a = this.py2 - this.py1;\n        this.b = this.px1 - this.px2;\n        this.c = this.px2 * this.py1 - this.px1 * this.py2;\n        this._undefined = ((this.a === 0) && (this.b === 0) && (this.c === 0));\n    }\n    isUndefined() {\n        return this._undefined;\n    }\n    intersects(otherSegment) {\n        if (this.isUndefined() || otherSegment.isUndefined()) {\n            return false;\n        }\n        let grad1 = Number.MAX_VALUE;\n        let grad2 = Number.MAX_VALUE;\n        let int1 = 0, int2 = 0;\n        const a = this.a, b = this.b, c = this.c;\n        if (Math.abs(b) > 0.00001) {\n            grad1 = -a / b;\n            int1 = -c / b;\n        }\n        if (Math.abs(otherSegment.b) > 0.00001) {\n            grad2 = -otherSegment.a / otherSegment.b;\n            int2 = -otherSegment.c / otherSegment.b;\n        }\n        if (grad1 === Number.MAX_VALUE) {\n            if (grad2 === Number.MAX_VALUE) {\n                if ((-c / a) !== (-otherSegment.c / otherSegment.a)) {\n                    return false;\n                }\n                if ((this.py1 >= Math.min(otherSegment.py1, otherSegment.py2)) && (this.py1 <= Math.max(otherSegment.py1, otherSegment.py2))) {\n                    this.xi = this.px1;\n                    this.yi = this.py1;\n                    return true;\n                }\n                if ((this.py2 >= Math.min(otherSegment.py1, otherSegment.py2)) && (this.py2 <= Math.max(otherSegment.py1, otherSegment.py2))) {\n                    this.xi = this.px2;\n                    this.yi = this.py2;\n                    return true;\n                }\n                return false;\n            }\n            this.xi = this.px1;\n            this.yi = (grad2 * this.xi + int2);\n            if (((this.py1 - this.yi) * (this.yi - this.py2) < -0.00001) || ((otherSegment.py1 - this.yi) * (this.yi - otherSegment.py2) < -0.00001)) {\n                return false;\n            }\n            if (Math.abs(otherSegment.a) < 0.00001) {\n                if ((otherSegment.px1 - this.xi) * (this.xi - otherSegment.px2) < -0.00001) {\n                    return false;\n                }\n                return true;\n            }\n            return true;\n        }\n        if (grad2 === Number.MAX_VALUE) {\n            this.xi = otherSegment.px1;\n            this.yi = grad1 * this.xi + int1;\n            if (((otherSegment.py1 - this.yi) * (this.yi - otherSegment.py2) < -0.00001) || ((this.py1 - this.yi) * (this.yi - this.py2) < -0.00001)) {\n                return false;\n            }\n            if (Math.abs(a) < 0.00001) {\n                if ((this.px1 - this.xi) * (this.xi - this.px2) < -0.00001) {\n                    return false;\n                }\n                return true;\n            }\n            return true;\n        }\n        if (grad1 === grad2) {\n            if (int1 !== int2) {\n                return false;\n            }\n            if ((this.px1 >= Math.min(otherSegment.px1, otherSegment.px2)) && (this.px1 <= Math.max(otherSegment.py1, otherSegment.py2))) {\n                this.xi = this.px1;\n                this.yi = this.py1;\n                return true;\n            }\n            if ((this.px2 >= Math.min(otherSegment.px1, otherSegment.px2)) && (this.px2 <= Math.max(otherSegment.px1, otherSegment.px2))) {\n                this.xi = this.px2;\n                this.yi = this.py2;\n                return true;\n            }\n            return false;\n        }\n        this.xi = ((int2 - int1) / (grad1 - grad2));\n        this.yi = (grad1 * this.xi + int1);\n        if (((this.px1 - this.xi) * (this.xi - this.px2) < -0.00001) || ((otherSegment.px1 - this.xi) * (this.xi - otherSegment.px2) < -0.00001)) {\n            return false;\n        }\n        return true;\n    }\n}\nexport function linerIntersection(l1, l2) {\n    const a1 = l1[1][1] - l1[0][1];\n    const b1 = l1[0][0] - l1[1][0];\n    const c1 = a1 * l1[0][0] + b1 * l1[0][1];\n    const a2 = l2[1][1] - l2[0][1];\n    const b2 = l2[0][0] - l2[1][0];\n    const c2 = a2 * l2[0][0] + b2 * l2[0][1];\n    const determinant = a1 * b2 - a2 * b1;\n    if (determinant) {\n        return [\n            Math.round((b2 * c1 - b1 * c2) / determinant),\n            Math.round((a1 * c2 - a2 * c1) / determinant)\n        ];\n    }\n    return null;\n}\nexport function centroid(points) {\n    let area = 0, cx = 0, cy = 0;\n    for (let i = 0; i < points.length; i++) {\n        const p = points[i];\n        const next = i === (points.length - 1) ? points[0] : points[i + 1];\n        area += p[0] * next[1] - next[0] * p[1];\n    }\n    area = area / 2;\n    for (let i = 0; i < points.length; i++) {\n        const p = points[i];\n        const next = i === (points.length - 1) ? points[0] : points[i + 1];\n        cx += (p[0] + next[0]) * (p[0] * next[1] - next[0] * p[1]);\n        cy += (p[1] + next[1]) * (p[0] * next[1] - next[0] * p[1]);\n    }\n    return [cx / (6 * area), cy / (6 * area)];\n}\n","import { Segment } from '../geometry';\nexport class HachureIterator {\n    constructor(top, bottom, left, right, gap, sinAngle, cosAngle, tanAngle) {\n        this.deltaX = 0;\n        this.hGap = 0;\n        this.top = top;\n        this.bottom = bottom;\n        this.left = left;\n        this.right = right;\n        this.gap = gap;\n        this.sinAngle = sinAngle;\n        this.tanAngle = tanAngle;\n        if (Math.abs(sinAngle) < 0.0001) {\n            this.pos = left + gap;\n        }\n        else if (Math.abs(sinAngle) > 0.9999) {\n            this.pos = top + gap;\n        }\n        else {\n            this.deltaX = (bottom - top) * Math.abs(tanAngle);\n            this.pos = left - Math.abs(this.deltaX);\n            this.hGap = Math.abs(gap / cosAngle);\n            this.sLeft = new Segment([left, bottom], [left, top]);\n            this.sRight = new Segment([right, bottom], [right, top]);\n        }\n    }\n    nextLine() {\n        if (Math.abs(this.sinAngle) < 0.0001) {\n            if (this.pos < this.right) {\n                const line = [this.pos, this.top, this.pos, this.bottom];\n                this.pos += this.gap;\n                return line;\n            }\n        }\n        else if (Math.abs(this.sinAngle) > 0.9999) {\n            if (this.pos < this.bottom) {\n                const line = [this.left, this.pos, this.right, this.pos];\n                this.pos += this.gap;\n                return line;\n            }\n        }\n        else {\n            let xLower = this.pos - this.deltaX / 2;\n            let xUpper = this.pos + this.deltaX / 2;\n            let yLower = this.bottom;\n            let yUpper = this.top;\n            if (this.pos < (this.right + this.deltaX)) {\n                while (((xLower < this.left) && (xUpper < this.left)) || ((xLower > this.right) && (xUpper > this.right))) {\n                    this.pos += this.hGap;\n                    xLower = this.pos - this.deltaX / 2;\n                    xUpper = this.pos + this.deltaX / 2;\n                    if (this.pos > (this.right + this.deltaX)) {\n                        return null;\n                    }\n                }\n                const s = new Segment([xLower, yLower], [xUpper, yUpper]);\n                if (this.sLeft && s.intersects(this.sLeft)) {\n                    xLower = s.xi;\n                    yLower = s.yi;\n                }\n                if (this.sRight && s.intersects(this.sRight)) {\n                    xUpper = s.xi;\n                    yUpper = s.yi;\n                }\n                if (this.tanAngle > 0) {\n                    xLower = this.right - (xLower - this.left);\n                    xUpper = this.right - (xUpper - this.left);\n                }\n                const line = [xLower, yLower, xUpper, yUpper];\n                this.pos += this.hGap;\n                return line;\n            }\n        }\n        return null;\n    }\n}\n","import { styled } from 'goober';\n\nexport default styled('img')`\n  width: 150px;\n  opacity: 0.8;\n`;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\n/**\n * A function type that creates a Template from a TemplateResult.\n *\n * This is a hook into the template-creation process for rendering that\n * requires some modification of templates before they're used, like ShadyCSS,\n * which must add classes to elements and remove styles.\n *\n * Templates should be cached as aggressively as possible, so that many\n * TemplateResults produced from the same expression only do the work of\n * creating the Template the first time.\n *\n * Templates are usually cached by TemplateResult.strings and\n * TemplateResult.type, but may be cached by other keys if this function\n * modifies the template.\n *\n * Note that currently TemplateFactories must not add, remove, or reorder\n * expressions, because there is no way to describe such a modification\n * to render() so that values are interpolated to the correct place in the\n * template instances.\n */\nexport type TemplateFactory = (result: TemplateResult) => Template;\n\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nexport function templateFactory(result: TemplateResult) {\n  let templateCache = templateCaches.get(result.type);\n  if (templateCache === undefined) {\n    templateCache = {\n      stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n      keyString: new Map<string, Template>()\n    };\n    templateCaches.set(result.type, templateCache);\n  }\n\n  let template = templateCache.stringsArray.get(result.strings);\n  if (template !== undefined) {\n    return template;\n  }\n\n  // If the TemplateStringsArray is new, generate a key from the strings\n  // This key is shared between all templates with identical content\n  const key = result.strings.join(marker);\n\n  // Check if we already have a Template for this key\n  template = templateCache.keyString.get(key);\n  if (template === undefined) {\n    // If we have not seen this key before, create a new Template\n    template = new Template(result, result.getTemplateElement());\n    // Cache the Template for this key\n    templateCache.keyString.set(key, template);\n  }\n\n  // Cache all future queries for this TemplateStringsArray\n  templateCache.stringsArray.set(result.strings, template);\n  return template;\n}\n\n/**\n * The first argument to JS template tags retain identity across multiple\n * calls to a tag for the same literal, so we can cache work done per literal\n * in a Map.\n *\n * Safari currently has a bug which occasionally breaks this behaviour, so we\n * need to cache the Template at two levels. We first cache the\n * TemplateStringsArray, and if that fails, we cache a key constructed by\n * joining the strings array.\n */\nexport type templateCache = {\n  readonly stringsArray: WeakMap<TemplateStringsArray, Template>; //\n  readonly keyString: Map<string, Template>;\n};\n\nexport const templateCaches = new Map<string, templateCache>();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module shady-render\n */\n\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\nconst walkerNodeFilter = 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */;\n\n/**\n * Removes the list of nodes from a Template safely. In addition to removing\n * nodes from the Template, the Template part indices are updated to match\n * the mutated Template DOM.\n *\n * As the template is walked the removal state is tracked and\n * part indices are adjusted as needed.\n *\n * div\n *   div#1 (remove) <-- start removing (removing node is div#1)\n *     div\n *       div#2 (remove)  <-- continue removing (removing node is still div#1)\n *         div\n * div <-- stop removing since previous sibling is the removing node (div#1,\n * removed 4 nodes)\n */\nexport function removeNodesFromTemplate(\n    template: Template, nodesToRemove: Set<Node>) {\n  const {element: {content}, parts} = template;\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let part = parts[partIndex];\n  let nodeIndex = -1;\n  let removeCount = 0;\n  const nodesToRemoveInTemplate = [];\n  let currentRemovingNode: Node|null = null;\n  while (walker.nextNode()) {\n    nodeIndex++;\n    const node = walker.currentNode as Element;\n    // End removal if stepped past the removing node\n    if (node.previousSibling === currentRemovingNode) {\n      currentRemovingNode = null;\n    }\n    // A node to remove was found in the template\n    if (nodesToRemove.has(node)) {\n      nodesToRemoveInTemplate.push(node);\n      // Track node we're removing\n      if (currentRemovingNode === null) {\n        currentRemovingNode = node;\n      }\n    }\n    // When removing, increment count by which to adjust subsequent part indices\n    if (currentRemovingNode !== null) {\n      removeCount++;\n    }\n    while (part !== undefined && part.index === nodeIndex) {\n      // If part is in a removed node deactivate it by setting index to -1 or\n      // adjust the index as needed.\n      part.index = currentRemovingNode !== null ? -1 : part.index - removeCount;\n      // go to the next active part.\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n      part = parts[partIndex];\n    }\n  }\n  nodesToRemoveInTemplate.forEach((n) => n.parentNode!.removeChild(n));\n}\n\nconst countNodes = (node: Node) => {\n  let count = (node.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */) ? 0 : 1;\n  const walker = document.createTreeWalker(node, walkerNodeFilter, null, false);\n  while (walker.nextNode()) {\n    count++;\n  }\n  return count;\n};\n\nconst nextActiveIndexInTemplateParts =\n    (parts: TemplatePart[], startIndex: number = -1) => {\n      for (let i = startIndex + 1; i < parts.length; i++) {\n        const part = parts[i];\n        if (isTemplatePartActive(part)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n\n/**\n * Inserts the given node into the Template, optionally before the given\n * refNode. In addition to inserting the node into the Template, the Template\n * part indices are updated to match the mutated Template DOM.\n */\nexport function insertNodeIntoTemplate(\n    template: Template, node: Node, refNode: Node|null = null) {\n  const {element: {content}, parts} = template;\n  // If there's no refNode, then put node at end of template.\n  // No part indices need to be shifted in this case.\n  if (refNode === null || refNode === undefined) {\n    content.appendChild(node);\n    return;\n  }\n  const walker =\n      document.createTreeWalker(content, walkerNodeFilter, null, false);\n  let partIndex = nextActiveIndexInTemplateParts(parts);\n  let insertCount = 0;\n  let walkerIndex = -1;\n  while (walker.nextNode()) {\n    walkerIndex++;\n    const walkerNode = walker.currentNode as Element;\n    if (walkerNode === refNode) {\n      insertCount = countNodes(node);\n      refNode.parentNode!.insertBefore(node, refNode);\n    }\n    while (partIndex !== -1 && parts[partIndex].index === walkerIndex) {\n      // If we've inserted the node, simply adjust all subsequent parts\n      if (insertCount > 0) {\n        while (partIndex !== -1) {\n          parts[partIndex].index += insertCount;\n          partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n        }\n        return;\n      }\n      partIndex = nextActiveIndexInTemplateParts(parts, partIndex);\n    }\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {LitElement} from '../lit-element.js';\n\nimport {PropertyDeclaration, UpdatingElement} from './updating-element.js';\n\nexport type Constructor<T> = {\n  new (...args: unknown[]): T\n};\n\n// From the TC39 Decorators proposal\ninterface ClassDescriptor {\n  kind: 'class';\n  elements: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n}\n\n// From the TC39 Decorators proposal\ninterface ClassElement {\n  kind: 'field'|'method';\n  key: PropertyKey;\n  placement: 'static'|'prototype'|'own';\n  initializer?: Function;\n  extras?: ClassElement[];\n  finisher?: <T>(clazz: Constructor<T>) => undefined | Constructor<T>;\n  descriptor?: PropertyDescriptor;\n}\n\nconst legacyCustomElement =\n    (tagName: string, clazz: Constructor<HTMLElement>) => {\n      window.customElements.define(tagName, clazz);\n      // Cast as any because TS doesn't recognize the return type as being a\n      // subtype of the decorated class when clazz is typed as\n      // `Constructor<HTMLElement>` for some reason.\n      // `Constructor<HTMLElement>` is helpful to make sure the decorator is\n      // applied to elements however.\n      // tslint:disable-next-line:no-any\n      return clazz as any;\n    };\n\nconst standardCustomElement =\n    (tagName: string, descriptor: ClassDescriptor) => {\n      const {kind, elements} = descriptor;\n      return {\n        kind,\n        elements,\n        // This callback is called once the class is otherwise fully defined\n        finisher(clazz: Constructor<HTMLElement>) {\n          window.customElements.define(tagName, clazz);\n        }\n      };\n    };\n\n/**\n * Class decorator factory that defines the decorated class as a custom element.\n *\n * @param tagName the name of the custom element to define\n */\nexport const customElement = (tagName: string) =>\n    (classOrDescriptor: Constructor<HTMLElement>|ClassDescriptor) =>\n        (typeof classOrDescriptor === 'function') ?\n    legacyCustomElement(tagName, classOrDescriptor) :\n    standardCustomElement(tagName, classOrDescriptor);\n\nconst standardProperty =\n    (options: PropertyDeclaration, element: ClassElement) => {\n      // When decorating an accessor, pass it through and add property metadata.\n      // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n      // stomp over the user's accessor.\n      if (element.kind === 'method' && element.descriptor &&\n          !('value' in element.descriptor)) {\n        return {\n          ...element,\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      } else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n          kind: 'field',\n          key: Symbol(),\n          placement: 'own',\n          descriptor: {},\n          // When @babel/plugin-proposal-decorators implements initializers,\n          // do this instead of the initializer below. See:\n          // https://github.com/babel/babel/issues/9260 extras: [\n          //   {\n          //     kind: 'initializer',\n          //     placement: 'own',\n          //     initializer: descriptor.initializer,\n          //   }\n          // ],\n          initializer(this: {[key: string]: unknown}) {\n            if (typeof element.initializer === 'function') {\n              this[element.key as string] = element.initializer.call(this);\n            }\n          },\n          finisher(clazz: typeof UpdatingElement) {\n            clazz.createProperty(element.key, options);\n          }\n        };\n      }\n    };\n\nconst legacyProperty =\n    (options: PropertyDeclaration, proto: Object, name: PropertyKey) => {\n      (proto.constructor as typeof UpdatingElement)\n          .createProperty(name, options);\n    };\n\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A `PropertyDeclaration` may optionally be\n * supplied to configure property features.\n *\n * @ExportDecoratedItems\n */\nexport function property(options?: PropertyDeclaration) {\n  // tslint:disable-next-line:no-any decorator\n  return (protoOrDescriptor: Object|ClassElement, name?: PropertyKey): any =>\n             (name !== undefined) ?\n      legacyProperty(options!, protoOrDescriptor as Object, name) :\n      standardProperty(options!, protoOrDescriptor as ClassElement);\n}\n\n/**\n * A property decorator that converts a class property into a getter that\n * executes a querySelector on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function query(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelector(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\n/**\n * A property decorator that converts a class property into a getter\n * that executes a querySelectorAll on the element's renderRoot.\n *\n * @ExportDecoratedItems\n */\nexport function queryAll(selector: string) {\n  return (protoOrDescriptor: Object|ClassElement,\n          // tslint:disable-next-line:no-any decorator\n          name?: PropertyKey): any => {\n    const descriptor = {\n      get(this: LitElement) {\n        return this.renderRoot.querySelectorAll(selector);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n    return (name !== undefined) ?\n        legacyQuery(descriptor, protoOrDescriptor as Object, name) :\n        standardQuery(descriptor, protoOrDescriptor as ClassElement);\n  };\n}\n\nconst legacyQuery =\n    (descriptor: PropertyDescriptor, proto: Object, name: PropertyKey) => {\n      Object.defineProperty(proto, name, descriptor);\n    };\n\nconst standardQuery = (descriptor: PropertyDescriptor, element: ClassElement) =>\n    ({\n      kind: 'method',\n      placement: 'prototype',\n      key: element.key,\n      descriptor,\n    });\n\nconst standardEventOptions =\n    (options: AddEventListenerOptions, element: ClassElement) => {\n      return {\n        ...element,\n        finisher(clazz: typeof UpdatingElement) {\n          Object.assign(\n              clazz.prototype[element.key as keyof UpdatingElement], options);\n        }\n      };\n    };\n\nconst legacyEventOptions =\n    // tslint:disable-next-line:no-any legacy decorator\n    (options: AddEventListenerOptions, proto: any, name: PropertyKey) => {\n      Object.assign(proto[name], options);\n    };\n\n/**\n * Adds event listener options to a method used as an event listener in a\n * lit-html template.\n *\n * @param options An object that specifis event listener options as accepted by\n * `EventTarget#addEventListener` and `EventTarget#removeEventListener`.\n *\n * Current browsers support the `capture`, `passive`, and `once` options. See:\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Parameters\n *\n * @example\n *\n *     class MyElement {\n *\n *       clicked = false;\n *\n *       render() {\n *         return html`<div @click=${this._onClick}`><button></button></div>`;\n *       }\n *\n *       @eventOptions({capture: true})\n *       _onClick(e) {\n *         this.clicked = true;\n *       }\n *     }\n */\nexport const eventOptions = (options: AddEventListenerOptions) =>\n    // Return value typed as any to prevent TypeScript from complaining that\n    // standard decorator function signature does not match TypeScript decorator\n    // signature\n    // TODO(kschaaf): unclear why it was only failing on this decorator and not\n    // the others\n    ((protoOrDescriptor: Object|ClassElement, name?: string) =>\n         (name !== undefined) ?\n         legacyEventOptions(options, protoOrDescriptor as Object, name) :\n         standardEventOptions(options, protoOrDescriptor as ClassElement)) as\n        // tslint:disable-next-line:no-any decorator\n        any;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\n\nconst directives = new WeakMap<object, true>();\n\n// tslint:disable-next-line:no-any\nexport type DirectiveFactory = (...args: any[]) => object;\n\nexport type DirectiveFn = (part: Part) => void;\n\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nexport const directive = <F extends DirectiveFactory>(f: F): F =>\n    ((...args: unknown[]) => {\n      const d = f(...args);\n      directives.set(d, true);\n      return d;\n    }) as F;\n\nexport const isDirective = (o: unknown): o is DirectiveFn => {\n  return typeof o === 'function' && directives.has(o);\n};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\ninterface MaybePolyfilledCe extends CustomElementRegistry {\n  readonly polyfillWrapFlushCallback?: object;\n}\n\n/**\n * True if the custom elements polyfill is in use.\n */\nexport const isCEPolyfill = window.customElements !== undefined &&\n    (window.customElements as MaybePolyfilledCe).polyfillWrapFlushCallback !==\n        undefined;\n\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nexport const reparentNodes =\n    (container: Node,\n     start: Node|null,\n     end: Node|null = null,\n     before: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.insertBefore(start!, before);\n        start = n;\n      }\n    };\n\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nexport const removeNodes =\n    (container: Node, start: Node|null, end: Node|null = null): void => {\n      while (start !== end) {\n        const n = start!.nextSibling;\n        container.removeChild(start!);\n        start = n;\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\n/**\n * The Part interface represents a dynamic part of a template instance rendered\n * by lit-html.\n */\nexport interface Part {\n  readonly value: unknown;\n\n  /**\n   * Sets the current part value, but does not write it to the DOM.\n   * @param value The value that will be committed.\n   */\n  setValue(value: unknown): void;\n\n  /**\n   * Commits the current part value, causing it to actually be written to the\n   * DOM.\n   *\n   * Directives are run at the start of `commit`, so that if they call\n   * `part.setValue(...)` synchronously that value will be used in the current\n   * commit, and there's no need to call `part.commit()` within the directive.\n   * If directives set a part value asynchronously, then they must call\n   * `part.commit()` manually.\n   */\n  commit(): void;\n}\n\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nexport const noChange = {};\n\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nexport const nothing = {};\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {TemplateResult} from './template-result.js';\n\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nexport const marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nexport const nodeMarker = `<!--${marker}-->`;\n\nexport const markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n\n/**\n * Suffix appended to all bound attribute names.\n */\nexport const boundAttributeSuffix = '$lit$';\n\n/**\n * An updateable Template that tracks the location of dynamic parts.\n */\nexport class Template {\n  readonly parts: TemplatePart[] = [];\n  readonly element: HTMLTemplateElement;\n\n  constructor(result: TemplateResult, element: HTMLTemplateElement) {\n    this.element = element;\n\n    const nodesToRemove: Node[] = [];\n    const stack: Node[] = [];\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        element.content,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    // Keeps track of the last index associated with a part. We try to delete\n    // unnecessary nodes, but we never want to associate two different parts\n    // to the same index. They must have a constant node between.\n    let lastPartIndex = 0;\n    let index = -1;\n    let partIndex = 0;\n    const {strings, values: {length}} = result;\n    while (partIndex < length) {\n      const node = walker.nextNode() as Element | Comment | Text | null;\n      if (node === null) {\n        // We've exhausted the content inside a nested template element.\n        // Because we still have parts (the outer for-loop), we know:\n        // - There is a template in the stack\n        // - The walker will find a nextNode outside the template\n        walker.currentNode = stack.pop()!;\n        continue;\n      }\n      index++;\n\n      if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n        if ((node as Element).hasAttributes()) {\n          const attributes = (node as Element).attributes;\n          const {length} = attributes;\n          // Per\n          // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n          // attributes are not guaranteed to be returned in document order.\n          // In particular, Edge/IE can return them out of order, so we cannot\n          // assume a correspondence between part index and attribute index.\n          let count = 0;\n          for (let i = 0; i < length; i++) {\n            if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n              count++;\n            }\n          }\n          while (count-- > 0) {\n            // Get the template literal section leading up to the first\n            // expression in this attribute\n            const stringForPart = strings[partIndex];\n            // Find the attribute name\n            const name = lastAttributeNameRegex.exec(stringForPart)![2];\n            // Find the corresponding attribute\n            // All bound attributes have had a suffix added in\n            // TemplateResult#getHTML to opt out of special attribute\n            // handling. To look up the attribute value we also need to add\n            // the suffix.\n            const attributeLookupName =\n                name.toLowerCase() + boundAttributeSuffix;\n            const attributeValue =\n                (node as Element).getAttribute(attributeLookupName)!;\n            (node as Element).removeAttribute(attributeLookupName);\n            const statics = attributeValue.split(markerRegex);\n            this.parts.push({type: 'attribute', index, name, strings: statics});\n            partIndex += statics.length - 1;\n          }\n        }\n        if ((node as Element).tagName === 'TEMPLATE') {\n          stack.push(node);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n      } else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n        const data = (node as Text).data;\n        if (data.indexOf(marker) >= 0) {\n          const parent = node.parentNode!;\n          const strings = data.split(markerRegex);\n          const lastIndex = strings.length - 1;\n          // Generate a new text node for each literal section\n          // These nodes are also used as the markers for node parts\n          for (let i = 0; i < lastIndex; i++) {\n            let insert: Node;\n            let s = strings[i];\n            if (s === '') {\n              insert = createMarker();\n            } else {\n              const match = lastAttributeNameRegex.exec(s);\n              if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                s = s.slice(0, match.index) + match[1] +\n                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n              }\n              insert = document.createTextNode(s);\n            }\n            parent.insertBefore(insert, node);\n            this.parts.push({type: 'node', index: ++index});\n          }\n          // If there's no text, we must insert a comment to mark our place.\n          // Else, we can trust it will stick around after cloning.\n          if (strings[lastIndex] === '') {\n            parent.insertBefore(createMarker(), node);\n            nodesToRemove.push(node);\n          } else {\n            (node as Text).data = strings[lastIndex];\n          }\n          // We have a part for each match found\n          partIndex += lastIndex;\n        }\n      } else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n        if ((node as Comment).data === marker) {\n          const parent = node.parentNode!;\n          // Add a new marker node to be the startNode of the Part if any of\n          // the following are true:\n          //  * We don't have a previousSibling\n          //  * The previousSibling is already the start of a previous part\n          if (node.previousSibling === null || index === lastPartIndex) {\n            index++;\n            parent.insertBefore(createMarker(), node);\n          }\n          lastPartIndex = index;\n          this.parts.push({type: 'node', index});\n          // If we don't have a nextSibling, keep this node so we have an end.\n          // Else, we can remove it to save future costs.\n          if (node.nextSibling === null) {\n            (node as Comment).data = '';\n          } else {\n            nodesToRemove.push(node);\n            index--;\n          }\n          partIndex++;\n        } else {\n          let i = -1;\n          while ((i = (node as Comment).data.indexOf(marker, i + 1)) !== -1) {\n            // Comment node has a binding marker inside, make an inactive part\n            // The binding won't work, but subsequent bindings will\n            // TODO (justinfagnani): consider whether it's even worth it to\n            // make bindings in comments work\n            this.parts.push({type: 'node', index: -1});\n            partIndex++;\n          }\n        }\n      }\n    }\n\n    // Remove text binding nodes after the walk to not disturb the TreeWalker\n    for (const n of nodesToRemove) {\n      n.parentNode!.removeChild(n);\n    }\n  }\n}\n\nconst endsWith = (str: string, suffix: string): boolean => {\n  const index = str.length - suffix.length;\n  return index >= 0 && str.slice(index) === suffix;\n};\n\n/**\n * A placeholder for a dynamic expression in an HTML template.\n *\n * There are two built-in part types: AttributePart and NodePart. NodeParts\n * always represent a single dynamic expression, while AttributeParts may\n * represent as many expressions are contained in the attribute.\n *\n * A Template's parts are mutable, so parts can be replaced or modified\n * (possibly to implement different template semantics). The contract is that\n * parts can only be replaced, not removed, added or reordered, and parts must\n * always consume the correct number of values in their `update()` method.\n *\n * TODO(justinfagnani): That requirement is a little fragile. A\n * TemplateInstance could instead be more careful about which values it gives\n * to Part.update().\n */\nexport type TemplatePart = {\n  readonly type: 'node',\n  index: number\n}|{readonly type: 'attribute', index: number, readonly name: string, readonly strings: ReadonlyArray<string>};\n\nexport const isTemplatePartActive = (part: TemplatePart) => part.index !== -1;\n\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nexport const createMarker = () => document.createComment('');\n\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nexport const lastAttributeNameRegex =\n    /([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isCEPolyfill} from './dom.js';\nimport {Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {isTemplatePartActive, Template, TemplatePart} from './template.js';\n\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nexport class TemplateInstance {\n  private readonly __parts: Array<Part|undefined> = [];\n  readonly processor: TemplateProcessor;\n  readonly options: RenderOptions;\n  readonly template: Template;\n\n  constructor(\n      template: Template, processor: TemplateProcessor,\n      options: RenderOptions) {\n    this.template = template;\n    this.processor = processor;\n    this.options = options;\n  }\n\n  update(values: ReadonlyArray<unknown>) {\n    let i = 0;\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.setValue(values[i]);\n      }\n      i++;\n    }\n    for (const part of this.__parts) {\n      if (part !== undefined) {\n        part.commit();\n      }\n    }\n  }\n\n  _clone(): DocumentFragment {\n    // There are a number of steps in the lifecycle of a template instance's\n    // DOM fragment:\n    //  1. Clone - create the instance fragment\n    //  2. Adopt - adopt into the main document\n    //  3. Process - find part markers and create parts\n    //  4. Upgrade - upgrade custom elements\n    //  5. Update - set node, attribute, property, etc., values\n    //  6. Connect - connect to the document. Optional and outside of this\n    //     method.\n    //\n    // We have a few constraints on the ordering of these steps:\n    //  * We need to upgrade before updating, so that property values will pass\n    //    through any property setters.\n    //  * We would like to process before upgrading so that we're sure that the\n    //    cloned fragment is inert and not disturbed by self-modifying DOM.\n    //  * We want custom elements to upgrade even in disconnected fragments.\n    //\n    // Given these constraints, with full custom elements support we would\n    // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n    //\n    // But Safari dooes not implement CustomElementRegistry#upgrade, so we\n    // can not implement that order and still have upgrade-before-update and\n    // upgrade disconnected fragments. So we instead sacrifice the\n    // process-before-upgrade constraint, since in Custom Elements v1 elements\n    // must not modify their light DOM in the constructor. We still have issues\n    // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n    // that don't strictly adhere to the no-modification rule because shadow\n    // DOM, which may be created in the constructor, is emulated by being placed\n    // in the light DOM.\n    //\n    // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n    // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n    // in one step.\n    //\n    // The Custom Elements v1 polyfill supports upgrade(), so the order when\n    // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n    // Connect.\n\n    const fragment = isCEPolyfill ?\n        this.template.element.content.cloneNode(true) as DocumentFragment :\n        document.importNode(this.template.element.content, true);\n\n    const stack: Node[] = [];\n    const parts = this.template.parts;\n    // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n    const walker = document.createTreeWalker(\n        fragment,\n        133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,\n        null,\n        false);\n    let partIndex = 0;\n    let nodeIndex = 0;\n    let part: TemplatePart;\n    let node = walker.nextNode();\n    // Loop through all the nodes and parts of a template\n    while (partIndex < parts.length) {\n      part = parts[partIndex];\n      if (!isTemplatePartActive(part)) {\n        this.__parts.push(undefined);\n        partIndex++;\n        continue;\n      }\n\n      // Progress the tree walker until we find our next part's node.\n      // Note that multiple parts may share the same node (attribute parts\n      // on a single element), so this loop may not run at all.\n      while (nodeIndex < part.index) {\n        nodeIndex++;\n        if (node!.nodeName === 'TEMPLATE') {\n          stack.push(node!);\n          walker.currentNode = (node as HTMLTemplateElement).content;\n        }\n        if ((node = walker.nextNode()) === null) {\n          // We've exhausted the content inside a nested template element.\n          // Because we still have parts (the outer for-loop), we know:\n          // - There is a template in the stack\n          // - The walker will find a nextNode outside the template\n          walker.currentNode = stack.pop()!;\n          node = walker.nextNode();\n        }\n      }\n\n      // We've arrived at our part's node.\n      if (part.type === 'node') {\n        const part = this.processor.handleTextExpression(this.options);\n        part.insertAfterNode(node!.previousSibling!);\n        this.__parts.push(part);\n      } else {\n        this.__parts.push(...this.processor.handleAttributeExpressions(\n            node as Element, part.name, part.strings, this.options));\n      }\n      partIndex++;\n    }\n\n    if (isCEPolyfill) {\n      document.adoptNode(fragment);\n      customElements.upgrade(fragment);\n    }\n    return fragment;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {reparentNodes} from './dom.js';\nimport {TemplateProcessor} from './template-processor.js';\nimport {boundAttributeSuffix, lastAttributeNameRegex, marker, nodeMarker} from './template.js';\n\nconst commentMarker = ` ${marker} `;\n\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nexport class TemplateResult {\n  readonly strings: TemplateStringsArray;\n  readonly values: ReadonlyArray<unknown>;\n  readonly type: string;\n  readonly processor: TemplateProcessor;\n\n  constructor(\n      strings: TemplateStringsArray, values: ReadonlyArray<unknown>,\n      type: string, processor: TemplateProcessor) {\n    this.strings = strings;\n    this.values = values;\n    this.type = type;\n    this.processor = processor;\n  }\n\n  /**\n   * Returns a string of HTML used to create a `<template>` element.\n   */\n  getHTML(): string {\n    const l = this.strings.length - 1;\n    let html = '';\n    let isCommentBinding = false;\n\n    for (let i = 0; i < l; i++) {\n      const s = this.strings[i];\n      // For each binding we want to determine the kind of marker to insert\n      // into the template source before it's parsed by the browser's HTML\n      // parser. The marker type is based on whether the expression is in an\n      // attribute, text, or comment poisition.\n      //   * For node-position bindings we insert a comment with the marker\n      //     sentinel as its text content, like <!--{{lit-guid}}-->.\n      //   * For attribute bindings we insert just the marker sentinel for the\n      //     first binding, so that we support unquoted attribute bindings.\n      //     Subsequent bindings can use a comment marker because multi-binding\n      //     attributes must be quoted.\n      //   * For comment bindings we insert just the marker sentinel so we don't\n      //     close the comment.\n      //\n      // The following code scans the template source, but is *not* an HTML\n      // parser. We don't need to track the tree structure of the HTML, only\n      // whether a binding is inside a comment, and if not, if it appears to be\n      // the first binding in an attribute.\n      const commentOpen = s.lastIndexOf('<!--');\n      // We're in comment position if we have a comment open with no following\n      // comment close. Because <-- can appear in an attribute value there can\n      // be false positives.\n      isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n          s.indexOf('-->', commentOpen + 1) === -1;\n      // Check to see if we have an attribute-like sequence preceeding the\n      // expression. This can match \"name=value\" like structures in text,\n      // comments, and attribute values, so there can be false-positives.\n      const attributeMatch = lastAttributeNameRegex.exec(s);\n      if (attributeMatch === null) {\n        // We're only in this branch if we don't have a attribute-like\n        // preceeding sequence. For comments, this guards against unusual\n        // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n        // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n        // below.\n        html += s + (isCommentBinding ? commentMarker : nodeMarker);\n      } else {\n        // For attributes we use just a marker sentinel, and also append a\n        // $lit$ suffix to the name to opt-out of attribute-specific parsing\n        // that IE and Edge do for style and certain SVG attributes.\n        html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n            attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n            marker;\n      }\n    }\n    html += this.strings[l];\n    return html;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = this.getHTML();\n    return template;\n  }\n}\n\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nexport class SVGTemplateResult extends TemplateResult {\n  getHTML(): string {\n    return `<svg>${super.getHTML()}</svg>`;\n  }\n\n  getTemplateElement(): HTMLTemplateElement {\n    const template = super.getTemplateElement();\n    const content = template.content;\n    const svgElement = content.firstChild!;\n    content.removeChild(svgElement);\n    reparentNodes(content, svgElement.firstChild);\n    return template;\n  }\n}\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {isDirective} from './directive.js';\nimport {removeNodes} from './dom.js';\nimport {noChange, nothing, Part} from './part.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {createMarker} from './template.js';\n\n// https://tc39.github.io/ecma262/#sec-typeof-operator\nexport type Primitive = null|undefined|boolean|number|string|Symbol|bigint;\nexport const isPrimitive = (value: unknown): value is Primitive => {\n  return (\n      value === null ||\n      !(typeof value === 'object' || typeof value === 'function'));\n};\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return Array.isArray(value) ||\n      // tslint:disable-next-line:no-any\n      !!(value && (value as any)[Symbol.iterator]);\n};\n\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attibute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nexport class AttributeCommitter {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  readonly parts: ReadonlyArray<AttributePart>;\n  dirty = true;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n    this.parts = [];\n    for (let i = 0; i < strings.length - 1; i++) {\n      (this.parts as AttributePart[])[i] = this._createPart();\n    }\n  }\n\n  /**\n   * Creates a single part. Override this to create a differnt type of part.\n   */\n  protected _createPart(): AttributePart {\n    return new AttributePart(this);\n  }\n\n  protected _getValue(): unknown {\n    const strings = this.strings;\n    const l = strings.length - 1;\n    let text = '';\n\n    for (let i = 0; i < l; i++) {\n      text += strings[i];\n      const part = this.parts[i];\n      if (part !== undefined) {\n        const v = part.value;\n        if (isPrimitive(v) || !isIterable(v)) {\n          text += typeof v === 'string' ? v : String(v);\n        } else {\n          for (const t of v) {\n            text += typeof t === 'string' ? t : String(t);\n          }\n        }\n      }\n    }\n\n    text += strings[l];\n    return text;\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      this.element.setAttribute(this.name, this._getValue() as string);\n    }\n  }\n}\n\n/**\n * A Part that controls all or part of an attribute value.\n */\nexport class AttributePart implements Part {\n  readonly committer: AttributeCommitter;\n  value: unknown = undefined;\n\n  constructor(committer: AttributeCommitter) {\n    this.committer = committer;\n  }\n\n  setValue(value: unknown): void {\n    if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n      this.value = value;\n      // If the value is a not a directive, dirty the committer so that it'll\n      // call setAttribute. If the value is a directive, it'll dirty the\n      // committer if it calls setValue().\n      if (!isDirective(value)) {\n        this.committer.dirty = true;\n      }\n    }\n  }\n\n  commit() {\n    while (isDirective(this.value)) {\n      const directive = this.value;\n      this.value = noChange;\n      directive(this);\n    }\n    if (this.value === noChange) {\n      return;\n    }\n    this.committer.commit();\n  }\n}\n\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nexport class NodePart implements Part {\n  readonly options: RenderOptions;\n  startNode!: Node;\n  endNode!: Node;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(options: RenderOptions) {\n    this.options = options;\n  }\n\n  /**\n   * Appends this part into a container.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendInto(container: Node) {\n    this.startNode = container.appendChild(createMarker());\n    this.endNode = container.appendChild(createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n   * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n   * such as those that appear in a literal section of a template.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterNode(ref: Node) {\n    this.startNode = ref;\n    this.endNode = ref.nextSibling!;\n  }\n\n  /**\n   * Appends this part into a parent part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  appendIntoPart(part: NodePart) {\n    part.__insert(this.startNode = createMarker());\n    part.__insert(this.endNode = createMarker());\n  }\n\n  /**\n   * Inserts this part after the `ref` part.\n   *\n   * This part must be empty, as its contents are not automatically moved.\n   */\n  insertAfterPart(ref: NodePart) {\n    ref.__insert(this.startNode = createMarker());\n    this.endNode = ref.endNode;\n    ref.endNode = this.startNode;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    const value = this.__pendingValue;\n    if (value === noChange) {\n      return;\n    }\n    if (isPrimitive(value)) {\n      if (value !== this.value) {\n        this.__commitText(value);\n      }\n    } else if (value instanceof TemplateResult) {\n      this.__commitTemplateResult(value);\n    } else if (value instanceof Node) {\n      this.__commitNode(value);\n    } else if (isIterable(value)) {\n      this.__commitIterable(value);\n    } else if (value === nothing) {\n      this.value = nothing;\n      this.clear();\n    } else {\n      // Fallback, will render the string representation\n      this.__commitText(value);\n    }\n  }\n\n  private __insert(node: Node) {\n    this.endNode.parentNode!.insertBefore(node, this.endNode);\n  }\n\n  private __commitNode(value: Node): void {\n    if (this.value === value) {\n      return;\n    }\n    this.clear();\n    this.__insert(value);\n    this.value = value;\n  }\n\n  private __commitText(value: unknown): void {\n    const node = this.startNode.nextSibling!;\n    value = value == null ? '' : value;\n    // If `value` isn't already a string, we explicitly convert it here in case\n    // it can't be implicitly converted - i.e. it's a symbol.\n    const valueAsString: string =\n        typeof value === 'string' ? value : String(value);\n    if (node === this.endNode.previousSibling &&\n        node.nodeType === 3 /* Node.TEXT_NODE */) {\n      // If we only have a single text node between the markers, we can just\n      // set its value, rather than replacing it.\n      // TODO(justinfagnani): Can we just check if this.value is primitive?\n      (node as Text).data = valueAsString;\n    } else {\n      this.__commitNode(document.createTextNode(valueAsString));\n    }\n    this.value = value;\n  }\n\n  private __commitTemplateResult(value: TemplateResult): void {\n    const template = this.options.templateFactory(value);\n    if (this.value instanceof TemplateInstance &&\n        this.value.template === template) {\n      this.value.update(value.values);\n    } else {\n      // Make sure we propagate the template processor from the TemplateResult\n      // so that we use its syntax extension, etc. The template factory comes\n      // from the render function options so that it can control template\n      // caching and preprocessing.\n      const instance =\n          new TemplateInstance(template, value.processor, this.options);\n      const fragment = instance._clone();\n      instance.update(value.values);\n      this.__commitNode(fragment);\n      this.value = instance;\n    }\n  }\n\n  private __commitIterable(value: Iterable<unknown>): void {\n    // For an Iterable, we create a new InstancePart per item, then set its\n    // value to the item. This is a little bit of overhead for every item in\n    // an Iterable, but it lets us recurse easily and efficiently update Arrays\n    // of TemplateResults that will be commonly returned from expressions like:\n    // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n\n    // If _value is an array, then the previous render was of an\n    // iterable and _value will contain the NodeParts from the previous\n    // render. If _value is not an array, clear this part and make a new\n    // array for NodeParts.\n    if (!Array.isArray(this.value)) {\n      this.value = [];\n      this.clear();\n    }\n\n    // Lets us keep track of how many items we stamped so we can clear leftover\n    // items from a previous render\n    const itemParts = this.value as NodePart[];\n    let partIndex = 0;\n    let itemPart: NodePart|undefined;\n\n    for (const item of value) {\n      // Try to reuse an existing part\n      itemPart = itemParts[partIndex];\n\n      // If no existing part, create a new one\n      if (itemPart === undefined) {\n        itemPart = new NodePart(this.options);\n        itemParts.push(itemPart);\n        if (partIndex === 0) {\n          itemPart.appendIntoPart(this);\n        } else {\n          itemPart.insertAfterPart(itemParts[partIndex - 1]);\n        }\n      }\n      itemPart.setValue(item);\n      itemPart.commit();\n      partIndex++;\n    }\n\n    if (partIndex < itemParts.length) {\n      // Truncate the parts array so _value reflects the current state\n      itemParts.length = partIndex;\n      this.clear(itemPart && itemPart.endNode);\n    }\n  }\n\n  clear(startNode: Node = this.startNode) {\n    removeNodes(\n        this.startNode.parentNode!, startNode.nextSibling!, this.endNode);\n  }\n}\n\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nexport class BooleanAttributePart implements Part {\n  readonly element: Element;\n  readonly name: string;\n  readonly strings: ReadonlyArray<string>;\n  value: unknown = undefined;\n  private __pendingValue: unknown = undefined;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n      throw new Error(\n          'Boolean attributes can only contain a single expression');\n    }\n    this.element = element;\n    this.name = name;\n    this.strings = strings;\n  }\n\n  setValue(value: unknown): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n    const value = !!this.__pendingValue;\n    if (this.value !== value) {\n      if (value) {\n        this.element.setAttribute(this.name, '');\n      } else {\n        this.element.removeAttribute(this.name);\n      }\n      this.value = value;\n    }\n    this.__pendingValue = noChange;\n  }\n}\n\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nexport class PropertyCommitter extends AttributeCommitter {\n  readonly single: boolean;\n\n  constructor(element: Element, name: string, strings: ReadonlyArray<string>) {\n    super(element, name, strings);\n    this.single =\n        (strings.length === 2 && strings[0] === '' && strings[1] === '');\n  }\n\n  protected _createPart(): PropertyPart {\n    return new PropertyPart(this);\n  }\n\n  protected _getValue() {\n    if (this.single) {\n      return this.parts[0].value;\n    }\n    return super._getValue();\n  }\n\n  commit(): void {\n    if (this.dirty) {\n      this.dirty = false;\n      // tslint:disable-next-line:no-any\n      (this.element as any)[this.name] = this._getValue();\n    }\n  }\n}\n\nexport class PropertyPart extends AttributePart {}\n\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the thrid\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n\ntry {\n  const options = {\n    get capture() {\n      eventOptionsSupported = true;\n      return false;\n    }\n  };\n  // tslint:disable-next-line:no-any\n  window.addEventListener('test', options as any, options);\n  // tslint:disable-next-line:no-any\n  window.removeEventListener('test', options as any, options);\n} catch (_e) {\n}\n\n\ntype EventHandlerWithOptions =\n    EventListenerOrEventListenerObject&Partial<AddEventListenerOptions>;\nexport class EventPart implements Part {\n  readonly element: Element;\n  readonly eventName: string;\n  readonly eventContext?: EventTarget;\n  value: undefined|EventHandlerWithOptions = undefined;\n  private __options?: AddEventListenerOptions;\n  private __pendingValue: undefined|EventHandlerWithOptions = undefined;\n  private readonly __boundHandleEvent: (event: Event) => void;\n\n  constructor(element: Element, eventName: string, eventContext?: EventTarget) {\n    this.element = element;\n    this.eventName = eventName;\n    this.eventContext = eventContext;\n    this.__boundHandleEvent = (e) => this.handleEvent(e);\n  }\n\n  setValue(value: undefined|EventHandlerWithOptions): void {\n    this.__pendingValue = value;\n  }\n\n  commit() {\n    while (isDirective(this.__pendingValue)) {\n      const directive = this.__pendingValue;\n      this.__pendingValue = noChange as EventHandlerWithOptions;\n      directive(this);\n    }\n    if (this.__pendingValue === noChange) {\n      return;\n    }\n\n    const newListener = this.__pendingValue;\n    const oldListener = this.value;\n    const shouldRemoveListener = newListener == null ||\n        oldListener != null &&\n            (newListener.capture !== oldListener.capture ||\n             newListener.once !== oldListener.once ||\n             newListener.passive !== oldListener.passive);\n    const shouldAddListener =\n        newListener != null && (oldListener == null || shouldRemoveListener);\n\n    if (shouldRemoveListener) {\n      this.element.removeEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    if (shouldAddListener) {\n      this.__options = getOptions(newListener);\n      this.element.addEventListener(\n          this.eventName, this.__boundHandleEvent, this.__options);\n    }\n    this.value = newListener;\n    this.__pendingValue = noChange as EventHandlerWithOptions;\n  }\n\n  handleEvent(event: Event) {\n    if (typeof this.value === 'function') {\n      this.value.call(this.eventContext || this.element, event);\n    } else {\n      (this.value as EventListenerObject).handleEvent(event);\n    }\n  }\n}\n\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o: AddEventListenerOptions|undefined) => o &&\n    (eventOptionsSupported ?\n         {capture: o.capture, passive: o.passive, once: o.once} :\n         o.capture as AddEventListenerOptions);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {Part} from './part.js';\nimport {AttributeCommitter, BooleanAttributePart, EventPart, NodePart, PropertyCommitter} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {TemplateProcessor} from './template-processor.js';\n\n/**\n * Creates Parts when a template is instantiated.\n */\nexport class DefaultTemplateProcessor implements TemplateProcessor {\n  /**\n   * Create parts for an attribute-position binding, given the event, attribute\n   * name, and string literals.\n   *\n   * @param element The element containing the binding\n   * @param name  The attribute name\n   * @param strings The string literals. There are always at least two strings,\n   *   event for fully-controlled bindings with a single expression.\n   */\n  handleAttributeExpressions(\n      element: Element, name: string, strings: string[],\n      options: RenderOptions): ReadonlyArray<Part> {\n    const prefix = name[0];\n    if (prefix === '.') {\n      const committer = new PropertyCommitter(element, name.slice(1), strings);\n      return committer.parts;\n    }\n    if (prefix === '@') {\n      return [new EventPart(element, name.slice(1), options.eventContext)];\n    }\n    if (prefix === '?') {\n      return [new BooleanAttributePart(element, name.slice(1), strings)];\n    }\n    const committer = new AttributeCommitter(element, name, strings);\n    return committer.parts;\n  }\n  /**\n   * Create parts for a text-position binding.\n   * @param templateFactory\n   */\n  handleTextExpression(options: RenderOptions) {\n    return new NodePart(options);\n  }\n}\n\nexport const defaultTemplateProcessor = new DefaultTemplateProcessor();\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * @module lit-html\n */\n\nimport {removeNodes} from './dom.js';\nimport {NodePart} from './parts.js';\nimport {RenderOptions} from './render-options.js';\nimport {templateFactory} from './template-factory.js';\n\nexport const parts = new WeakMap<Node, NodePart>();\n\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment,\n     options?: Partial<RenderOptions>) => {\n      let part = parts.get(container);\n      if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart({\n                               templateFactory,\n                               ...options,\n                             }));\n        part.appendInto(container);\n      }\n      part.setValue(result);\n      part.commit();\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n *\n * Main lit-html module.\n *\n * Main exports:\n *\n * -  [[html]]\n * -  [[svg]]\n * -  [[render]]\n *\n * @module lit-html\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {defaultTemplateProcessor} from './lib/default-template-processor.js';\nimport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\n\nexport {DefaultTemplateProcessor, defaultTemplateProcessor} from './lib/default-template-processor.js';\nexport {directive, DirectiveFn, isDirective} from './lib/directive.js';\n// TODO(justinfagnani): remove line when we get NodePart moving methods\nexport {removeNodes, reparentNodes} from './lib/dom.js';\nexport {noChange, nothing, Part} from './lib/part.js';\nexport {AttributeCommitter, AttributePart, BooleanAttributePart, EventPart, isIterable, isPrimitive, NodePart, PropertyCommitter, PropertyPart} from './lib/parts.js';\nexport {RenderOptions} from './lib/render-options.js';\nexport {parts, render} from './lib/render.js';\nexport {templateCaches, templateFactory} from './lib/template-factory.js';\nexport {TemplateInstance} from './lib/template-instance.js';\nexport {TemplateProcessor} from './lib/template-processor.js';\nexport {SVGTemplateResult, TemplateResult} from './lib/template-result.js';\nexport {createMarker, isTemplatePartActive, Template} from './lib/template.js';\n\ndeclare global {\n  interface Window {\n    litHtmlVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.2');\n\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nexport const html = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nexport const svg = (strings: TemplateStringsArray, ...values: unknown[]) =>\n    new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * Module to add shady DOM/shady CSS polyfill support to lit-html template\n * rendering. See the [[render]] method for details.\n *\n * @module shady-render\n * @preferred\n */\n\n/**\n * Do not remove this comment; it keeps typedoc from misplacing the module\n * docs.\n */\nimport {removeNodes} from './dom.js';\nimport {insertNodeIntoTemplate, removeNodesFromTemplate} from './modify-template.js';\nimport {RenderOptions} from './render-options.js';\nimport {parts, render as litRender} from './render.js';\nimport {templateCaches} from './template-factory.js';\nimport {TemplateInstance} from './template-instance.js';\nimport {TemplateResult} from './template-result.js';\nimport {marker, Template} from './template.js';\n\nexport {html, svg, TemplateResult} from '../lit-html.js';\n\n// Get a key to lookup in `templateCaches`.\nconst getTemplateCacheKey = (type: string, scopeName: string) =>\n    `${type}--${scopeName}`;\n\nlet compatibleShadyCSSVersion = true;\n\nif (typeof window.ShadyCSS === 'undefined') {\n  compatibleShadyCSSVersion = false;\n} else if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n  console.warn(\n      `Incompatible ShadyCSS version detected. ` +\n      `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n      `@webcomponents/shadycss@1.3.1.`);\n  compatibleShadyCSSVersion = false;\n}\n\n/**\n * Template factory which scopes template DOM using ShadyCSS.\n * @param scopeName {string}\n */\nconst shadyTemplateFactory = (scopeName: string) =>\n    (result: TemplateResult) => {\n      const cacheKey = getTemplateCacheKey(result.type, scopeName);\n      let templateCache = templateCaches.get(cacheKey);\n      if (templateCache === undefined) {\n        templateCache = {\n          stringsArray: new WeakMap<TemplateStringsArray, Template>(),\n          keyString: new Map<string, Template>()\n        };\n        templateCaches.set(cacheKey, templateCache);\n      }\n\n      let template = templateCache.stringsArray.get(result.strings);\n      if (template !== undefined) {\n        return template;\n      }\n\n      const key = result.strings.join(marker);\n      template = templateCache.keyString.get(key);\n      if (template === undefined) {\n        const element = result.getTemplateElement();\n        if (compatibleShadyCSSVersion) {\n          window.ShadyCSS!.prepareTemplateDom(element, scopeName);\n        }\n        template = new Template(result, element);\n        templateCache.keyString.set(key, template);\n      }\n      templateCache.stringsArray.set(result.strings, template);\n      return template;\n    };\n\nconst TEMPLATE_TYPES = ['html', 'svg'];\n\n/**\n * Removes all style elements from Templates for the given scopeName.\n */\nconst removeStylesFromLitTemplates = (scopeName: string) => {\n  TEMPLATE_TYPES.forEach((type) => {\n    const templates = templateCaches.get(getTemplateCacheKey(type, scopeName));\n    if (templates !== undefined) {\n      templates.keyString.forEach((template) => {\n        const {element: {content}} = template;\n        // IE 11 doesn't support the iterable param Set constructor\n        const styles = new Set<Element>();\n        Array.from(content.querySelectorAll('style')).forEach((s: Element) => {\n          styles.add(s);\n        });\n        removeNodesFromTemplate(template, styles);\n      });\n    }\n  });\n};\n\nconst shadyRenderSet = new Set<string>();\n\n/**\n * For the given scope name, ensures that ShadyCSS style scoping is performed.\n * This is done just once per scope name so the fragment and template cannot\n * be modified.\n * (1) extracts styles from the rendered fragment and hands them to ShadyCSS\n * to be scoped and appended to the document\n * (2) removes style elements from all lit-html Templates for this scope name.\n *\n * Note, <style> elements can only be placed into templates for the\n * initial rendering of the scope. If <style> elements are included in templates\n * dynamically rendered to the scope (after the first scope render), they will\n * not be scoped and the <style> will be left in the template and rendered\n * output.\n */\nconst prepareTemplateStyles =\n    (scopeName: string, renderedDOM: DocumentFragment, template?: Template) => {\n      shadyRenderSet.add(scopeName);\n      // If `renderedDOM` is stamped from a Template, then we need to edit that\n      // Template's underlying template element. Otherwise, we create one here\n      // to give to ShadyCSS, which still requires one while scoping.\n      const templateElement =\n          !!template ? template.element : document.createElement('template');\n      // Move styles out of rendered DOM and store.\n      const styles = renderedDOM.querySelectorAll('style');\n      const {length} = styles;\n      // If there are no styles, skip unnecessary work\n      if (length === 0) {\n        // Ensure prepareTemplateStyles is called to support adding\n        // styles via `prepareAdoptedCssText` since that requires that\n        // `prepareTemplateStyles` is called.\n        //\n        // ShadyCSS will only update styles containing @apply in the template\n        // given to `prepareTemplateStyles`. If no lit Template was given,\n        // ShadyCSS will not be able to update uses of @apply in any relevant\n        // template. However, this is not a problem because we only create the\n        // template for the purpose of supporting `prepareAdoptedCssText`,\n        // which doesn't support @apply at all.\n        window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n        return;\n      }\n      const condensedStyle = document.createElement('style');\n      // Collect styles into a single style. This helps us make sure ShadyCSS\n      // manipulations will not prevent us from being able to fix up template\n      // part indices.\n      // NOTE: collecting styles is inefficient for browsers but ShadyCSS\n      // currently does this anyway. When it does not, this should be changed.\n      for (let i = 0; i < length; i++) {\n        const style = styles[i];\n        style.parentNode!.removeChild(style);\n        condensedStyle.textContent! += style.textContent;\n      }\n      // Remove styles from nested templates in this scope.\n      removeStylesFromLitTemplates(scopeName);\n      // And then put the condensed style into the \"root\" template passed in as\n      // `template`.\n      const content = templateElement.content;\n      if (!!template) {\n        insertNodeIntoTemplate(template, condensedStyle, content.firstChild);\n      } else {\n        content.insertBefore(condensedStyle, content.firstChild);\n      }\n      // Note, it's important that ShadyCSS gets the template that `lit-html`\n      // will actually render so that it can update the style inside when\n      // needed (e.g. @apply native Shadow DOM case).\n      window.ShadyCSS!.prepareTemplateStyles(templateElement, scopeName);\n      const style = content.querySelector('style');\n      if (window.ShadyCSS!.nativeShadow && style !== null) {\n        // When in native Shadow DOM, ensure the style created by ShadyCSS is\n        // included in initially rendered output (`renderedDOM`).\n        renderedDOM.insertBefore(style.cloneNode(true), renderedDOM.firstChild);\n      } else if (!!template) {\n        // When no style is left in the template, parts will be broken as a\n        // result. To fix this, we put back the style node ShadyCSS removed\n        // and then tell lit to remove that node from the template.\n        // There can be no style in the template in 2 cases (1) when Shady DOM\n        // is in use, ShadyCSS removes all styles, (2) when native Shadow DOM\n        // is in use ShadyCSS removes the style if it contains no content.\n        // NOTE, ShadyCSS creates its own style so we can safely add/remove\n        // `condensedStyle` here.\n        content.insertBefore(condensedStyle, content.firstChild);\n        const removes = new Set<Node>();\n        removes.add(condensedStyle);\n        removeNodesFromTemplate(template, removes);\n      }\n    };\n\nexport interface ShadyRenderOptions extends Partial<RenderOptions> {\n  scopeName: string;\n}\n\n/**\n * Extension to the standard `render` method which supports rendering\n * to ShadowRoots when the ShadyDOM (https://github.com/webcomponents/shadydom)\n * and ShadyCSS (https://github.com/webcomponents/shadycss) polyfills are used\n * or when the webcomponentsjs\n * (https://github.com/webcomponents/webcomponentsjs) polyfill is used.\n *\n * Adds a `scopeName` option which is used to scope element DOM and stylesheets\n * when native ShadowDOM is unavailable. The `scopeName` will be added to\n * the class attribute of all rendered DOM. In addition, any style elements will\n * be automatically re-written with this `scopeName` selector and moved out\n * of the rendered DOM and into the document `<head>`.\n *\n * It is common to use this render method in conjunction with a custom element\n * which renders a shadowRoot. When this is done, typically the element's\n * `localName` should be used as the `scopeName`.\n *\n * In addition to DOM scoping, ShadyCSS also supports a basic shim for css\n * custom properties (needed only on older browsers like IE11) and a shim for\n * a deprecated feature called `@apply` that supports applying a set of css\n * custom properties to a given location.\n *\n * Usage considerations:\n *\n * * Part values in `<style>` elements are only applied the first time a given\n * `scopeName` renders. Subsequent changes to parts in style elements will have\n * no effect. Because of this, parts in style elements should only be used for\n * values that will never change, for example parts that set scope-wide theme\n * values or parts which render shared style elements.\n *\n * * Note, due to a limitation of the ShadyDOM polyfill, rendering in a\n * custom element's `constructor` is not supported. Instead rendering should\n * either done asynchronously, for example at microtask timing (for example\n * `Promise.resolve()`), or be deferred until the first time the element's\n * `connectedCallback` runs.\n *\n * Usage considerations when using shimmed custom properties or `@apply`:\n *\n * * Whenever any dynamic changes are made which affect\n * css custom properties, `ShadyCSS.styleElement(element)` must be called\n * to update the element. There are two cases when this is needed:\n * (1) the element is connected to a new parent, (2) a class is added to the\n * element that causes it to match different custom properties.\n * To address the first case when rendering a custom element, `styleElement`\n * should be called in the element's `connectedCallback`.\n *\n * * Shimmed custom properties may only be defined either for an entire\n * shadowRoot (for example, in a `:host` rule) or via a rule that directly\n * matches an element with a shadowRoot. In other words, instead of flowing from\n * parent to child as do native css custom properties, shimmed custom properties\n * flow only from shadowRoots to nested shadowRoots.\n *\n * * When using `@apply` mixing css shorthand property names with\n * non-shorthand names (for example `border` and `border-width`) is not\n * supported.\n */\nexport const render =\n    (result: unknown,\n     container: Element|DocumentFragment|ShadowRoot,\n     options: ShadyRenderOptions) => {\n      if (!options || typeof options !== 'object' || !options.scopeName) {\n        throw new Error('The `scopeName` option is required.');\n      }\n      const scopeName = options.scopeName;\n      const hasRendered = parts.has(container);\n      const needsScoping = compatibleShadyCSSVersion &&\n          container.nodeType === 11 /* Node.DOCUMENT_FRAGMENT_NODE */ &&\n          !!(container as ShadowRoot).host;\n      // Handle first render to a scope specially...\n      const firstScopeRender = needsScoping && !shadyRenderSet.has(scopeName);\n      // On first scope render, render into a fragment; this cannot be a single\n      // fragment that is reused since nested renders can occur synchronously.\n      const renderContainer =\n          firstScopeRender ? document.createDocumentFragment() : container;\n      litRender(\n          result,\n          renderContainer,\n          {templateFactory: shadyTemplateFactory(scopeName), ...options} as\n              RenderOptions);\n      // When performing first scope render,\n      // (1) We've rendered into a fragment so that there's a chance to\n      // `prepareTemplateStyles` before sub-elements hit the DOM\n      // (which might cause them to render based on a common pattern of\n      // rendering in a custom element's `connectedCallback`);\n      // (2) Scope the template with ShadyCSS one time only for this scope.\n      // (3) Render the fragment into the container and make sure the\n      // container knows its `part` is the one we just rendered. This ensures\n      // DOM will be re-used on subsequent renders.\n      if (firstScopeRender) {\n        const part = parts.get(renderContainer)!;\n        parts.delete(renderContainer);\n        // ShadyCSS might have style sheets (e.g. from `prepareAdoptedCssText`)\n        // that should apply to `renderContainer` even if the rendered value is\n        // not a TemplateInstance. However, it will only insert scoped styles\n        // into the document if `prepareTemplateStyles` has already been called\n        // for the given scope name.\n        const template = part.value instanceof TemplateInstance ?\n            part.value.template :\n            undefined;\n        prepareTemplateStyles(\n            scopeName, renderContainer as DocumentFragment, template);\n        removeNodes(container, container.firstChild);\n        container.appendChild(renderContainer);\n        parts.set(container, part);\n      }\n      // After elements have hit the DOM, update styling if this is the\n      // initial render to this container.\n      // This is needed whenever dynamic changes are made so it would be\n      // safest to do every render; however, this would regress performance\n      // so we leave it up to the user to call `ShadyCSS.styleElement`\n      // for dynamic changes.\n      if (!hasRendered && needsScoping) {\n        window.ShadyCSS!.styleElement((container as ShadowRoot).host);\n      }\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    <P extends PropertyKey>(prop: P, _obj: unknown): P => prop;\n\ndeclare global {\n  var JSCompiler_renameProperty: <P extends PropertyKey>(\n      prop: P, _obj: unknown) => P;\n\n  interface Window {\n    JSCompiler_renameProperty: typeof JSCompiler_renameProperty;\n  }\n}\n\n/**\n * Converts property values to and from attribute values.\n */\nexport interface ComplexAttributeConverter<Type = unknown, TypeHint = unknown> {\n  /**\n   * Function called to convert an attribute value to a property\n   * value.\n   */\n  fromAttribute?(value: string|null, type?: TypeHint): Type;\n\n  /**\n   * Function called to convert a property value to an attribute\n   * value.\n   *\n   * It returns unknown instead of string, to be compatible with\n   * https://github.com/WICG/trusted-types (and similar efforts).\n   */\n  toAttribute?(value: Type, type?: TypeHint): unknown;\n}\n\ntype AttributeConverter<Type = unknown, TypeHint = unknown> =\n    ComplexAttributeConverter<Type>|((value: string, type?: TypeHint) => Type);\n\n/**\n * Defines options for a property accessor.\n */\nexport interface PropertyDeclaration<Type = unknown, TypeHint = unknown> {\n  /**\n   * Indicates how and whether the property becomes an observed attribute.\n   * If the value is `false`, the property is not added to `observedAttributes`.\n   * If true or absent, the lowercased property name is observed (e.g. `fooBar`\n   * becomes `foobar`). If a string, the string value is observed (e.g\n   * `attribute: 'foo-bar'`).\n   */\n  readonly attribute?: boolean|string;\n\n  /**\n   * Indicates the type of the property. This is used only as a hint for the\n   * `converter` to determine how to convert the attribute\n   * to/from a property.\n   */\n  readonly type?: TypeHint;\n\n  /**\n   * Indicates how to convert the attribute to/from a property. If this value\n   * is a function, it is used to convert the attribute value a the property\n   * value. If it's an object, it can have keys for `fromAttribute` and\n   * `toAttribute`. If no `toAttribute` function is provided and\n   * `reflect` is set to `true`, the property value is set directly to the\n   * attribute. A default `converter` is used if none is provided; it supports\n   * `Boolean`, `String`, `Number`, `Object`, and `Array`. Note,\n   * when a property changes and the converter is used to update the attribute,\n   * the property is never updated again as a result of the attribute changing,\n   * and vice versa.\n   */\n  readonly converter?: AttributeConverter<Type, TypeHint>;\n\n  /**\n   * Indicates if the property should reflect to an attribute.\n   * If `true`, when the property is set, the attribute is set using the\n   * attribute name determined according to the rules for the `attribute`\n   * property option and the value of the property converted using the rules\n   * from the `converter` property option.\n   */\n  readonly reflect?: boolean;\n\n  /**\n   * A function that indicates if a property should be considered changed when\n   * it is set. The function should take the `newValue` and `oldValue` and\n   * return `true` if an update should be requested.\n   */\n  hasChanged?(value: Type, oldValue: Type): boolean;\n\n  /**\n   * Indicates whether an accessor will be created for this property. By\n   * default, an accessor will be generated for this property that requests an\n   * update when set. If this flag is `true`, no accessor will be created, and\n   * it will be the user's responsibility to call\n   * `this.requestUpdate(propertyName, oldValue)` to request an update when\n   * the property changes.\n   */\n  readonly noAccessor?: boolean;\n}\n\n/**\n * Map of properties to PropertyDeclaration options. For each property an\n * accessor is made, and the property is processed according to the\n * PropertyDeclaration options.\n */\nexport interface PropertyDeclarations {\n  readonly [key: string]: PropertyDeclaration;\n}\n\ntype PropertyDeclarationMap = Map<PropertyKey, PropertyDeclaration>;\n\ntype AttributeMap = Map<string, PropertyKey>;\n\nexport type PropertyValues = Map<PropertyKey, unknown>;\n\nexport const defaultConverter: ComplexAttributeConverter = {\n\n  toAttribute(value: unknown, type?: unknown): unknown {\n    switch (type) {\n      case Boolean:\n        return value ? '' : null;\n      case Object:\n      case Array:\n        // if the value is `null` or `undefined` pass this through\n        // to allow removing/no change behavior.\n        return value == null ? value : JSON.stringify(value);\n    }\n    return value;\n  },\n\n  fromAttribute(value: string|null, type?: unknown) {\n    switch (type) {\n      case Boolean:\n        return value !== null;\n      case Number:\n        return value === null ? null : Number(value);\n      case Object:\n      case Array:\n        return JSON.parse(value!);\n    }\n    return value;\n  }\n\n};\n\nexport interface HasChanged {\n  (value: unknown, old: unknown): boolean;\n}\n\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nexport const notEqual: HasChanged = (value: unknown, old: unknown): boolean => {\n  // This ensures (old==NaN, value==NaN) always returns false\n  return old !== value && (old === old || value === value);\n};\n\nconst defaultPropertyDeclaration: PropertyDeclaration = {\n  attribute: true,\n  type: String,\n  converter: defaultConverter,\n  reflect: false,\n  hasChanged: notEqual\n};\n\nconst microtaskPromise = Promise.resolve(true);\n\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\nconst STATE_HAS_CONNECTED = 1 << 5;\ntype UpdateState = typeof STATE_HAS_UPDATED|typeof STATE_UPDATE_REQUESTED|\n    typeof STATE_IS_REFLECTING_TO_ATTRIBUTE|\n    typeof STATE_IS_REFLECTING_TO_PROPERTY|typeof STATE_HAS_CONNECTED;\n\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n */\nexport abstract class UpdatingElement extends HTMLElement {\n  /*\n   * Due to closure compiler ES6 compilation bugs, @nocollapse is required on\n   * all static methods and properties with initializers.  Reference:\n   * - https://github.com/google/closure-compiler/issues/1776\n   */\n\n  /**\n   * Maps attribute names to properties; for example `foobar` attribute to\n   * `fooBar` property. Created lazily on user subclasses when finalizing the\n   * class.\n   */\n  private static _attributeToPropertyMap: AttributeMap;\n\n  /**\n   * Marks class as having finished creating properties.\n   */\n  protected static[finalized] = true;\n\n  /**\n   * Memoized list of all class properties, including any superclass properties.\n   * Created lazily on user subclasses when finalizing the class.\n   */\n  private static _classProperties?: PropertyDeclarationMap;\n\n  /**\n   * User-supplied object that maps property names to `PropertyDeclaration`\n   * objects containing options for configuring the property.\n   */\n  static properties: PropertyDeclarations;\n\n  /**\n   * Returns a list of attributes corresponding to the registered properties.\n   * @nocollapse\n   */\n  static get observedAttributes() {\n    // note: piggy backing on this to ensure we're finalized.\n    this.finalize();\n    const attributes: string[] = [];\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    this._classProperties!.forEach((v, p) => {\n      const attr = this._attributeNameForProperty(p, v);\n      if (attr !== undefined) {\n        this._attributeToPropertyMap.set(attr, p);\n        attributes.push(attr);\n      }\n    });\n    return attributes;\n  }\n\n  /**\n   * Ensures the private `_classProperties` property metadata is created.\n   * In addition to `finalize` this is also called in `createProperty` to\n   * ensure the `@property` decorator can add property metadata.\n   */\n  /** @nocollapse */\n  private static _ensureClassProperties() {\n    // ensure private storage for property declarations.\n    if (!this.hasOwnProperty(\n            JSCompiler_renameProperty('_classProperties', this))) {\n      this._classProperties = new Map();\n      // NOTE: Workaround IE11 not supporting Map constructor argument.\n      const superProperties: PropertyDeclarationMap =\n          Object.getPrototypeOf(this)._classProperties;\n      if (superProperties !== undefined) {\n        superProperties.forEach(\n            (v: PropertyDeclaration, k: PropertyKey) =>\n                this._classProperties!.set(k, v));\n      }\n    }\n  }\n\n  /**\n   * Creates a property accessor on the element prototype if one does not exist.\n   * The property setter calls the property's `hasChanged` property option\n   * or uses a strict identity check to determine whether or not to request\n   * an update.\n   * @nocollapse\n   */\n  static createProperty(\n      name: PropertyKey,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    // Note, since this can be called by the `@property` decorator which\n    // is called before `finalize`, we ensure storage exists for property\n    // metadata.\n    this._ensureClassProperties();\n    this._classProperties!.set(name, options);\n    // Do not generate an accessor if the prototype already has one, since\n    // it would be lost otherwise and that would never be the user's intention;\n    // Instead, we expect users to call `requestUpdate` themselves from\n    // user-defined accessors. Note that if the super has an accessor we will\n    // still overwrite it\n    if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n      return;\n    }\n    const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n    Object.defineProperty(this.prototype, name, {\n      // tslint:disable-next-line:no-any no symbol in index\n      get(): any {\n        return (this as {[key: string]: unknown})[key as string];\n      },\n      set(this: UpdatingElement, value: unknown) {\n        const oldValue =\n            (this as {} as {[key: string]: unknown})[name as string];\n        (this as {} as {[key: string]: unknown})[key as string] = value;\n        (this as unknown as UpdatingElement)._requestUpdate(name, oldValue);\n      },\n      configurable: true,\n      enumerable: true\n    });\n  }\n\n  /**\n   * Creates property accessors for registered properties and ensures\n   * any superclasses are also finalized.\n   * @nocollapse\n   */\n  protected static finalize() {\n    // finalize any superclasses\n    const superCtor = Object.getPrototypeOf(this);\n    if (!superCtor.hasOwnProperty(finalized)) {\n      superCtor.finalize();\n    }\n    this[finalized] = true;\n    this._ensureClassProperties();\n    // initialize Map populated in observedAttributes\n    this._attributeToPropertyMap = new Map();\n    // make any properties\n    // Note, only process \"own\" properties since this element will inherit\n    // any properties defined on the superClass, and finalization ensures\n    // the entire prototype chain is finalized.\n    if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n      const props = this.properties;\n      // support symbols in properties (IE11 does not support this)\n      const propKeys = [\n        ...Object.getOwnPropertyNames(props),\n        ...(typeof Object.getOwnPropertySymbols === 'function') ?\n            Object.getOwnPropertySymbols(props) :\n            []\n      ];\n      // This for/of is ok because propKeys is an array\n      for (const p of propKeys) {\n        // note, use of `any` is due to TypeSript lack of support for symbol in\n        // index types\n        // tslint:disable-next-line:no-any no symbol in index\n        this.createProperty(p, (props as any)[p]);\n      }\n    }\n  }\n\n  /**\n   * Returns the property name for the given attribute `name`.\n   * @nocollapse\n   */\n  private static _attributeNameForProperty(\n      name: PropertyKey, options: PropertyDeclaration) {\n    const attribute = options.attribute;\n    return attribute === false ?\n        undefined :\n        (typeof attribute === 'string' ?\n             attribute :\n             (typeof name === 'string' ? name.toLowerCase() : undefined));\n  }\n\n  /**\n   * Returns true if a property should request an update.\n   * Called when a property value is set and uses the `hasChanged`\n   * option for the property if present or a strict identity check.\n   * @nocollapse\n   */\n  private static _valueHasChanged(\n      value: unknown, old: unknown, hasChanged: HasChanged = notEqual) {\n    return hasChanged(value, old);\n  }\n\n  /**\n   * Returns the property value for the given attribute value.\n   * Called via the `attributeChangedCallback` and uses the property's\n   * `converter` or `converter.fromAttribute` property option.\n   * @nocollapse\n   */\n  private static _propertyValueFromAttribute(\n      value: string|null, options: PropertyDeclaration) {\n    const type = options.type;\n    const converter = options.converter || defaultConverter;\n    const fromAttribute =\n        (typeof converter === 'function' ? converter : converter.fromAttribute);\n    return fromAttribute ? fromAttribute(value, type) : value;\n  }\n\n  /**\n   * Returns the attribute value for the given property value. If this\n   * returns undefined, the property will *not* be reflected to an attribute.\n   * If this returns null, the attribute will be removed, otherwise the\n   * attribute will be set to the value.\n   * This uses the property's `reflect` and `type.toAttribute` property options.\n   * @nocollapse\n   */\n  private static _propertyValueToAttribute(\n      value: unknown, options: PropertyDeclaration) {\n    if (options.reflect === undefined) {\n      return;\n    }\n    const type = options.type;\n    const converter = options.converter;\n    const toAttribute =\n        converter && (converter as ComplexAttributeConverter).toAttribute ||\n        defaultConverter.toAttribute;\n    return toAttribute!(value, type);\n  }\n\n  private _updateState: UpdateState = 0;\n  private _instanceProperties: PropertyValues|undefined = undefined;\n  private _updatePromise: Promise<unknown> = microtaskPromise;\n  private _hasConnectedResolver: (() => void)|undefined = undefined;\n\n  /**\n   * Map with keys for any properties that have changed since the last\n   * update cycle with previous values.\n   */\n  private _changedProperties: PropertyValues = new Map();\n\n  /**\n   * Map with keys of properties that should be reflected when updated.\n   */\n  private _reflectingProperties: Map<PropertyKey, PropertyDeclaration>|\n      undefined = undefined;\n\n  constructor() {\n    super();\n    this.initialize();\n  }\n\n  /**\n   * Performs element initialization. By default captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    this._saveInstanceProperties();\n    // ensures first update will be caught by an early access of\n    // `updateComplete`\n    this._requestUpdate();\n  }\n\n  /**\n   * Fixes any properties set on the instance before upgrade time.\n   * Otherwise these would shadow the accessor and break these properties.\n   * The properties are stored in a Map which is played back after the\n   * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n   * (<=41), properties created for native platform properties like (`id` or\n   * `name`) may not have default values set in the element constructor. On\n   * these browsers native properties appear on instances and therefore their\n   * default value will overwrite any element default (e.g. if the element sets\n   * this.id = 'id' in the constructor, the 'id' will become '' since this is\n   * the native platform default).\n   */\n  private _saveInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    (this.constructor as typeof UpdatingElement)\n        ._classProperties!.forEach((_v, p) => {\n          if (this.hasOwnProperty(p)) {\n            const value = this[p as keyof this];\n            delete this[p as keyof this];\n            if (!this._instanceProperties) {\n              this._instanceProperties = new Map();\n            }\n            this._instanceProperties.set(p, value);\n          }\n        });\n  }\n\n  /**\n   * Applies previously saved instance properties.\n   */\n  private _applyInstanceProperties() {\n    // Use forEach so this works even if for/of loops are compiled to for loops\n    // expecting arrays\n    // tslint:disable-next-line:no-any\n    this._instanceProperties!.forEach((v, p) => (this as any)[p] = v);\n    this._instanceProperties = undefined;\n  }\n\n  connectedCallback() {\n    this._updateState = this._updateState | STATE_HAS_CONNECTED;\n    // Ensure first connection completes an update. Updates cannot complete\n    // before connection and if one is pending connection the\n    // `_hasConnectionResolver` will exist. If so, resolve it to complete the\n    // update, otherwise requestUpdate.\n    if (this._hasConnectedResolver) {\n      this._hasConnectedResolver();\n      this._hasConnectedResolver = undefined;\n    }\n  }\n\n  /**\n   * Allows for `super.disconnectedCallback()` in extensions while\n   * reserving the possibility of making non-breaking feature additions\n   * when disconnecting at some point in the future.\n   */\n  disconnectedCallback() {\n  }\n\n  /**\n   * Synchronizes property values when attributes change.\n   */\n  attributeChangedCallback(name: string, old: string|null, value: string|null) {\n    if (old !== value) {\n      this._attributeToProperty(name, value);\n    }\n  }\n\n  private _propertyToAttribute(\n      name: PropertyKey, value: unknown,\n      options: PropertyDeclaration = defaultPropertyDeclaration) {\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const attr = ctor._attributeNameForProperty(name, options);\n    if (attr !== undefined) {\n      const attrValue = ctor._propertyValueToAttribute(value, options);\n      // an undefined value does not change the attribute.\n      if (attrValue === undefined) {\n        return;\n      }\n      // Track if the property is being reflected to avoid\n      // setting the property again via `attributeChangedCallback`. Note:\n      // 1. this takes advantage of the fact that the callback is synchronous.\n      // 2. will behave incorrectly if multiple attributes are in the reaction\n      // stack at time of calling. However, since we process attributes\n      // in `update` this should not be possible (or an extreme corner case\n      // that we'd like to discover).\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n      if (attrValue == null) {\n        this.removeAttribute(attr);\n      } else {\n        this.setAttribute(attr, attrValue as string);\n      }\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n    }\n  }\n\n  private _attributeToProperty(name: string, value: string|null) {\n    // Use tracking info to avoid deserializing attribute value if it was\n    // just set from a property setter.\n    if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n      return;\n    }\n    const ctor = (this.constructor as typeof UpdatingElement);\n    const propName = ctor._attributeToPropertyMap.get(name);\n    if (propName !== undefined) {\n      const options =\n          ctor._classProperties!.get(propName) || defaultPropertyDeclaration;\n      // mark state reflecting\n      this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n      this[propName as keyof this] =\n          // tslint:disable-next-line:no-any\n          ctor._propertyValueFromAttribute(value, options) as any;\n      // mark state not reflecting\n      this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n    }\n  }\n\n  /**\n   * This private version of `requestUpdate` does not access or return the\n   * `updateComplete` promise. This promise can be overridden and is therefore\n   * not free to access.\n   */\n  private _requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    let shouldRequestUpdate = true;\n    // If we have a property key, perform property update steps.\n    if (name !== undefined) {\n      const ctor = this.constructor as typeof UpdatingElement;\n      const options =\n          ctor._classProperties!.get(name) || defaultPropertyDeclaration;\n      if (ctor._valueHasChanged(\n              this[name as keyof this], oldValue, options.hasChanged)) {\n        if (!this._changedProperties.has(name)) {\n          this._changedProperties.set(name, oldValue);\n        }\n        // Add to reflecting properties set.\n        // Note, it's important that every change has a chance to add the\n        // property to `_reflectingProperties`. This ensures setting\n        // attribute + property reflects correctly.\n        if (options.reflect === true &&\n            !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n          if (this._reflectingProperties === undefined) {\n            this._reflectingProperties = new Map();\n          }\n          this._reflectingProperties.set(name, options);\n        }\n      } else {\n        // Abort the request if the property should not be considered changed.\n        shouldRequestUpdate = false;\n      }\n    }\n    if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n      this._enqueueUpdate();\n    }\n  }\n\n  /**\n   * Requests an update which is processed asynchronously. This should\n   * be called when an element should update based on some state not triggered\n   * by setting a property. In this case, pass no arguments. It should also be\n   * called when manually implementing a property setter. In this case, pass the\n   * property `name` and `oldValue` to ensure that any configured property\n   * options are honored. Returns the `updateComplete` Promise which is resolved\n   * when the update completes.\n   *\n   * @param name {PropertyKey} (optional) name of requesting property\n   * @param oldValue {any} (optional) old value of requesting property\n   * @returns {Promise} A Promise that is resolved when the update completes.\n   */\n  requestUpdate(name?: PropertyKey, oldValue?: unknown) {\n    this._requestUpdate(name, oldValue);\n    return this.updateComplete;\n  }\n\n  /**\n   * Sets up the element to asynchronously update.\n   */\n  private async _enqueueUpdate() {\n    // Mark state updating...\n    this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n    let resolve!: (r: boolean) => void;\n    let reject!: (e: Error) => void;\n    const previousUpdatePromise = this._updatePromise;\n    this._updatePromise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    try {\n      // Ensure any previous update has resolved before updating.\n      // This `await` also ensures that property changes are batched.\n      await previousUpdatePromise;\n    } catch (e) {\n      // Ignore any previous errors. We only care that the previous cycle is\n      // done. Any error should have been handled in the previous update.\n    }\n    // Make sure the element has connected before updating.\n    if (!this._hasConnected) {\n      await new Promise((res) => this._hasConnectedResolver = res);\n    }\n    try {\n      const result = this.performUpdate();\n      // If `performUpdate` returns a Promise, we await it. This is done to\n      // enable coordinating updates with a scheduler. Note, the result is\n      // checked to avoid delaying an additional microtask unless we need to.\n      if (result != null) {\n        await result;\n      }\n    } catch (e) {\n      reject(e);\n    }\n    resolve(!this._hasRequestedUpdate);\n  }\n\n  private get _hasConnected() {\n    return (this._updateState & STATE_HAS_CONNECTED);\n  }\n\n  private get _hasRequestedUpdate() {\n    return (this._updateState & STATE_UPDATE_REQUESTED);\n  }\n\n  protected get hasUpdated() {\n    return (this._updateState & STATE_HAS_UPDATED);\n  }\n\n  /**\n   * Performs an element update. Note, if an exception is thrown during the\n   * update, `firstUpdated` and `updated` will not be called.\n   *\n   * You can override this method to change the timing of updates. If this\n   * method is overridden, `super.performUpdate()` must be called.\n   *\n   * For instance, to schedule updates to occur just before the next frame:\n   *\n   * ```\n   * protected async performUpdate(): Promise<unknown> {\n   *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n   *   super.performUpdate();\n   * }\n   * ```\n   */\n  protected performUpdate(): void|Promise<unknown> {\n    // Mixin instance properties once, if they exist.\n    if (this._instanceProperties) {\n      this._applyInstanceProperties();\n    }\n    let shouldUpdate = false;\n    const changedProperties = this._changedProperties;\n    try {\n      shouldUpdate = this.shouldUpdate(changedProperties);\n      if (shouldUpdate) {\n        this.update(changedProperties);\n      }\n    } catch (e) {\n      // Prevent `firstUpdated` and `updated` from running when there's an\n      // update exception.\n      shouldUpdate = false;\n      throw e;\n    } finally {\n      // Ensure element can accept additional updates after an exception.\n      this._markUpdated();\n    }\n    if (shouldUpdate) {\n      if (!(this._updateState & STATE_HAS_UPDATED)) {\n        this._updateState = this._updateState | STATE_HAS_UPDATED;\n        this.firstUpdated(changedProperties);\n      }\n      this.updated(changedProperties);\n    }\n  }\n\n  private _markUpdated() {\n    this._changedProperties = new Map();\n    this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n  }\n\n  /**\n   * Returns a Promise that resolves when the element has completed updating.\n   * The Promise value is a boolean that is `true` if the element completed the\n   * update without triggering another update. The Promise result is `false` if\n   * a property was set inside `updated()`. If the Promise is rejected, an\n   * exception was thrown during the update.\n   *\n   * To await additional asynchronous work, override the `_getUpdateComplete`\n   * method. For example, it is sometimes useful to await a rendered element\n   * before fulfilling this Promise. To do this, first await\n   * `super._getUpdateComplete()`, then any subsequent state.\n   *\n   * @returns {Promise} The Promise returns a boolean that indicates if the\n   * update resolved without triggering another update.\n   */\n  get updateComplete() {\n    return this._getUpdateComplete();\n  }\n\n  /**\n   * Override point for the `updateComplete` promise.\n   *\n   * It is not safe to override the `updateComplete` getter directly due to a\n   * limitation in TypeScript which means it is not possible to call a\n   * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n   * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n   * This method should be overridden instead. For example:\n   *\n   *   class MyElement extends LitElement {\n   *     async _getUpdateComplete() {\n   *       await super._getUpdateComplete();\n   *       await this._myChild.updateComplete;\n   *     }\n   *   }\n   */\n  protected _getUpdateComplete() {\n    return this._updatePromise;\n  }\n\n  /**\n   * Controls whether or not `update` should be called when the element requests\n   * an update. By default, this method always returns `true`, but this can be\n   * customized to control when to update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected shouldUpdate(_changedProperties: PropertyValues): boolean {\n    return true;\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes.\n   * It can be overridden to render and keep updated element DOM.\n   * Setting properties inside this method will *not* trigger\n   * another update.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(_changedProperties: PropertyValues) {\n    if (this._reflectingProperties !== undefined &&\n        this._reflectingProperties.size > 0) {\n      // Use forEach so this works even if for/of loops are compiled to for\n      // loops expecting arrays\n      this._reflectingProperties.forEach(\n          (v, k) => this._propertyToAttribute(k, this[k as keyof this], v));\n      this._reflectingProperties = undefined;\n    }\n  }\n\n  /**\n   * Invoked whenever the element is updated. Implement to perform\n   * post-updating tasks via DOM APIs, for example, focusing an element.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected updated(_changedProperties: PropertyValues) {\n  }\n\n  /**\n   * Invoked when the element is first updated. Implement to perform one time\n   * work on the element after update.\n   *\n   * Setting properties inside this method will trigger the element to update\n   * again after this update cycle completes.\n   *\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected firstUpdated(_changedProperties: PropertyValues) {\n  }\n}\n","/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n\nexport const supportsAdoptingStyleSheets =\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\nconst constructionToken = Symbol();\n\nexport class CSSResult {\n  _styleSheet?: CSSStyleSheet|null;\n\n  readonly cssText: string;\n\n  constructor(cssText: string, safeToken: symbol) {\n    if (safeToken !== constructionToken) {\n      throw new Error(\n          'CSSResult is not constructable. Use `unsafeCSS` or `css` instead.');\n    }\n    this.cssText = cssText;\n  }\n\n  // Note, this is a getter so that it's lazy. In practice, this means\n  // stylesheets are not created until the first element instance is made.\n  get styleSheet(): CSSStyleSheet|null {\n    if (this._styleSheet === undefined) {\n      // Note, if `adoptedStyleSheets` is supported then we assume CSSStyleSheet\n      // is constructable.\n      if (supportsAdoptingStyleSheets) {\n        this._styleSheet = new CSSStyleSheet();\n        this._styleSheet.replaceSync(this.cssText);\n      } else {\n        this._styleSheet = null;\n      }\n    }\n    return this._styleSheet;\n  }\n\n  toString(): string {\n    return this.cssText;\n  }\n}\n\n/**\n * Wrap a value for interpolation in a css tagged template literal.\n *\n * This is unsafe because untrusted CSS text can be used to phone home\n * or exfiltrate data to an attacker controlled site. Take care to only use\n * this with trusted input.\n */\nexport const unsafeCSS = (value: unknown) => {\n  return new CSSResult(String(value), constructionToken);\n};\n\nconst textFromCSSResult = (value: CSSResult|number) => {\n  if (value instanceof CSSResult) {\n    return value.cssText;\n  } else if (typeof value === 'number') {\n    return value;\n  } else {\n    throw new Error(\n        `Value passed to 'css' function must be a 'css' function result: ${\n            value}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`);\n  }\n};\n\n/**\n * Template tag which which can be used with LitElement's `style` property to\n * set element styles. For security reasons, only literal string values may be\n * used. To incorporate non-literal values `unsafeCSS` may be used inside a\n * template string part.\n */\nexport const css =\n    (strings: TemplateStringsArray, ...values: (CSSResult|number)[]) => {\n      const cssText = values.reduce(\n          (acc, v, idx) => acc + textFromCSSResult(v) + strings[idx + 1],\n          strings[0]);\n      return new CSSResult(cssText, constructionToken);\n    };\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nimport {TemplateResult} from 'lit-html';\nimport {render} from 'lit-html/lib/shady-render.js';\n\nimport {PropertyValues, UpdatingElement} from './lib/updating-element.js';\n\nexport * from './lib/updating-element.js';\nexport * from './lib/decorators.js';\nexport {html, svg, TemplateResult, SVGTemplateResult} from 'lit-html/lit-html.js';\nimport {supportsAdoptingStyleSheets, CSSResult} from './lib/css-tag.js';\nexport * from './lib/css-tag.js';\n\ndeclare global {\n  interface Window {\n    litElementVersions: string[];\n  }\n}\n\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.2.1');\n\nexport interface CSSResultArray extends Array<CSSResult|CSSResultArray> {}\n\n/**\n * Minimal implementation of Array.prototype.flat\n * @param arr the array to flatten\n * @param result the accumlated result\n */\nfunction arrayFlat(\n    styles: CSSResultArray, result: CSSResult[] = []): CSSResult[] {\n  for (let i = 0, length = styles.length; i < length; i++) {\n    const value = styles[i];\n    if (Array.isArray(value)) {\n      arrayFlat(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/** Deeply flattens styles array. Uses native flat if available. */\nconst flattenStyles = (styles: CSSResultArray): CSSResult[] =>\n    styles.flat ? styles.flat(Infinity) : arrayFlat(styles);\n\nexport class LitElement extends UpdatingElement {\n\n  /**\n   * Ensure this class is marked as `finalized` as an optimization ensuring\n   * it will not needlessly try to `finalize`.\n   *\n   * Note this property name is a string to prevent breaking Closure JS Compiler\n   * optimizations. See updating-element.ts for more information.\n   */\n  protected static['finalized'] = true;\n  /**\n   * Render method used to render the lit-html TemplateResult to the element's\n   * DOM.\n   * @param {TemplateResult} Template to render.\n   * @param {Element|DocumentFragment} Node into which to render.\n   * @param {String} Element name.\n   * @nocollapse\n   */\n  static render = render;\n\n  /**\n   * Array of styles to apply to the element. The styles should be defined\n   * using the `css` tag function.\n   */\n  static styles?: CSSResult|CSSResultArray;\n\n  private static _styles: CSSResult[]|undefined;\n\n  /** @nocollapse */\n  protected static finalize() {\n    // The Closure JS Compiler does not always preserve the correct \"this\"\n    // when calling static super methods (b/137460243), so explicitly bind.\n    super.finalize.call(this);\n    // Prepare styling that is stamped at first render time. Styling\n    // is built from user provided `styles` or is inherited from the superclass.\n    this._styles =\n        this.hasOwnProperty(JSCompiler_renameProperty('styles', this)) ?\n        this._getUniqueStyles() :\n        this._styles || [];\n  }\n\n  /** @nocollapse */\n  private static _getUniqueStyles(): CSSResult[] {\n    // Take care not to call `this.styles` multiple times since this generates\n    // new CSSResults each time.\n    // TODO(sorvell): Since we do not cache CSSResults by input, any\n    // shared styles will generate new stylesheet objects, which is wasteful.\n    // This should be addressed when a browser ships constructable\n    // stylesheets.\n    const userStyles = this.styles;\n    const styles: CSSResult[] = [];\n    if (Array.isArray(userStyles)) {\n      const flatStyles = flattenStyles(userStyles);\n      // As a performance optimization to avoid duplicated styling that can\n      // occur especially when composing via subclassing, de-duplicate styles\n      // preserving the last item in the list. The last item is kept to\n      // try to preserve cascade order with the assumption that it's most\n      // important that last added styles override previous styles.\n      const styleSet = flatStyles.reduceRight((set, s) => {\n        set.add(s);\n        // on IE set.add does not return the set.\n        return set;\n      }, new Set<CSSResult>());\n      // Array.from does not work on Set in IE\n      styleSet.forEach((v) => styles.unshift(v));\n    } else if (userStyles) {\n      styles.push(userStyles);\n    }\n    return styles;\n  }\n\n  private _needsShimAdoptedStyleSheets?: boolean;\n\n  /**\n   * Node or ShadowRoot into which element DOM should be rendered. Defaults\n   * to an open shadowRoot.\n   */\n  readonly renderRoot!: Element|DocumentFragment;\n\n  /**\n   * Performs element initialization. By default this calls `createRenderRoot`\n   * to create the element `renderRoot` node and captures any pre-set values for\n   * registered properties.\n   */\n  protected initialize() {\n    super.initialize();\n    (this as {renderRoot: Element | DocumentFragment}).renderRoot =\n        this.createRenderRoot();\n    // Note, if renderRoot is not a shadowRoot, styles would/could apply to the\n    // element's getRootNode(). While this could be done, we're choosing not to\n    // support this now since it would require different logic around de-duping.\n    if (window.ShadowRoot && this.renderRoot instanceof window.ShadowRoot) {\n      this.adoptStyles();\n    }\n  }\n\n  /**\n   * Returns the node into which the element should render and by default\n   * creates and returns an open shadowRoot. Implement to customize where the\n   * element's DOM is rendered. For example, to render into the element's\n   * childNodes, return `this`.\n   * @returns {Element|DocumentFragment} Returns a node into which to render.\n   */\n  protected createRenderRoot(): Element|ShadowRoot {\n    return this.attachShadow({mode: 'open'});\n  }\n\n  /**\n   * Applies styling to the element shadowRoot using the `static get styles`\n   * property. Styling will apply using `shadowRoot.adoptedStyleSheets` where\n   * available and will fallback otherwise. When Shadow DOM is polyfilled,\n   * ShadyCSS scopes styles and adds them to the document. When Shadow DOM\n   * is available but `adoptedStyleSheets` is not, styles are appended to the\n   * end of the `shadowRoot` to [mimic spec\n   * behavior](https://wicg.github.io/construct-stylesheets/#using-constructed-stylesheets).\n   */\n  protected adoptStyles() {\n    const styles = (this.constructor as typeof LitElement)._styles!;\n    if (styles.length === 0) {\n      return;\n    }\n    // There are three separate cases here based on Shadow DOM support.\n    // (1) shadowRoot polyfilled: use ShadyCSS\n    // (2) shadowRoot.adoptedStyleSheets available: use it.\n    // (3) shadowRoot.adoptedStyleSheets polyfilled: append styles after\n    // rendering\n    if (window.ShadyCSS !== undefined && !window.ShadyCSS.nativeShadow) {\n      window.ShadyCSS.ScopingShim!.prepareAdoptedCssText(\n          styles.map((s) => s.cssText), this.localName);\n    } else if (supportsAdoptingStyleSheets) {\n      (this.renderRoot as ShadowRoot).adoptedStyleSheets =\n          styles.map((s) => s.styleSheet!);\n    } else {\n      // This must be done after rendering so the actual style insertion is done\n      // in `update`.\n      this._needsShimAdoptedStyleSheets = true;\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // Note, first update/render handles styleElement so we only call this if\n    // connected after first update.\n    if (this.hasUpdated && window.ShadyCSS !== undefined) {\n      window.ShadyCSS.styleElement(this);\n    }\n  }\n\n  /**\n   * Updates the element. This method reflects property values to attributes\n   * and calls `render` to render DOM via lit-html. Setting properties inside\n   * this method will *not* trigger another update.\n   * * @param _changedProperties Map of changed properties with old values\n   */\n  protected update(changedProperties: PropertyValues) {\n    super.update(changedProperties);\n    const templateResult = this.render() as unknown;\n    if (templateResult instanceof TemplateResult) {\n      (this.constructor as typeof LitElement)\n          .render(\n              templateResult,\n              this.renderRoot,\n              {scopeName: this.localName, eventContext: this});\n    }\n    // When native Shadow DOM is used but adoptedStyles are not supported,\n    // insert styling after rendering to ensure adoptedStyles have highest\n    // priority.\n    if (this._needsShimAdoptedStyleSheets) {\n      this._needsShimAdoptedStyleSheets = false;\n      (this.constructor as typeof LitElement)._styles!.forEach((s) => {\n        const style = document.createElement('style');\n        style.textContent = s.cssText;\n        this.renderRoot.appendChild(style);\n      });\n    }\n  }\n\n  /**\n   * Invoked on each update to perform rendering tasks. This method must return\n   * a lit-html TemplateResult. Setting properties inside this method will *not*\n   * trigger the element to update.\n   */\n  protected render(): TemplateResult|void {\n  }\n}\n","import { action } from 'mobx';\n\nimport { GameState, useAppStore } from 'store';\nimport Card from 'components/Card';\nimport Image from 'components/Image';\nimport Title from 'components/Title';\nimport Desc from 'components/Desc';\nimport CovertCow from 'assets/invisiblecow.jpg';\n\nconst Start = () => {\n  const store = useAppStore();\n\n  const onClickStart = action(() => {\n    store.gameState = GameState.RUNNING;\n  });\n\n  return (\n    <Card>\n      <Image src={CovertCow} />\n      <Title>hello i am a covert cow</Title>\n      <wired-button onClick={onClickStart}>find me</wired-button>\n      <Desc>make sure your sound is on. best enjoyed with headphones!</Desc>\n    </Card>\n  );\n};\n\nexport default Start;\n"],"sourceRoot":""}